{"version":3,"sources":["SubmissionPanel.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,oCAAmC;AACnC,qDAAoD;AACpD,8CAA6C;AAC7C,6CAA4C;AAC5C,oDAAmD;AACnD,2CAAsC;AACtC,gDAA4C;AACtC,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAG5C;IAA6C,mCAAM;IAAnD;;IAuEA,CAAC;wBAvEoB,eAAe;IAGhC,+BAAK,GAAL;IACA,CAAC;IAED,2CAAiB,GAAjB,UAAkB,KAAK;QACnB,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAED,0CAAgB,GAAhB,UAAiB,KAAK;QAClB,qBAAS,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,iBAAe,CAAC,CAAC;IACrD,CAAC;IAED,UAAU;IACV,sCAAY,GAAZ;QACI,IAAI,CAAC,iBAAO,CAAC,QAAQ,EAAE;YACnB,qBAAS,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,oBAAU,EAAE,IAAI,EAAE,IAAI,EAAE;gBAClD,qBAAS,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,oBAAU,CAAgB,CAAC,QAAQ,CAAC,gCAAgC,GAAG,iBAAO,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;YAC1I,CAAC,CAAC,CAAC;YACH,OAAO;SACV;QACD,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE,aAAa,EAAE,uBAAU,CAAC,aAAa;YACnE,IAAI,EAAE,mBAAQ,CAAC,WAAW,EAAE,CAAC,IAAI;YACjC,MAAM,EAAE,mBAAQ,CAAC,WAAW,EAAE,CAAC,MAAM;YACrC,WAAW,EAAE,mBAAQ,CAAC,WAAW,EAAE,CAAC,WAAW;YAC/C,cAAc,EAAE,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc;SACpD,CAAC,CAAC;QACH,OAAO,CAAC,GAAG,CAAC,aAAW,IAAM,CAAC,CAAA;QAC9B,iBAAO,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,iBAAO,CAAC,SAAS,GAAG,YAAY,GAAG,iBAAO,CAAC,QAAQ,EAAE,KAAK,EAAE,gCAAgC,EAAE,UAAU,GAAG,EAAE,QAAQ;YACnJ,IAAI,CAAC,GAAG,EAAE;gBACN,IAAI,QAAQ,CAAC,IAAI,CAAC,kBAAkB,IAAI,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,kBAAkB,IAAI,EAAE,EAAE;oBACpF,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;iBACrB;qBAAM;oBACH,iBAAO,CAAC,aAAa,GAAG,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC;oBACpD,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;oBACtD,IAAI,CAAC,iBAAO,CAAC,KAAK,EAAE;wBAChB,IAAI,GAAG,CAAC,aAAa,IAAI,uBAAU,CAAC,aAAa,EAAE;4BAC/C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;yBACxB;6BAAM;4BACH,qBAAS,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,oBAAU,EAAE,IAAI,EAAE,IAAI,EAAE;gCAClD,qBAAS,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,oBAAU,CAAgB,CAAC,QAAQ,CAAC,mCAAmC,GAAG,iBAAO,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;4BAC7I,CAAC,CAAC,CAAC;yBACN;qBACJ;iBACJ;aACJ;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;IACxB,CAAC;IAED,QAAQ;IACR,gCAAM,GAAN,UAAO,YAAY;QACf,IAAI,IAAI,GAAG,EAAE,QAAQ,EAAE,iBAAO,CAAC,QAAQ,EAAE,kBAAkB,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC;QACvG,iBAAO,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,iBAAO,CAAC,GAAG,EAAE,MAAM,EAAE,gCAAgC,EAAE,UAAU,GAAG,EAAE,QAAQ;YAC5G,IAAI,CAAC,GAAG,EAAE;gBACN,eAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;gBACzB,qBAAS,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,iBAAe,CAAC,CAAC;aACpD;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;IACxC,CAAC;IAED,MAAM;IACN,mCAAS,GAAT,UAAU,YAAY;QAClB,IAAI,QAAQ,GAAG,EAAE,aAAa,EAAE,iBAAO,CAAC,aAAa,EAAE,kBAAkB,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC;QACrH,iBAAO,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,iBAAO,CAAC,MAAM,EAAE,MAAM,EAAE,gCAAgC,EAAE,UAAU,GAAG,EAAE,QAAQ;YAC/G,IAAI,CAAC,GAAG,EAAE;gBACN,eAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;gBACzB,qBAAS,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,iBAAe,CAAC,CAAC;aACpD;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC5C,CAAC;;IApEgB,yBAAS,GAAG,iBAAiB,CAAC;IAF9B,eAAe;QADnC,OAAO;OACa,eAAe,CAuEnC;IAAD,sBAAC;CAvED,AAuEC,CAvE4C,eAAM,GAuElD;kBAvEoB,eAAe","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\UI\\panel","sourcesContent":["import { BaseUI } from \"../BaseUI\";\nimport { UIManager } from \"../../Manager/UIManager\";\nimport { NetWork } from \"../../Http/NetWork\";\nimport { UIHelp } from \"../../Utils/UIHelp\";\nimport { ConstValue } from \"../../Data/ConstValue\";\nimport ErrorPanel from \"./ErrorPanel\";\nimport {DaAnData} from \"../../Data/DaAnData\"\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class SubmissionPanel extends BaseUI {\n\n    protected static className = \"SubmissionPanel\";\n    start() {\n    }\n\n    onQueDingBtnClick(event) {\n        this.DetectionNet();\n    }\n\n    onQuXiaoBtnClick(event) {\n        UIManager.getInstance().closeUI(SubmissionPanel);\n    }\n\n    //提交或者修改答案\n    DetectionNet() {\n        if (!NetWork.title_id) {\n            UIManager.getInstance().openUI(ErrorPanel, null, 1000, () => {\n                (UIManager.getInstance().getUI(ErrorPanel) as ErrorPanel).setPanel(\"titleId为空,请联系技术老师解决！\\ntitleId=\" + NetWork.title_id, \"\", \"\", \"确定\");\n            });\n            return;\n        }\n        let data = JSON.stringify({ CoursewareKey: ConstValue.CoursewareKey,\n        type: DaAnData.getInstance().type,\n        figure: DaAnData.getInstance().figure,\n        ruleDataArr: DaAnData.getInstance().ruleDataArr,\n        subjectDataArr: DaAnData.getInstance().subjectDataArr\n        });\n        console.log(`data is ${data}`)\n        NetWork.getInstance().httpRequest(NetWork.GET_TITLE + \"?title_id=\" + NetWork.title_id, \"GET\", \"application/json;charset=utf-8\", function (err, response) {\n            if (!err) {\n                if (response.data.courseware_content == null || response.data.courseware_content == \"\") {\n                    this.AddNet(data);\n                } else {\n                    NetWork.courseware_id = response.data.courseware_id;\n                    let res = JSON.parse(response.data.courseware_content)\n                    if (!NetWork.empty) {\n                        if (res.CoursewareKey == ConstValue.CoursewareKey) {\n                            this.ModifyNet(data);\n                        } else {\n                            UIManager.getInstance().openUI(ErrorPanel, null, 1000, () => {\n                                (UIManager.getInstance().getUI(ErrorPanel) as ErrorPanel).setPanel(\"该titleId已被使用,请联系技术老师解决！\\ntitleId=\" + NetWork.title_id, \"\", \"\", \"确定\");\n                            });\n                        }\n                    }\n                }\n            }\n        }.bind(this), null);\n    }\n\n    //添加答案信息\n    AddNet(gameDataJson) {\n        let data = { title_id: NetWork.title_id, courseware_content: gameDataJson, is_result: 1, is_lavel: 0 };\n        NetWork.getInstance().httpRequest(NetWork.ADD, \"POST\", \"application/json;charset=utf-8\", function (err, response) {\n            if (!err) {\n                UIHelp.showTip(\"答案提交成功\");\n                UIManager.getInstance().closeUI(SubmissionPanel);\n            }\n        }.bind(this), JSON.stringify(data));\n    }\n\n    //修改课件\n    ModifyNet(gameDataJson) {\n        let jsonData = { courseware_id: NetWork.courseware_id, courseware_content: gameDataJson, is_result: 1, is_lavel: 0 };\n        NetWork.getInstance().httpRequest(NetWork.MODIFY, \"POST\", \"application/json;charset=utf-8\", function (err, response) {\n            if (!err) {\n                UIHelp.showTip(\"答案修改成功\");\n                UIManager.getInstance().closeUI(SubmissionPanel);\n            }\n        }.bind(this), JSON.stringify(jsonData));\n    }\n}\n"]}