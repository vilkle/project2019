{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\UIComm/assets\\scripts\\UIComm\\Tools.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\UIComm","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\n/**美术提供的位移动画参数 */\nexport class ArtMoveParam{\n    /**时刻，ms */\n    time: number = 0;\n    /**位置 */\n    pos:cc.Vec2 = cc.Vec2.ZERO;\n\n    /**\n     * @param t 时刻，ms\n     * @param p 位置\n     */\n    constructor(t:number, p:cc.Vec2){\n        this.time = t;\n        this.pos = p;\n    }\n}\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport class Tools  {\n   /**\n     * 播放spine动画\n     * @param {*} sp_Skeleton 动画文件\n     * @param {*} animName 动作名称\n     * @param {*} loop 是否循环\n     * @param {*} callback 播放完毕回调\n     */\n    public static playSpine(sp_Skeleton:sp.Skeleton,animName:string,loop:boolean,callback:any=null) {\n        // sp_Skeleton.premultipliedAlpha=false;//这样设置在cocos creator中才能有半透明效果\n        \n        // let spine = this.node.getComponent(sp.Skeleton);\n        let track = sp_Skeleton.setAnimation(0, animName, loop);\n        if (track) {\n            // 注册动画的结束回调\n            sp_Skeleton.setCompleteListener((trackEntry, loopCount) => {\n                let name = trackEntry.animation ? trackEntry.animation.name : '';\n                if (name === animName && callback&&callback!=null) {\n                   // console.log(\"动画回调\");\n                    callback(); // 动画结束后执行自己的逻辑\n                }\n            });\n        }\n    }\n\n    //参数获取\n    public static getQueryVariable(variable:string) {\n        var query = window.location.href;\n        var vars = query.split(\"?\");\n        if(vars.length<2)\n        return false;\n        var vars = vars[1].split(\"&\");\n       \n        for (var i = 0; i < vars.length; i++) {\n            var pair = vars[i].split(\"=\");\n            if (pair[0] == variable) { return pair[1]; }\n        }\n        return (false);\n    }\n\n    /**\n     * 使节点直接运行美术提供的位移动画参数，\n     * (节点当前位置对应美术参数列表最后一个参数位置，\n     * 函数内部会做相对位置的处理)\n     * @param node \n     * @param params \n     * @param endCbk \n     */\n    public static runArtMoveSequence(node:cc.Node, params:Array<ArtMoveParam>, endCbk:Function = null){\n        let nodeOriPos = node.getPosition();\n        //节点实际坐标与美术参数坐标的差\n        let gapPos = nodeOriPos.sub(params[params.length - 1].pos);\n        function transArtPosToNodePos(artPos:cc.Vec2){\n            return artPos.add(gapPos);\n        }\n        node.setPosition(transArtPosToNodePos(params[0].pos));\n\n        if(params.length <= 1){\n            if(endCbk) endCbk();\n            return;\n        }\n\n        let actArray:Array<cc.FiniteTimeAction> = []\n        for(let i = 1; i < params.length - 1; i++){\n            let duration = (params[i].time - params[i - 1].time) * 0.001;\n            actArray.push(cc.moveTo(duration, transArtPosToNodePos(params[i].pos)));\n        }\n        if(endCbk){\n            actArray.push(cc.callFunc(endCbk));\n        }\n\n        node.runAction(cc.sequence(actArray));\n    }\n\n    /**获取当前时间戳，毫秒 */\n    public static getNowTimeMS(){\n        return (new Date()).getTime()\n    }\n\n    /**获取当前时间戳，秒 */\n    public static getNowTimeS(){\n        return Math.floor((new Date()).getTime()*0.001)\n    }\n\n    /**\n     * 格式化时间， eg: 100 ->  '01:40'\n     * @param time 时长，秒\n     */\n    public static getFormatTime(time:number){\n        let min:any = Math.floor(time/60)\n        if(min < 10){\n            min = '0' + min \n        }\n        let sec:any = time%60\n        if(sec < 10){\n            sec = '0' + sec\n        }\n        return min + ':' + sec\n    }\n}\n"]}