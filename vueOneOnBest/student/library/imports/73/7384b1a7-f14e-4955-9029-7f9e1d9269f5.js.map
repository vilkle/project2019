{"version":3,"sources":["../../../../assets/scripts/assets/scripts/game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/scripts","sourcesContent":["import DataReporting from \"./Data/DataReporting\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Game extends cc.Component {\n\n    @property(cc.Label)\n    countLabel: cc.Label = null;\n\n    @property(cc.Prefab)\n    egg: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    messageBox: cc.Prefab = null;\n\n    @property(cc.Layout)\n    layoutTop: cc.Layout = null;\n\n    @property(cc.Layout)\n    layoutBottom: cc.Layout = null;\n\n    @property(cc.Button)\n    btnSure: cc.Button = null;\n\n    @property(cc.audioEngine)\n    audioLoad: cc.AudioClip = null;\n\n    @property(cc.audioEngine)\n    audioBtnSure: cc.AudioClip = null;\n\n    @property(cc.audioEngine)\n    audioAllRight: cc.AudioClip = null;\n\n    @property(cc.audioEngine)\n    audioError: cc.AudioClip = null;\n\n    @property(cc.audioEngine)\n    audioCancel: cc.AudioClip = null;\n\n    @property(cc.audioEngine)\n    audioSelect_1: cc.AudioClip = null;\n\n    @property(cc.audioEngine)\n    audioSelect_2: cc.AudioClip = null;\n\n    //\b元素数量\n    itemNumber: number = 10;\n    //元素集合（编辑器设置的是类数组对象）\n    items: Object | Array<number> = {};\n    //正确答案的数量\n    answerCount: number = 0;\n    //数量过多时的缩放比例\n    itemScale: number = 1;\n    //当前游戏回合\n    round: number = 1;\n    //游戏总回合\n    totalRound: number = 4;\n    //回合结束\n    roundOver: boolean = false;\n    //题干标准数\n    norm: number = 20;\n    //题干类型 -> 大于:1, 小于:2, 不小于:3, 不大于:4\n    type: number = 1;\n    //已选答案中的错误数量\n    errorAnswer: number = 0;\n    //元素点击音效需要交叉播放\n    audioCount: boolean = true;\n    //数据上报标记\n    submitCourse: boolean = true;\n    //\b\b提交按钮是否禁用\n    disabled: boolean = false;\n\n    //已选元素集合\n    selection: Array<cc.Node> = [];\n\n    kaiShiZuoDa: boolean = false;\n\n    daTiData = [];\n\n    gameOver: boolean = false;\n    //当前操作过的游戏回合\n    caoZuoRound: number = 0;\n\n    //初始化\n    handleInitItems(num: number) {\n        this.setCountRound(this.round);\n        // 区分奇偶\n        let n = num & 1 ? (num + 1) / 2 : num / 2;\n        this.itemScale = 15 - n > 10 ? 1 : (15 - n) / 10;\n        this.layoutTop.spacingX = this.layoutBottom.spacingX = this.setSpacingX(n);\n        this.addLayoutItem(0, n, this.layoutTop);\n        this.addLayoutItem(n, this.itemNumber, this.layoutBottom);\n        this.answerCount = this.getAnswerCount();\n    }\n\n    //计算正确答案的数量，用于判断是否漏选\n    getAnswerCount() {\n        let num = 0;\n        for (let i in this.items) {\n            if (~~i > (this.itemNumber - 1)) continue\n            this.checkAnswer(this.items[i]) && num++;\n        }\n        return num;\n    }\n\n    //计算元素之间的间距\n    setSpacingX(n: number) {\n        return 5 * n * n - 105 * n + 495;\n    }\n\n    // 向 layout 中添加 item\n    addLayoutItem(min: number, max: number, layout: cc.Layout) {\n        for (let i = min; i < max; i++) {\n            let item = cc.instantiate(this.egg);\n            let egg = item.getComponent('egg');\n            egg.text = this.items[i];\n            // 根据数量缩放元素\n            item.scale = this.itemScale;\n            // 调整元素阴影的缩放 防止穿帮\n            item.getComponent('egg').shadowDisplay.scaleY = 3.9 - 3 * this.itemScale;\n            layout.node.addChild(item);\n        }\n    }\n\n    //点击元素\n    handleItemSelect(event) {\n        this.caoZuoRound = this.round;\n        if (this.roundOver) return\n        // 数据上报\n        // if (this.submitCourse) {\n        //     courseware.page.sendToParent('addLog', { eventType: 'clickStart' }) \n        //     this.submitCourse = false\n        // }\n        this.kaiShiZuoDa = true;\n\n        let item = event.target.getComponent('egg');\n        item.selected = !item.selected;\n        item.handleClickCallback();\n        //更新已选集合\n        if (item.selected) {\n            // 交叉播放音效\n            let audioName = this.audioCount ? 'audioSelect_1' : 'audioSelect_2';\n            cc.audioEngine.playEffect(this[audioName], false);\n            this.audioCount = !this.audioCount;\n            // 选中\n            this.selection.push(event.target);\n            item.bingo = this.checkAnswer(item.text);\n            if (!item.bingo) this.errorAnswer++;\n        } else {\n            cc.audioEngine.playEffect(this.audioCancel, false);\n            // 取消选中\n            let i = this.selection.indexOf(event.target);\n            i > -1 && this.selection.splice(i, 1);\n            if (!item.bingo) this.errorAnswer--;\n        }\n        this.showButton();\n    }\n\n    //切换按钮状态\n    showButton() {\n        this.btnSure.interactable = this.selection.length > 0 && !this.roundOver;\n    }\n\n    //确认选择\n    handleButtonClick(event) {\n        // 防止多次点击\n        if (this.disabled) return\n        this.disabled = true;\n\n        // 播放按钮音效\n        cc.audioEngine.playEffect(this.audioBtnSure, false);\n        this.roundOver = true;\n        //根据答案数量和回答情况判断是否全对\n        let count = this.answerCount == this.selection.length;\n        let bingo: boolean = this.errorAnswer == 0 && count;\n        for (let i of this.selection) {\n            let item = i.getComponent('egg');\n            item.handleGameOver(bingo);\n        }\n        this.btnSure.interactable = !bingo;\n        //播放破蛋音效\n        let audioName = bingo ? 'audioAllRight' : 'audioError';\n        cc.audioEngine.playEffect(this[audioName], false);\n        let delay = bingo ? 2000 : 700;\n        //动画结束后弹出机器人\n        setTimeout(() => {\n            this.disabled = false;\n            this.handleRoundOver(bingo);\n        }, delay)\n    }\n\n    //回合结束\n    handleRoundOver(bingo: boolean) {\n        if (bingo) {\n            // Toast 弹窗，并进入下一回合\n            if (this.totalRound > this.round) {\n                this.round++;\n                this.resetItems();\n                this.setToast('答对了！你真棒！\\n再尝试一下吧 ', 0);\n                this.daTiData.push('1');\n            } else {\n                this.daTiData.push('1');\n                this.gameOver = true;\n                this.setToast('你真棒！闯关成功！', 1, true);\n                this.shuJuShangBao();\n                // courseware.page.sendToParent('clickSubmit', 1);\n                // courseware.page.sendToParent('addLog', { eventType: 'clickSubmit', eventValue: 1 });\n                // 通知编辑器启用“提交”按钮\n                let obj = { great: true };\n                window.parent.postMessage(JSON.stringify(obj), '*');\n            }\n        } else {\n            // Toast 弹窗，不重置继续操作\n            this.roundOver = false;\n            this.setToast('啊哦，请再试一试～', 2);\n        }\n    }\n\n    //关闭弹窗\n    handleBoxClose(event) { }\n\n    //软重置 - 只重置动画\n    softResetItems() {\n        this.roundOver = false;\n        // 重置动画\n        for (let i of this.selection) {\n            let item = i.getComponent('egg');\n            item.eggSp.skeletonData = item.spineArr[0];\n            item.eggSp.setAnimation(0, 'in', false);\n            item.eggSp.timeScale = 0;\n        }\n        this.selection = [];\n        this.node.off(cc.Node.EventType.TOUCH_START, this.softResetItems, this);\n    }\n\n    //重置\n    resetItems() {\n        this.roundOver = false;\n        this.selection = [];\n        this.layoutBottom.node.removeAllChildren();\n        this.layoutTop.node.removeAllChildren();\n        this.items = this.initItemNumer();\n        this.handleInitItems(this.itemNumber);\n    }\n\n    //验证答案是否正确\n    checkAnswer(text: string | number) {\n        let ans = Number(text);\n        let res = false;\n        switch (this.type) {\n            case 1:\n                res = ans > this.norm;\n                break;\n            case 2:\n                res = ans < this.norm;\n                break;\n            case 3:\n                res = ans >= this.norm;\n                break;\n            case 4:\n                res = ans <= this.norm;\n                break;\n            default: break;\n        }\n        return res;\n    }\n\n    //随机生成题目\n    initItemNumer() {\n        let arr = {};\n        for (let i = 0; i < this.itemNumber; i++) {\n            // 生成一个 0 ~ 50 的随机数\n            let item: number | string = this.setRangeRandom(0, 50);\n            arr[i] = item;\n        }\n        //设置标准数\n        let norm = this.initNormItem();\n        arr[norm.index] = norm.value;\n        return arr;\n    }\n\n    //设置题干标准数\n    initNormItem() {\n        // 生成一个 1 ~ 8 的随机数作为标准数的波动范围\n        let range = this.norm > 8 ? this.setRangeRandom(1, 8) : 1;\n        let value: number | string = this.type & 1 ? this.norm + range : this.norm - range;\n        let index = this.setRangeRandom(0, this.itemNumber);\n        // 返回一个随机 index 的正确答案 value\n        return { index, value }\n    }\n\n    //修改回合数\n    setCountRound(round: number) {\n        this.countLabel.string = `${this.round}\\/${this.totalRound}`\n    }\n\n    //在范围内生成随机数\n    setRangeRandom(min: number, max: number) {\n        let n = max - min;\n        if (n == 0) {\n            return max\n        } else if (n < 0) {\n            [max, min] = [min, max];\n            n = Math.abs(n);\n        }\n\n        return ((Math.random() * ++n) >> 0) + min;\n    }\n\n    //创建tips\n    setToast(str: string, right: number = 0, buXuGuanBi?: boolean) {\n        let m = cc.instantiate(this.messageBox);\n        m.getComponent('box').text = str;\n        m.getComponent('box').right = right;\n        m.getComponent('box').buXuGuanBi = buXuGuanBi;\n        this.node.addChild(m);\n    }\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        cc.audioEngine.playMusic(this.audioLoad, false);\n    }\n\n    shuJuShangBao() {\n        if (DataReporting.isRepeatReport) {\n            DataReporting.isRepeatReport = false;\n            DataReporting.getInstance().dispatchEvent('addLog', {\n                eventType: 'clickSubmit',\n                eventValue: JSON.stringify({\n                    isResult: 1,\n                    isLavel: 1,\n                    levelData: [\n                        { subject: JSON.stringify({}), answer: JSON.stringify({}), result: this.caoZuoRound >= 1 ? (this.daTiData[0] ? this.daTiData[0] : 2) : 4 },\n                        { subject: JSON.stringify({}), answer: JSON.stringify({}), result: this.caoZuoRound >= 2 ? (this.daTiData[1] ? this.daTiData[1] : 2) : 4 },\n                        { subject: JSON.stringify({}), answer: JSON.stringify({}), result: this.caoZuoRound >= 3 ? (this.daTiData[2] ? this.daTiData[2] : 2) : 4 },\n                        { subject: JSON.stringify({}), answer: JSON.stringify({}), result: this.caoZuoRound >= 4 ? (this.daTiData[3] ? this.daTiData[3] : 2) : 4 }\n                    ],\n                    result: this.kaiShiZuoDa ? (this.gameOver ? 1 : 2) : 4\n                })\n            })\n        }\n    }\n\n    onEndGame() {\n        this.shuJuShangBao();\n        //eventValue  0为未答题   1为答对了    2为答错了或未完成\n        DataReporting.getInstance().dispatchEvent('end_finished', { eventType: 'activity', eventValue: this.kaiShiZuoDa ? (this.gameOver ? 1 : 2) : 0 });\n    }\n\n    start() {\n        DataReporting.getInstance().dispatchEvent(\"start\");\n        DataReporting.getInstance().addEvent('end_game', this.onEndGame.bind(this));\n        // this.items = this.initItemNumer();\n        this.handleInitItems(this.itemNumber);\n        // 监听 item 的选中事件\n        this.node.on('select', (event) => {\n            this.handleItemSelect(event);\n            event.stopPropagation();\n        });\n        // 监听 messageBox 的关闭事件\n        this.node.on('close', (event) => {\n            this.handleBoxClose(event);\n            event.stopPropagation();\n        });\n    }\n    // update (dt) {}\n}\n"]}