{"version":3,"sources":["../../../../../assets/scripts/UI/assets/scripts/UI/egg.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/scripts/UI","sourcesContent":["const {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Egg extends cc.Component {\n\n    @property(cc.Label)\n    labelDisplay: cc.Label = null;\n\n    // 阴影节点，保证其 scaleY 始终为 1\n    @property(cc.Node)\n    shadowDisplay: cc.Node = null;\n\n    @property(sp.Skeleton)\n    eggSp: sp.Skeleton = null;\n\n    @property(cc.Node)\n    eggSelected: cc.Node = null;\n\n    @property(cc.Node)\n    eggBgAction: cc.Node = null;\n\n    // @property(cc.audioEngine)\n\n\n    // 蛋壳上的文字\n    text: string = ''\n    // 是否选中\n    selected: boolean = false;\n    // 是否正确答案\n    bingo: boolean = false;\n    // 是否回合结束\n    end: boolean = false;\n\n    handleClick(event) {\n        // 派发 select 事件\n        let eventSelect = new cc.Event.EventCustom('select', true);\n        this.node.dispatchEvent(eventSelect);\n    }\n\n    handleClickCallback() {\n        //执行相关动画\n        this.eggSelected.runAction(this.setBgSection(this.selected));\n        this.labelDisplay.node.runAction(this.setShakeAction());\n        if (this.selected) {\n            this.eggBgAction.active = true;\n            this.eggBgAction.runAction(this.setSelectBgAction());\n        }\n    }\n\n    handleGameOver(bingo: boolean) {\n        //回合结束\n        if (bingo) {\n            //答对时重置\n            this.selected = false;\n            this.eggSelected.opacity = 0;\n        }\n        let str = bingo ? 'Correct' : 'Error';\n        this[`set${str}AnswerSpine`]();\n    }\n\n    setSelectBgAction() {\n        //设置背景被选中时候的动画\n        let big = cc.scaleTo(0.3, 1.3, 1.3).easing(cc.easeCubicActionOut());\n        let fade = cc.fadeOut(0.3);\n        let callback = cc.callFunc(() => {\n            this.eggBgAction.active = false;\n            this.eggBgAction.opacity = 150;\n            this.eggBgAction.scale = 1;\n        }, 100)\n        return cc.sequence(big, fade, callback);\n    }\n\n    setBgSection(selected: boolean) {\n        //选中状态\n        let fade = selected ? 'fadeIn' : 'fadeOut';\n        return cc[fade](0.2);\n    }\n\n    setShakeAction() {\n        // 设置摇晃动画\n        let turnLeft = cc.rotateTo(0.1, 7);\n        let turnRight = cc.rotateTo(0.2, -7);\n        let trunBack = cc.rotateTo(0.1, 0);\n        return cc.sequence(turnLeft, turnRight, trunBack)\n    }\n\n    setCorrectAnswerSpine() {\n        // 回答正确的动画\n        this.eggSp.timeScale = 1;\n        this.eggSp.setSkin('niao');\n        this.eggSp.setAnimation(0, 'in', false);\n        // 随机选择一个动画\n        let index = (Math.random() * 4) >> 0;\n        switch (index) {\n            case 0:\n                this.eggSp.addAnimation(0, 'guodu_B', false);\n                this.eggSp.addAnimation(0, 'guodu_B_standby_loop', true);\n                break;\n            case 1:\n                this.eggSp.addAnimation(0, 'guodu_A', false);\n                this.eggSp.addAnimation(0, 'guodu_A_yaobai_loop', true);\n                break;\n            case 2:\n                this.eggSp.addAnimation(0, 'standby3_loop', true);\n                break;\n            default:\n                this.eggSp.addAnimation(0, 'standby4_loop', true);\n                break;\n        }\n    }\n\n    setErrorAnswerSpine() {\n        //回答错误的动画\n        this.labelDisplay.node.runAction(this.setShakeAction());\n        this.eggSp.node.runAction(this.setShakeAction());\n        this.eggSelected.runAction(this.setShakeAction());\n    }\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n\n    start() {\n        this.labelDisplay.string = this.text;\n        //注册点击事件\n        this.node.on(cc.Node.EventType.TOUCH_START, this.handleClick, this);\n    }\n\n    // update (dt) {}\n\n    onDestroy() {\n        // 取消监听\n        this.node.off(cc.Node.EventType.TOUCH_START, this.handleClick, this);\n    }\n}\n"]}