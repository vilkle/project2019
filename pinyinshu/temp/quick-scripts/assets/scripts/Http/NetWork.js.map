{"version":3,"sources":["NetWork.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/scripts/Http","sourcesContent":["export class NetWork {\n    private static instance: NetWork;\n\n    public static readonly isOnlineEnv = /\\/\\/static\\.haibian\\.com/.test(window['location'].href)\n    public static readonly isProtocol = /http:/.test(window['location'].protocol)\n    public static readonly isLocal = /localhost/.test(window['location'].href) || NetWork.isProtocol\n    public static readonly BASE = NetWork.isOnlineEnv ? '//courseware.haibian.com' : NetWork.isLocal ? '//ceshi.courseware.haibian.com' : '//ceshi_courseware.haibian.com'\n\n\n    public static readonly GET_QUESTION = NetWork.BASE + '/get'\n    public static readonly GET_USER_PROGRESS = NetWork.BASE + '/get/answer'\n    public static readonly GET_TITLE = NetWork.BASE + \"/get/title\"\n    public static readonly ADD = NetWork.BASE + \"/add\"\n    public static readonly MODIFY = NetWork.BASE + \"/modify\"\n\n    public static courseware_id = 0;\n    public static title_id = null;\n    public static user_id = null;\n\n    static getInstance() {\n        if (this.instance == null) {\n            this.instance = new NetWork();\n        }\n        return this.instance;\n    }\n\n    /**\n     * 请求网络Post 0成功 1超时\n     * @param url \n     * @param openType \n     * @param contentType \n     * @param callback \n     * @param params \n     */\n    httpRequest(url, openType, contentType, callback = null, params = \"\") {\n        var xhr = new XMLHttpRequest();\n        xhr.open(openType, url);\n        xhr.timeout = 10000;\n        xhr.setRequestHeader(\"Content-Type\", contentType);\n        xhr.withCredentials = true;\n\n        //回调\n        xhr.onreadystatechange = function () {\n            console.log(\"httpRequest rsp status\", xhr.status, \"        xhr.readyState\", xhr.readyState);\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status <= 400)) {\n                callback && callback(false, xhr.responseText);\n            }\n        };\n\n        //超时回调\n        xhr.ontimeout = function (event) {\n            console.log('httpRequest timeout');\n            callback && callback(true, null);\n        };\n\n        //出错\n        xhr.onerror = function (error) {\n            console.log('httpRequest error');\n            callback && callback(true, null);\n        }\n\n        xhr.send(params);\n    }\n\n    /**\n     * 获取url参数\n     */\n    GetRequest() {\n        var url = location.search; //获取url中\"?\"符后的字串\n        var theRequest = new Object();\n        if (url.indexOf(\"?\") != -1) {\n            var str = url.substr(1);\n            var strs = str.split(\"&\");\n            for (var i = 0; i < strs.length; i++) {\n                theRequest[strs[i].split(\"=\")[0]] = unescape(strs[i].split(\"=\")[1]);\n            }\n        }\n        return theRequest;\n    }\n}"]}