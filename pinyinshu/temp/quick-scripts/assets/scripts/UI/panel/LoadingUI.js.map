{"version":3,"sources":["LoadingUI.ts"],"names":[],"mappings":";;;;;AAAA,oCAA4C;AAC5C,oDAAmD;AACnD,+CAA0C;AAC1C,yCAAoC;AACpC,qDAAoD;AACpD,8CAA6C;AAC7C,0DAAqD;AAE/C,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAA+B,6BAAM;IADrC;QAAA,qEAyCC;QAnCW,iBAAW,GAAmB,IAAI,CAAC;QAEnC,mBAAa,GAAa,IAAI,CAAC;QAE/B,gBAAU,GAAY,IAAI,CAAC;;IA+BvC,CAAC;IA7BG,0BAAM,GAAN;QAAA,iBA4BC;QA3BG,iBAAO,CAAC,WAAW,EAAE,CAAC,UAAU,EAAE,CAAC;QACnC,IAAI,UAAU,GAAG,UAAC,cAAsB,EAAE,UAAkB,EAAE,IAAS;YACnE,KAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,cAAc,GAAG,UAAU,CAAC;YACxD,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,UAAU,GAAG,GAAG,CAAC,CAAC;YAC1D,gCAAgC;YAChC,sDAAsD;YACtD,IAAI;YACJ,uBAAa,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;YAC5D,KAAI,CAAC,aAAa,CAAC,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC;YACnD,IAAI,IAAI,GAAG,cAAc,GAAG,UAAU,GAAG,GAAG,GAAG,GAAG,CAAC;YACnD,KAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC;QAC7B,CAAC,CAAC;QACF,gCAAgC;QAChC,8CAA8C;QAC9C,uBAAa,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;QACxD,IAAI;QACJ,IAAI,SAAS,GAAoB,uBAAU,CAAC,UAAU,CAAC,CAAC,CAAC,sBAAY,CAAC,CAAC,CAAC,mBAAS,CAAC;QAClF,qBAAS,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE;YAEzC,gCAAgC;YAChC,4CAA4C;YAC5C,yCAAyC;YACzC,uBAAa,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;YACtD,uBAAa,CAAC,WAAW,EAAE,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;YACnD,IAAI;YACJ,KAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,CAAC,EAAE,UAAU,CAAC,CAAC;IACnB,CAAC;IArCgB,mBAAS,GAAG,WAAW,CAAC;IAGzC;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;kDACkB;IAE3C;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;oDACoB;IAEvC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACiB;IAT1B,SAAS;QADrB,OAAO;OACK,SAAS,CAwCrB;IAAD,gBAAC;CAxCD,AAwCC,CAxC8B,eAAM,GAwCpC;AAxCY,8BAAS","file":"","sourceRoot":"../../../../../../assets/scripts/UI/panel","sourcesContent":["import { BaseUI, UIClass } from \"../BaseUI\";\nimport { ConstValue } from \"../../Data/ConstValue\";\nimport TeacherPanel from \"./TeacherPanel\";\nimport GamePanel from \"./GamePanel\";\nimport { UIManager } from \"../../Manager/UIManager\";\nimport { NetWork } from \"../../Http/NetWork\";\nimport DataReporting from \"../../Data/DataReporting\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport class LoadingUI extends BaseUI {\n\n    protected static className = \"LoadingUI\";\n\n    @property(cc.ProgressBar)\n    private progressBar: cc.ProgressBar = null;\n    @property(cc.Label)\n    private progressLabel: cc.Label = null;\n    @property(cc.Node)\n    private dragonNode: cc.Node = null;\n\n    onLoad() {\n        NetWork.getInstance().GetRequest();\n        let onProgress = (completedCount: number, totalCount: number, item: any) => {\n            this.progressBar.progress = completedCount / totalCount;\n            let value = Math.round(completedCount / totalCount * 100);\n            // if (ConstValue.IS_EDITIONS) {\n            //     courseware.page.sendToParent('loading', value);\n            // }\n            DataReporting.getInstance().dispatchEvent('loading', value);\n            this.progressLabel.string = value.toString() + '%';\n            let posX = completedCount / totalCount * 609 - 304;\n            this.dragonNode.x = posX;\n        };\n        // if (ConstValue.IS_EDITIONS) {\n        // courseware.page.sendToParent('load start');\n        DataReporting.getInstance().dispatchEvent('load start');\n        // }\n        let openPanel: UIClass<BaseUI> = ConstValue.IS_TEACHER ? TeacherPanel : GamePanel;\n        UIManager.getInstance().openUI(openPanel, 0, () => {\n\n            // if (ConstValue.IS_EDITIONS) {\n            // courseware.page.sendToParent('load end');\n            // courseware.page.sendToParent('start');\n            DataReporting.getInstance().dispatchEvent('load end');\n            DataReporting.getInstance().dispatchEvent('start');\n            // }\n            this.node.active = false;\n        }, onProgress);\n    }\n}"]}