{"version":3,"sources":["../../../../../../assets/scripts/UI/panel/assets/scripts/UI/panel/LoadingUI.ts"],"names":[],"mappings":";;;;;AAAA,oCAA4C;AAC5C,oDAAmD;AACnD,+CAA0C;AAC1C,yCAAoC;AACpC,qDAAoD;AAEpD,8CAA6C;AAEvC,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAA+B,6BAAM;IADrC;QAAA,qEAqCC;QA/BW,iBAAW,GAAmB,IAAI,CAAC;QAEnC,mBAAa,GAAa,IAAI,CAAC;QAE/B,gBAAU,GAAY,IAAI,CAAC;;IA2BvC,CAAC;IAzBG,0BAAM,GAAN;QAAA,iBAwBC;QAvBG,iBAAO,CAAC,WAAW,EAAE,CAAC,UAAU,EAAE,CAAC;QACnC,IAAI,UAAU,GAAG,UAAC,cAAsB,EAAE,UAAkB,EAAE,IAAS;YACnE,KAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,cAAc,GAAG,UAAU,CAAC;YACxD,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,UAAU,GAAG,GAAG,CAAC,CAAC;YAC1D,IAAI,uBAAU,CAAC,WAAW,EAAE;gBACxB,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;aAClD;YACD,KAAI,CAAC,aAAa,CAAC,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC;YACnD,IAAI,IAAI,GAAG,cAAc,GAAG,UAAU,GAAG,GAAG,GAAG,GAAG,CAAC;YACnD,KAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC;QAC7B,CAAC,CAAC;QACF,IAAI,uBAAU,CAAC,WAAW,EAAE;YACxB,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;SAC9C;QACD,IAAI,SAAS,GAAoB,uBAAU,CAAC,UAAU,CAAC,CAAC,CAAC,sBAAY,CAAC,CAAC,CAAC,mBAAS,CAAC;QAClF,qBAAS,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE;YAEzC,IAAI,uBAAU,CAAC,WAAW,EAAE;gBACxB,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;gBACzC,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;aACzC;YACD,KAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,CAAC,EAAE,UAAU,CAAC,CAAC;IACnB,CAAC;IAjCgB,mBAAS,GAAG,WAAW,CAAC;IAGzC;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;kDACkB;IAE3C;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;oDACoB;IAEvC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACiB;IAT1B,SAAS;QADrB,OAAO;OACK,SAAS,CAoCrB;IAAD,gBAAC;CApCD,AAoCC,CApC8B,eAAM,GAoCpC;AApCY,8BAAS","file":"","sourceRoot":"../../../../../../assets/scripts/UI/panel","sourcesContent":["import { BaseUI, UIClass } from \"../BaseUI\";\nimport { ConstValue } from \"../../Data/ConstValue\";\nimport TeacherPanel from \"./TeacherPanel\";\nimport GamePanel from \"./GamePanel\";\nimport { UIManager } from \"../../Manager/UIManager\";\nimport { UIHelp } from \"../../Utils/UIHelp\";\nimport { NetWork } from \"../../Http/NetWork\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport class LoadingUI extends BaseUI {\n\n    protected static className = \"LoadingUI\";\n\n    @property(cc.ProgressBar)\n    private progressBar: cc.ProgressBar = null;\n    @property(cc.Label)\n    private progressLabel: cc.Label = null;\n    @property(cc.Node)\n    private dragonNode: cc.Node = null;\n\n    onLoad() {\n        NetWork.getInstance().GetRequest();\n        let onProgress = (completedCount: number, totalCount: number, item: any) => {\n            this.progressBar.progress = completedCount / totalCount;\n            let value = Math.round(completedCount / totalCount * 100);\n            if (ConstValue.IS_EDITIONS) {\n                courseware.page.sendToParent('loading', value);\n            }\n            this.progressLabel.string = value.toString() + '%';\n            let posX = completedCount / totalCount * 609 - 304;\n            this.dragonNode.x = posX;\n        };\n        if (ConstValue.IS_EDITIONS) {\n            courseware.page.sendToParent('load start');\n        }\n        let openPanel: UIClass<BaseUI> = ConstValue.IS_TEACHER ? TeacherPanel : GamePanel;\n        UIManager.getInstance().openUI(openPanel, 0, () => {\n\n            if (ConstValue.IS_EDITIONS) {\n                courseware.page.sendToParent('load end');\n                courseware.page.sendToParent('start');\n            }\n            this.node.active = false;\n        }, onProgress);\n    }\n}"]}