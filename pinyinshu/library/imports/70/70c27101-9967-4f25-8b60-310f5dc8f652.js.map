{"version":3,"sources":["../../../../../../assets/scripts/UI/panel/assets/scripts/UI/panel/TeacherPanel.ts"],"names":[],"mappings":";;;;;AAAA,oCAA4C;AAC5C,qDAAoD;AAEpD,8CAA6C;AAE7C,gDAA6C;AAE7C,yCAAoC;AACpC,iEAA8D;AAC9D,wDAAqD;AAC/C,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAA0C,gCAAM;IADhD;QAAA,qEAwKC;QAnKG,wBAAkB,GAAgB,IAAI,CAAC;QAEvC,iBAAW,GAAa,IAAI,CAAC;QAE7B,qBAAe,GAAe,IAAI,CAAC;QAEnC,aAAO,GAAa,IAAI,CAAC;QAEzB,cAAQ,GAAe,IAAI,CAAC;QAC5B,gBAAU,GAAoB,KAAK,EAAW,CAAC;;IA0JnD,CAAC;IAzJG,6BAAM,GAAN;QACI,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,IAAI,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IAED,4BAAK,GAAL;IAEA,CAAC;IAED,6BAAM,GAAN;IAEA,CAAC;IAED,+BAAQ,GAAR;QACI,IAAG,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE;YACtC,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,MAAM,CAAC,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,CAAC;YAC/E,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;SACnC;QAED,EAAE,CAAC,GAAG,CAAC,qBAAqB,EAAC,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,CAAC;IACxE,CAAC;IAED,+BAAQ,GAAR,UAAS,SAAkB;QACvB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,SAAS,CAAC;QAC/E,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,UAAS,CAAC;YAC9E,CAAC,CAAC,eAAe,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,+BAAQ,GAAR;QACI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,6BAAM,GAAN;QACI,EAAE,CAAC,GAAG,CAAC,gBAAgB,EAAE,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE,mBAAQ,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC;QAClG,IAAG,IAAI,CAAC,aAAa,EAAE,EAAE;YACrB,qBAAS,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,mBAAS,EAAE;gBACtC,iCAAe,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,2BAAY,CAAC,oBAAoB,EAAE,EAAC,KAAK,EAAE,CAAC,EAAC,CAAC,CAAC;YAC7F,CAAC,CAAC,CAAC;SACN;IACD,CAAC;IAED,2CAAoB,GAApB,UAAqB,MAAM;QACvB,IAAI,IAAI,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC;QAC1C,QAAO,IAAI,EAAC;YACR,KAAK,GAAG;gBACJ,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,GAAG,CAAC,CAAC;gBAC1C,MAAM;YACV,KAAK,GAAG;gBACJ,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,GAAG,CAAC,CAAC;gBAC1C,MAAM;YACV,KAAK,GAAG;gBACJ,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,GAAG,CAAC,CAAC;gBAC1C,MAAM;YACV,KAAK,GAAG;gBACJ,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,GAAG,CAAC,CAAC;gBAC1C,MAAM;YACV;gBACG,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,EAAE,CAAC;gBACpC,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,GAAG,CAAC,CAAC;gBAC7C,MAAK;SACR;QACD,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC5C,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;SAChC;QACD,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,EAAE,CAAC,GAAG,CAAC,wBAAwB,EAAE,mBAAQ,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC;gCAC3D,CAAC;YACL,IAAI,OAAO,GAAG,EAAE,CAAC,WAAW,CAAC,OAAK,QAAQ,CAAC,CAAC;YAC5C,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;YACd,OAAK,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAC9B,OAAO,CAAC,MAAM,GAAG,OAAK,WAAW,CAAC;YAClC,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;YACnF,OAAO,CAAC,EAAE,CAAC,mBAAmB,EAAE,UAAS,MAAM;gBAC3C,IAAG,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;oBAClH,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,EAAE,CAAC;oBAC7C,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;oBAC5B,OAAO,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;oBAC1D,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC;iBACvD;qBAAK,IAAG,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,IAAI,EAAE,EAAE;oBACpD,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;iBAC9B;qBAAK;oBACF,mBAAQ,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC;oBACxF,EAAE,CAAC,GAAG,CAAC,mBAAQ,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC;iBAC5C;YACL,CAAC,CAAC,IAAI,QAAM,CAAC,CAAC;YACd,IAAG,mBAAQ,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;gBACpC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,GAAG,mBAAQ,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;aAC5F;QACL,CAAC;;QAtBD,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE;oBAAxD,CAAC;SAsBR;IACL,CAAC;IAED,oCAAa,GAAb;QACI,IAAI,SAAS,GAAG,CAAC,CAAC;QAClB,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,EAAE;YAC9D,IAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,MAAM,IAAI,EAAE,EAAE;gBACzD,EAAE,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;gBAC3B,SAAS,EAAG,CAAC;aAChB;SACJ;QACD,IAAG,SAAS,GAAG,CAAC,EAAE;YACd,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAC3B,OAAO,KAAK,CAAC;SAChB;QACD,IAAG,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,IAAI,CAAC,EAAE;YAC3C,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;YACjC,OAAO,KAAK,CAAC;SAChB;aAAK,IAAG,mBAAQ,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,MAAM,GAAI,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,EAAE;YACvF,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;YAC/B,OAAO,KAAK,CAAC;SAChB;aAAK;YACF,OAAO,IAAI,CAAC;SACf;IAEL,CAAC;IAED,6BAAM,GAAN;QACI,iBAAO,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,iBAAO,CAAC,SAAS,GAAG,YAAY,GAAG,iBAAO,CAAC,QAAQ,EAAE,KAAK,EAAE,gCAAgC,EAAE,UAAU,GAAG,EAAE,QAAQ;YACnJ,IAAI,CAAC,GAAG,EAAE;gBACN,IAAI,aAAa,GAAG,QAAQ,CAAC;gBAC7B,IAAI,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE;oBAEnC,OAAO;iBACV;gBACD,EAAE,CAAC,GAAG,CAAC,mBAAmB,EAAC,aAAa,CAAC,CAAC;gBAC1C,IAAG,aAAa,CAAC,IAAI,CAAC,kBAAkB,IAAI,IAAI,EAAE;iBAEjD;qBAAK;oBACF,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;oBAChE,IAAI,iBAAO,CAAC,KAAK,EAAE,EAAC,mCAAmC;wBACnD,IAAI,CAAC,QAAQ,EAAE,CAAC;qBACnB;yBAAM;wBACH,IAAI,OAAO,IAAI,IAAI,EAAE;4BAEjB,IAAG,OAAO,CAAC,SAAS,EAAE;gCAClB,mBAAQ,CAAC,WAAW,EAAE,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;6BACzD;4BACD,IAAG,OAAO,CAAC,cAAc,EAAE;gCACtB,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;6BACnE;4BACD,EAAE,CAAC,GAAG,CAAC,UAAU,EAAC,OAAO,CAAC,CAAC;4BAC3B,EAAE,CAAC,GAAG,CAAC,oBAAoB,EAAE,mBAAQ,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,CAAC;4BAC/D,EAAE,CAAC,GAAG,CAAC,6BAA6B,EAAE,mBAAQ,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,CAAC;4BAC7E,IAAI,CAAC,QAAQ,EAAE,CAAC;yBAClB;6BAAM;yBAEN;qBACJ;iBACJ;aACJ;QACL,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;IACxB,CAAC;IArKgB,sBAAS,GAAG,cAAc,CAAC;IAG5C;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;4DACkB;IAEvC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDACW;IAE7B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yDACe;IAEnC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACO;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;kDACQ;IAZX,YAAY;QADhC,OAAO;OACa,YAAY,CAuKhC;IAAD,mBAAC;CAvKD,AAuKC,CAvKyC,eAAM,GAuK/C;kBAvKoB,YAAY","file":"","sourceRoot":"../../../../../../assets/scripts/UI/panel","sourcesContent":["import { BaseUI, UIClass } from \"../BaseUI\";\nimport { UIManager } from \"../../Manager/UIManager\";\nimport SubmissionPanel from \"./SubmissionPanel\";\nimport { NetWork } from \"../../Http/NetWork\";\nimport { LogWrap } from \"../../Utils/LogWrap\";\nimport {DaAnData} from \"../../Data/DaAnData\";\nimport { ConstValue } from \"../../Data/ConstValue\";\nimport GamePanel from \"./GamePanel\";\nimport {ListenerManager} from \"../../Manager/ListenerManager\";\nimport {ListenerType} from \"../../Data/ListenerType\";\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class TeacherPanel extends BaseUI {\n    protected static className = \"TeacherPanel\";\n\n    @property(cc.EditBox)\n    checkpointsEditBox : cc.EditBox = null;\n    @property(cc.Node)\n    editBoxNode : cc.Node = null;\n    @property(cc.Button)\n    submissonButton : cc.Button = null;\n    @property(cc.Node)\n    tipNode : cc.Node = null;\n    @property(cc.Prefab)\n    editbox2 : cc.Prefab = null;\n    editboxArr : Array<cc.Node> = Array<cc.Node>();\n    onLoad () {\n        this.getNet();\n        this.initData();\n    }\n\n    start() {\n        \n    }\n\n    update() {\n\n    }\n\n    initData() {\n        if(DaAnData.getInstance().checkpointsNum) {\n            this.checkpointsEditBox.string = String(DaAnData.getInstance().checkpointsNum);\n            this.checkpointEditingEnd(null);\n        }\n       \n        cc.log('checkpointsnum is =',DaAnData.getInstance().checkpointsNum);\n    }\n\n    ShowTips(tipString : string) {\n        this.tipNode.active = true;\n        this.tipNode.getChildByName(\"label\").getComponent(cc.Label).string = tipString;\n        this.tipNode.getChildByName(\"layout\").on(cc.Node.EventType.TOUCH_START, function(e) {\n            e.stopPropagation();\n        });\n    }\n\n    closeTip() {\n        this.tipNode.active = false;\n    }\n\n    button() {\n        cc.log(\"checkpoint num\", DaAnData.getInstance().checkpointsNum, DaAnData.getInstance().numberArr);\n        if(this.errorChecking()) {\n            UIManager.getInstance().showUI(GamePanel, () => {\n                ListenerManager.getInstance().trigger(ListenerType.OnEditStateSwitching, {state: 1}); \n        });\n    }\n    }\n\n    checkpointEditingEnd(sender) {\n        var text = this.checkpointsEditBox.string;\n        switch(text){\n            case \"1\":\n                DaAnData.getInstance().checkpointsNum = 1;\n                break;\n            case \"2\":\n                DaAnData.getInstance().checkpointsNum = 2;\n                break;\n            case \"3\":\n                DaAnData.getInstance().checkpointsNum = 3;\n                break;\n            case \"4\":\n                DaAnData.getInstance().checkpointsNum = 4;\n                break;\n            default:\n               this.checkpointsEditBox.string = '';\n               DaAnData.getInstance().checkpointsNum = 0;\n            break\n        }\n        for(let i = 0; i < this.editboxArr.length; i++) {\n            this.editboxArr[i].destroy();\n        }\n        this.editboxArr = [];\n        cc.log('=========numberarr is ', DaAnData.getInstance().numberArr);\n        for(let i = 0; i < parseInt(this.checkpointsEditBox.string); i++) {\n            let editbox = cc.instantiate(this.editbox2);\n            editbox.x = 0;\n            this.editboxArr.push(editbox);\n            editbox.parent = this.editBoxNode;\n            editbox.getChildByName('label').getComponent(cc.Label).string = (i + 1).toString();\n            editbox.on('editing-did-ended', function(sender){\n                if(parseInt(editbox.getComponent(cc.EditBox).string) > 200 || parseInt(editbox.getComponent(cc.EditBox).string) <= 1) {\n                    editbox.getComponent(cc.EditBox).string = '';\n                    this.ShowTips('请输入正确的数字喔！');\n                    editbox.getChildByName('PLACEHOLDER_LABEL').active = true;\n                    cc.log(editbox.getChildByName('PLACEHOLDER_LABEL'));\n                }else if(editbox.getComponent(cc.EditBox).string == '') {\n                    this.ShowTips('还没有输入数字啦～');\n                }else {\n                    DaAnData.getInstance().numberArr[i] = parseInt(editbox.getComponent(cc.EditBox).string);\n                    cc.log(DaAnData.getInstance().numberArr);\n                }\n            }.bind(this));\n            if(DaAnData.getInstance().numberArr[i]) {\n                editbox.getComponent(cc.EditBox).string = DaAnData.getInstance().numberArr[i].toString();\n            }\n        }\n    }\n\n    errorChecking():boolean {\n        var repeatNum = 0;\n        for(let i = 0; i < parseInt(this.checkpointsEditBox.string); i++) {\n            if(this.editboxArr[i].getComponent(cc.EditBox).string == '') {\n                cc.log('edit box is null');\n                repeatNum ++;\n            }\n        }\n        if(repeatNum > 0) {\n            this.ShowTips('还没有输入数字啦～');\n            return false;\n        }\n        if(DaAnData.getInstance().checkpointsNum == 0) {\n            this.ShowTips(\"关卡数不能为空，请输入关卡数。\");\n            return false;\n        }else if(DaAnData.getInstance().numberArr.length <  DaAnData.getInstance().checkpointsNum) {\n            this.ShowTips(\"被分解质因数的数不能为空。\");\n            return false;\n        }else {\n            return true;\n        }\n\n    }\n    \n    getNet() {\n        NetWork.getInstance().httpRequest(NetWork.GET_TITLE + \"?title_id=\" + NetWork.title_id, \"GET\", \"application/json;charset=utf-8\", function (err, response) {\n            if (!err) {\n                let response_data = response;\n                if (Array.isArray(response_data.data)) {\n                \n                    return;\n                }\n                cc.log('response_data is ',response_data);\n                if(response_data.data.courseware_content == null) {\n\n                }else {\n                    let content = JSON.parse(response_data.data.courseware_content);\n                    if (NetWork.empty) {//如果URL里面带了empty参数 并且为true  就立刻清除数据\n                        this.ClearNet();\n                    } else {\n                        if (content != null) {\n                            \n                            if(content.numberArr) {\n                                DaAnData.getInstance().numberArr = content.numberArr;\n                           }\n                           if(content.checkpointsNum) {\n                                DaAnData.getInstance().checkpointsNum = content.checkpointsNum;\n                           }\n                           cc.log('data is ',content);\n                           cc.log(\"---------number is\", DaAnData.getInstance().numberArr);\n                           cc.log(\"---------checkpointsNum is \", DaAnData.getInstance().checkpointsNum);\n                           this.initData();\n                        } else {\n                           \n                        }\n                    }\n                } \n            }      \n        }.bind(this), null);\n    }\n}\n"]}