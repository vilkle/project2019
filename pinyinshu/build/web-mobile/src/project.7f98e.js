window.__require=function e(t,n,o){function i(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({AdaptiveScreen:[function(e,t,n){"use strict";cc._RF.push(t,"ba00bud/zlDiY6tClWPdHIa","AdaptiveScreen"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgNode=null,t.viewWidth=960,t.viewHeight=1994,t}return __extends(t,e),t.prototype.onLoad=function(){this.screenAdapter()},t.prototype.start=function(){this.viewUp()},t.prototype.screenAdapter=function(){if(cc.Canvas.instance){this.stage=cc.Canvas.instance.node;var e=cc.Canvas.instance,t=cc.view.getFrameSize();t.width/t.height<e.designResolution.width/e.designResolution.height?(e.fitWidth=!0,e.fitHeight=!1):(e.fitHeight=!0,e.fitWidth=!1)}},t.prototype.viewUp=function(){var e=cc.winSize,t=e.width/this.viewWidth,n=e.height/this.viewHeight;this.bgNode.scale=1*Math.max(t,n)},__decorate([a({type:cc.Node,tooltip:"\u5168\u5c4f\u80cc\u666f\u56fe\u7247\uff0c\u7528\u4e8e\u81ea\u9002\u5e94"})],t.prototype,"bgNode",void 0),__decorate([a],t.prototype,"viewWidth",void 0),__decorate([a],t.prototype,"viewHeight",void 0),t=__decorate([i],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],AnswerItem:[function(e,t,n){"use strict";cc._RF.push(t,"4ba05Fi/cNBMZrV3KLSva50","AnswerItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),i=e("../../Data/ListenerType"),a=e("../../Manager/ListenerManager"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.jiaBtn=null,t.jieBtn=null,t.btnNode=null,t.textString="",t.lastString="",t.index=0,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.onJiaBtnClick=function(){a.ListenerManager.getInstance().trigger(i.ListenerType.OnDaAnZengJia,{index:this.index})},t.prototype.onJieBtnClick=function(){a.ListenerManager.getInstance().trigger(i.ListenerType.OnDaAnShanChu,{index:this.index,node:this.node})},t.prototype.setBtn=function(e){this.jiaBtn.interactable=!0,this.jieBtn.interactable=!0,this.btnNode.active=!0,1==e?this.jiaBtn.interactable=!1:2==e?this.jieBtn.interactable=!1:0==e&&(this.btnNode.active=!1)},t.prototype.editingEnded=function(e){this.textString=this.label.string,a.ListenerManager.getInstance().trigger(i.ListenerType.OnEndOfInput,{text:this.textString,index:this.index})},t.prototype.setText=function(e){this.label.string=e},t.prototype.onDestroy=function(){},t.className="AnswerItem",__decorate([c(cc.EditBox)],t.prototype,"label",void 0),__decorate([c(cc.Button)],t.prototype,"jiaBtn",void 0),__decorate([c(cc.Button)],t.prototype,"jieBtn",void 0),__decorate([c(cc.Node)],t.prototype,"btnNode",void 0),t=__decorate([s],t)}(o.BaseUI);n.default=l,cc._RF.pop()},{"../../Data/ListenerType":"ListenerType","../../Manager/ListenerManager":"ListenerManager","../BaseUI":"BaseUI"}],AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"16d7aVnmU1PQrpFj9P1Fxvb","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Data/ConstValue"),i=function(){function e(){this.bgm=""}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.playSound=function(e,t,n){var i=o.ConstValue.AUDIO_DIR+e;cc.loader.loadRes(i,cc.AudioClip,function(e,o){if(e)cc.error(e);else cc.audioEngine.play(o,t||!1,n||1)})},e.prototype.stopAll=function(){cc.audioEngine.stopAll()},e.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},e.prototype.resumeAll=function(){cc.audioEngine.resumeAll()},e.prototype.playBGM=function(e){if(this.bgm!=e){this.bgm=e,cc.audioEngine.stopMusic();var t=o.ConstValue.AUDIO_DIR+e;cc.loader.loadRes(t,cc.AudioClip,function(e,t){e?cc.error(e):cc.audioEngine.playMusic(t,!0)})}},e.prototype.resumeBGM=function(){cc.audioEngine.stopMusic();var e=o.ConstValue.AUDIO_DIR+this.bgm;cc.loader.loadRes(e,cc.AudioClip,function(e,t){e?cc.error(e):cc.audioEngine.playMusic(t,!0)})},e.instance=null,e}();n.AudioManager=i,cc._RF.pop()},{"../Data/ConstValue":"ConstValue"}],BaseConfigContainer:[function(e,t,n){"use strict";cc._RF.push(t,"a9280QRTmRIUqfgpuhZqA92","BaseConfigContainer"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e.prototype,"tag",{get:function(){return this.mTag},set:function(e){this.mTag=e},enumerable:!0,configurable:!0}),e}();n.BaseConfigContainer=o,cc._RF.pop()},{}],BaseUI:[function(e,t,n){"use strict";cc._RF.push(t,"c6da4j3MGhPfIxwls9tY6iS","BaseUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Data/ConstValue"),i=e("../Manager/ListenerManager"),a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"tag",{get:function(){return this.mTag},set:function(e){this.mTag=e},enumerable:!0,configurable:!0}),t.getUrl=function(){return cc.log(this.className),o.ConstValue.PREFAB_UI_DIR+this.className},t.prototype.onDestroy=function(){i.ListenerManager.getInstance().removeAll(this)},t.prototype.onShow=function(){cc.log("BaseUI onShow")},t.className="BaseUI",t=__decorate([r],t)}(cc.Component));n.BaseUI=s,cc._RF.pop()},{"../Data/ConstValue":"ConstValue","../Manager/ListenerManager":"ListenerManager"}],ConstValue:[function(e,t,n){"use strict";cc._RF.push(t,"66b51obcd1Mi4dcboc3fwIs","ConstValue"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.IS_EDITIONS=!1,e.IS_TEACHER=!1,e.CONFIG_FILE_DIR="config/",e.PREFAB_UI_DIR="prefab/ui/panel/",e.AUDIO_DIR="audio/",e}();n.ConstValue=o,cc._RF.pop()},{}],DaAnData:[function(e,t,n){"use strict";cc._RF.push(t,"2f1ec1bM8JGb4L5TI7iWW47","DaAnData"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.ballb_01=1]="ballb_01",e[e.ballb_02=2]="ballb_02",e[e.ballb_03=3]="ballb_03",e[e.ballb_04=5]="ballb_04",e[e.ballb_05=7]="ballb_05",e[e.ballb_06=11]="ballb_06",e[e.ballb_07=13]="ballb_07",e[e.ballb_08=8]="ballb_08",e[e.ballb_09=9]="ballb_09"}(n.skinStrEnum||(n.skinStrEnum={}));var o=function(){function e(){this.checkpointsNum=0,this.numberArr=new Array}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();n.DaAnData=o,cc._RF.pop()},{}],FadeUIPlugin:[function(e,t,n){"use strict";cc._RF.push(t,"2fe78Vyt/NInb1oC42+tpUk","FadeUIPlugin"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delay=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=cc.delayTime(this.delay),t=cc.scaleTo(.5,2,2),n=cc.scaleTo(.5,0,0),o=cc.scaleTo(.5,1,1),i=cc.sequence(e,t,n,o);this.node.runAction(i)},__decorate([a],t.prototype,"delay",void 0),t=__decorate([i],t)}(cc.Component);n.FadeUIPlugin=r,cc._RF.pop()},{}],GameData:[function(e,t,n){"use strict";cc._RF.push(t,"65c35Ym/oRKD6h93ZiyEFOw","GameData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();n.GameData=o,cc._RF.pop()},{}],GameMain:[function(e,t,n){"use strict";cc._RF.push(t,"df13ad6CdtFhp9uucAXsIC/","GameMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Http/NetWork"),i=cc._decorator,a=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=document.getElementById("loading-full");e&&(e.style.display="none")},t.prototype.start=function(){var e=new Object;e=o.NetWork.getInstance().GetRequest(),o.NetWork.courseware_id=e.id,o.NetWork.title_id=e.title_id,o.NetWork.user_id=e.user_id},t.prototype.update=function(e){},t=__decorate([a],t)}(cc.Component));n.GameMain=r,cc._RF.pop()},{"../Http/NetWork":"NetWork"}],GamePanel:[function(e,t,n){"use strict";cc._RF.push(t,"246c2OOkGlKHoa6ZJOVEHI+","GamePanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),i=e("../../Data/DaAnData"),a=e("../../Utils/UIHelp"),r=e("../../Http/NetWork"),s=e("../../Data/ConstValue"),c=e("../../Manager/UIManager"),l=e("./SubmissionPanel"),u=e("../../UI/Item/OverTips"),p=e("../../Manager/ListenerManager"),h=e("../../Data/ListenerType"),d=cc._decorator,g=d.ccclass,b=d.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.back=null,t.submit=null,t.queren=null,t.chongzhi=null,t.tijiao=null,t.minutes=null,t.second=null,t.minuteHand=null,t.secondHand=null,t.numberStr=null,t.bubble_none1=null,t.bubble_none2=null,t.bubble_1=null,t.bubble_2=null,t.bubble=null,t.bullet=null,t.gunNode=null,t.miya=null,t.mask=null,t.numberNode=null,t.signNode=null,t.font=null,t.ballNodeP=null,t.decomposeArr=Array(),t.answerArr=Array(),t.labelArr=Array(),t.progressArr=Array(),t.li=Array(),t.an=Array(),t.pl=Array(),t.updateNode=Array(),t.timer=null,t.decoposeNum=null,t.intervalIndex=null,t.minStr=null,t.secStr=null,t.checkpointsNum=null,t.checkpoint=null,t.cueNum=0,t}var n;return __extends(t,e),n=t,t.prototype.onLoad=function(){this.isTecher()},t.prototype.start=function(){},t.prototype.onDestroy=function(){},t.prototype.update=function(e){for(var t=0;t<this.updateNode.length;t++){var n=this.updateNode[t].getChildByName("spine").getComponent(sp.Skeleton).findBone("bubble_11").scaleX,o=this.updateNode[t].getChildByName("spine").getComponent(sp.Skeleton).findBone("bubble_11").scaleY;this.updateNode[t].getChildByName("label").setScale(cc.v2(n,o))}if(this.pl.length<=1)1==this.tijiao.interactable&&(this.tijiao.interactable=!1),1==this.chongzhi.interactable&&(this.chongzhi.interactable=!1);else{if(this.checkpoint>=this.checkpointsNum+1)return;0==this.tijiao.interactable&&0==this.cueNum&&(this.tijiao.interactable=!0),0==this.chongzhi.interactable&&(this.chongzhi.interactable=!0)}this.cueNum>0&&1==this.tijiao.interactable&&(this.tijiao.interactable=!1)},t.prototype.isTecher=function(){s.ConstValue.IS_TEACHER?(this.submit.node.active=!1,this.back.node.active=!0,this.initData()):(this.submit.node.active=!1,this.back.node.active=!1,this.getNet())},t.prototype.initData=function(){cc.log("---------------------initdata"),this.timer=0,this.checkpoint=1,this.decoposeNum=i.DaAnData.getInstance().numberArr[this.checkpoint-1],this.checkpointsNum=i.DaAnData.getInstance().checkpointsNum,this.defaultValue(),this.initProgress(this.checkpointsNum),this.updateNode.push(this.bubble_1),this.updateNode.push(this.bubble_2),this.updateNode.push(this.gunNode.getChildByName("ballNode")),this.mask.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()}.bind(this)),this.mask.active=!1,this.openClock(),this.decompose(this.decoposeNum),this.answer(this.decoposeNum),this.createDecomposeBall()},t.prototype.initProgress=function(e){1!=this.checkpointsNum&&cc.loader.loadRes("prefab/ui/Item/progressNode",function(t,n){if(!t){for(var o=0;o<e;o++){var i=cc.instantiate(n);this.progressArr[o]=i;var a=350-200*o;i.setPosition(cc.v2(-900,a)),i.parent=this.node,i.getChildByName("ball").getChildByName("label").getComponent(cc.Label).string=(o+1).toString(),i.getChildByName("bubble").getChildByName("label").getComponent(cc.Label).string=(o+1).toString(),i.getChildByName("whiteball").getChildByName("label").getComponent(cc.Label).string=(o+1).toString(),o==e-1&&(i.getChildByName("line").active=!1,i.getChildByName("lineup").active=!1)}this.setprogress(this.checkpoint)}}.bind(this))},t.prototype.setprogress=function(e){for(var t=0;t<this.progressArr.length;t++)t<e-1?(this.progressArr[t].getChildByName("bubble").active=!0,this.progressArr.length>1&&(this.progressArr[t].getChildByName("lineup").active=!0)):t==e-1?(this.progressArr[t].getChildByName("bubble").active=!0,this.progressArr[t].getChildByName("whiteball").active=!0):(this.progressArr[t].getChildByName("bubble").active=!1,this.progressArr[t].getChildByName("whiteball").active=!1)},t.prototype.defaultValue=function(){var e=this.gunNode.getChildByName("ballNode");e.opacity=255,e.getChildByName("spine").getComponent(sp.Skeleton).setSkin(i.skinStrEnum[1]),e.getChildByName("label").getComponent(cc.Label).string="1",e.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"idle",!0),this.shoot()},t.prototype.createBall=function(e,t,n,o,i){var a=cc.instantiate(this.ballNodeP);a.getChildByName("label").getComponent(cc.Label).string=String(e);var r=a.getChildByName("spine").getComponent(sp.Skeleton);if(r.setAnimation(0,"idle",!0),a.parent=o,r.setSkin(this.skinString(e)),i)a.x=t,a.y=n,a.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_in",!1),this.answerArr.push(a),cc.log("push a answer ball",a),this.updateNode.push(a),this.addListenerOnAnswerBall(a);else{if(a.y=0,t!=this.li.length-1){var s=new cc.Node("label"),c=s.addComponent(cc.Label);c.string="*",c.font=this.font,c.fontSize=50,c.node.y=0,s.parent=o,this.labelArr.push(s)}this.decomposeArr.push(a),this.addListenerOnDecomposeBall(a)}},t.prototype.getNet=function(){r.NetWork.getInstance().httpRequest(r.NetWork.GET_QUESTION+"?courseware_id="+r.NetWork.courseware_id,"GET","application/json;charset=utf-8",function(e,t){if(!e){var n=JSON.parse(t);if(null==n.data.courseware_content);else{var o=JSON.parse(n.data.courseware_content);o.numberArr&&(i.DaAnData.getInstance().numberArr=o.numberArr),o.checkpointsNum&&(i.DaAnData.getInstance().checkpointsNum=o.checkpointsNum),cc.log("---------------------initdata"),this.initData()}}}.bind(this),null)},t.prototype.answer=function(e){for(var t=1;t<=e;t++)e%t==0&&this.an.push(t);cc.log(this.an)},t.prototype.decompose=function(e){for(var t=e,n=1;n<t;)for(n+=1;t%n==0;)t/=n,this.li.push(n);1==e&&this.li.push(1);var o=String(e)+"  =  ";this.numberStr.getComponent(cc.Label).string=o;for(var i=1,a=0;a<this.li.length;a++){if(this.li[a]!=this.li[a+1]&&this.li[a]!=this.li[a-1])i=1,(s=(r=new cc.Node).addComponent(cc.Label)).font=this.font,s.fontSize=50,r.parent=this.numberNode,r.y=10,this.labelArr.push(r),a<this.li.length-1?s.string=String(this.li[a])+"  *  ":s.string=String(this.li[a])+"  =  ";else if(i++,this.li[a+1]!=this.li[a+2]&&this.li[a]==this.li[a+1]){var r,s,c=new cc.Node,l=c.addComponent(cc.Label);l.font=this.font,l.fontSize=50,l.string=this.li[a].toString(),c.parent=this.numberNode,c.y=10,this.labelArr.push(c),(s=(r=new cc.Node).addComponent(cc.Label)).string=i.toString(),s.font=this.font,s.fontSize=30,r.parent=this.numberNode,r.y=40,this.labelArr.push(r);var u=new cc.Node,p=u.addComponent(cc.Label);p.font=this.font,p.fontSize=50,this.labelArr.push(u),this.li[a+2]?p.string="  *  ":p.string="  =  ",u.parent=this.numberNode,u.y=10}}cc.log("li is ",this.li),cc.log("numberStr is :",this.numberStr.getComponent(cc.Label).string)},t.prototype.createDecomposeBall=function(){var e=this.numberStr.node.getContentSize().width+100;cc.log("numberstr width is ",this.numberStr.node.getContentSize().width);for(var t=0;t<this.li.length;t++){cc.log(this.li[t]);0,cc.log(e),this.createBall(this.li[t],t,0,this.numberNode,!1)}},t.prototype.skinString=function(e){return i.skinStrEnum[e]&&8!=e&&9!=e?i.skinStrEnum[e]:1==e.toString().length?i.skinStrEnum[8]:2==e.toString().length||3==e.toString().length?i.skinStrEnum[9]:void 0},t.prototype.addListenerOnDecomposeBall=function(e){cc.log(e);var t=e.getChildByName("spine");t.on(cc.Node.EventType.TOUCH_START,function(t){var n=this.node.convertToNodeSpaceAR(t.currentTouch._point);this.bubble.x=n.x,this.bubble.y=n.y;var o=parseInt(e.getChildByName("label").getComponent(cc.Label).string),i=this.skinString(o);this.bubble.getChildByName("label").getComponent(cc.Label).string=o,this.bubble.opacity=255,this.bubble.getChildByName("spine").getComponent(sp.Skeleton).setSkin(i)}.bind(this),this),t.on(cc.Node.EventType.TOUCH_MOVE,function(e){var t=this.node.convertToNodeSpaceAR(e.currentTouch._point);this.bubble.x=t.x,this.bubble.y=t.y}.bind(this),this),t.on(cc.Node.EventType.TOUCH_END,function(){255==this.bubble.opacity&&(this.bubble.opacity=0)}.bind(this),this),t.on(cc.Node.EventType.TOUCH_CANCEL,function(t){var n=this;if(0==this.gunNode.rotation||255!=this.bubble.opacity){var o=parseInt(e.getChildByName("label").getComponent(cc.Label).string),i=this.skinString(o);if(this.bubble_none1.node.getBoundingBox().contains(this.node.convertToNodeSpaceAR(t.currentTouch._point))){if(this.gunNode.getChildByName("ballNode").opacity){var a=parseInt(this.gunNode.getChildByName("ballNode").getChildByName("label").getComponent(cc.Label).string);this.bubble_2.getChildByName("spine").getComponent(sp.Skeleton).setSkin(this.skinString(a)),this.bubble_2.getChildByName("label").getComponent(cc.Label).string=a.toString(),this.bubble_2.opacity=255,this.bubble_none2.node.opacity=0,this.bubble_2.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_in",!1);var r=this.gunNode.getChildByName("ballNode");r.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_out",!1),r.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(e){"ball_out"==e.animation.name&&(r.opacity=0)})}this.bubble_1.getChildByName("spine").getComponent(sp.Skeleton).setSkin(i),this.bubble_1.getChildByName("label").getComponent(cc.Label).string=this.bubble.getChildByName("label").getComponent(cc.Label).string,this.bubble_1.opacity=255,this.bubble_none1.node.opacity=0,this.bubble_1.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_in",!1),this.bubble_1.opacity&&this.bubble_2.opacity&&this.signNode.runAction(cc.sequence(cc.fadeIn(.1),cc.fadeOut(.2),cc.fadeIn(.1),cc.fadeOut(.2))),this.bubble_1.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(e){if("ball_in"==e.animation.name){if(n.bubble_1.opacity&&n.bubble_2.opacity){var t=n.bubble_1.getChildByName("spine").getComponent(sp.Skeleton),o=n.bubble_2.getChildByName("spine").getComponent(sp.Skeleton);t.addAnimation(0,"ball_out",!1),o.addAnimation(0,"ball_out",!1)}}else"ball_out"==e.animation.name&&n.bubble_1.opacity&&n.bubble_2.opacity&&(n.gunballIn(),n.bubble_1.opacity=0,n.bubble_2.opacity=0,n.bubble_none1.node.opacity=255,n.bubble_none2.node.opacity=255)})}else if(this.bubble_none2.node.getBoundingBox().contains(this.node.convertToNodeSpaceAR(t.currentTouch._point))){if(this.gunNode.getChildByName("ballNode").opacity){a=parseInt(this.gunNode.getChildByName("ballNode").getChildByName("label").getComponent(cc.Label).string);var s=this.gunNode.getChildByName("ballNode");this.bubble_1.getChildByName("spine").getComponent(sp.Skeleton).setSkin(this.skinString(a)),this.bubble_1.getChildByName("label").getComponent(cc.Label).string=a.toString(),this.bubble_1.opacity=255,this.bubble_none1.node.opacity=0,this.bubble_1.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_in",!1),s.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_out",!1),s.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(e){"ball_out"==e.animation.name&&(s.opacity=0)})}this.bubble_2.getChildByName("spine").getComponent(sp.Skeleton).setSkin(i),this.bubble_2.getChildByName("label").getComponent(cc.Label).string=this.bubble.getChildByName("label").getComponent(cc.Label).string,this.bubble_2.opacity=255,this.bubble_none2.node.opacity=0,this.bubble_2.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_in",!1),this.bubble_1.opacity&&this.bubble_2.opacity&&this.signNode.runAction(cc.sequence(cc.fadeIn(.1),cc.fadeOut(.2),cc.fadeIn(.1),cc.fadeOut(.2))),this.bubble_2.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(e){if("ball_in"==e.animation.name){if(n.bubble_1.opacity&&n.bubble_2.opacity){var t=n.bubble_1.getChildByName("spine").getComponent(sp.Skeleton),o=n.bubble_2.getChildByName("spine").getComponent(sp.Skeleton);t.addAnimation(0,"ball_out",!1),o.addAnimation(0,"ball_out",!1)}}else"ball_out"==e.animation.name&&n.bubble_1.opacity&&n.bubble_2.opacity&&(n.gunballIn(),n.bubble_1.opacity=0,n.bubble_2.opacity=0,n.bubble_none1.node.opacity=255,n.bubble_none2.node.opacity=255)})}255==this.bubble.opacity&&(this.bubble.opacity=0)}else this.bubble.opacity=0}.bind(this),this)},t.prototype.gunballIn=function(){var e=this.gunNode.getChildByName("ballNode");e.opacity=255;var t=parseInt(this.bubble_1.getChildByName("label").getComponent(cc.Label).string)*parseInt(this.bubble_2.getChildByName("label").getComponent(cc.Label).string);t>this.decoposeNum&&(t=this.decoposeNum),e.getChildByName("label").getComponent(cc.Label).string=t.toString(),e.getChildByName("spine").getComponent(sp.Skeleton).setSkin(this.skinString(t)),this.gunNode.getChildByName("gun").getComponent(sp.Skeleton).setAnimation(0,"in",!1),e.opacity&&e.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_in",!1)},t.prototype.addListenerOnAnswerBall=function(e){var t=e.getChildByName("spine");t.on(cc.Node.EventType.TOUCH_START,function(e){cc.log("miy pos is ",this.miya.getPosition()),cc.log("current pos is ",this.node.convertToNodeSpaceAR(e.currentTouch._point)),"kan"!=this.miya.getComponent(sp.Skeleton).animation&&this.miya.getComponent(sp.Skeleton).setAnimation(0,"kan",!1),"kan_idle"!=this.miya.getComponent(sp.Skeleton).animation&&this.miya.getComponent(sp.Skeleton).addAnimation(0,"kan_idle",!0)}.bind(this),this),t.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.setPosition(e.parent.convertToNodeSpaceAR(t.currentTouch._point));var n=this.node.convertToNodeSpaceAR(t.currentTouch._point),o=Math.sqrt(Math.pow(n.x-this.miya.getPosition().x,2)+Math.pow(n.y-this.miya.getPosition().y,2));o<400&&o>150?("idle"==this.miya.getComponent(sp.Skeleton).animation&&"in_jump"!=this.miya.getComponent(sp.Skeleton).animation&&this.miya.getComponent(sp.Skeleton).setAnimation(0,"in_jump",!1),"jump"!=this.miya.getComponent(sp.Skeleton).animation&&this.miya.getComponent(sp.Skeleton).setAnimation(0,"jump",!0)):o<150?"jump_xuangz"!=this.miya.getComponent(sp.Skeleton).animation&&this.miya.getComponent(sp.Skeleton).setAnimation(0,"jump_xuangz",!0):o>400&&("jump"==this.miya.getComponent(sp.Skeleton).animation&&"kan"!=this.miya.getComponent(sp.Skeleton).animation&&this.miya.getComponent(sp.Skeleton).setAnimation(0,"kan",!1),"kan_idle"!=this.miya.getComponent(sp.Skeleton).animation&&this.miya.getComponent(sp.Skeleton).addAnimation(0,"kan_idle",!0))}.bind(this),this),t.on(cc.Node.EventType.TOUCH_END,function(t){if("jump_xuangz"==this.miya.getComponent(sp.Skeleton).animation){this.miya.getComponent(sp.Skeleton).addAnimation(0,"in_idle",!1);var n=this.answerArr.indexOf(e);this.answerArr.splice(n,1),this.pl.splice(n,1);var o=this.updateNode.indexOf(e);this.updateNode.splice(o,1),this.updatePos(),e.destroy()}else e.setPosition(cc.v2(0,0));this.miya.getComponent(sp.Skeleton).setAnimation(0,"in_idle",!1),"idle"!=this.miya.getComponent(sp.Skeleton).animation&&this.miya.getComponent(sp.Skeleton).addAnimation(0,"idle",!0)}.bind(this),this),t.on(cc.Node.EventType.TOUCH_CANCEL,function(e){}.bind(this),this)},t.prototype.updatePos=function(){for(var e=0;e<this.answerArr.length;e++){var t=e+1,n=this.node.getChildByName(t.toString());this.answerArr[e].parent=n}},t.prototype.shoot=function(){var e=this;if(0==this.gunNode.rotation){if(0==this.gunNode.getChildByName("ballNode").opacity&&this.bubble_1.opacity){var t=parseInt(this.bubble_1.getChildByName("label").getComponent(cc.Label).string),n=this.gunNode.getChildByName("ballNode");n.getChildByName("spine").getComponent(sp.Skeleton).setSkin(this.skinString(t)),n.getChildByName("label").getComponent(cc.Label).string=t.toString(),n.opacity=255,n.getChildByName("gun_bg").opacity=0,this.bubble_none1.node.opacity=255,this.bubble_1.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(t){"ball_out"==t.animation.name&&(e.bubble_1.opacity=0,n.getChildByName("gun_bg").opacity=255,n.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_in",!1),cc.log("complete callback"))}),this.bubble_1.getChildByName("spine").getComponent(sp.Skeleton).clearTracks(),this.bubble_1.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_out",!1)}else if(0==this.gunNode.getChildByName("ballNode").opacity&&this.bubble_2.opacity){var o=parseInt(this.bubble_2.getChildByName("label").getComponent(cc.Label).string),i=this.gunNode.getChildByName("ballNode");i.getChildByName("spine").getComponent(sp.Skeleton).setSkin(this.skinString(o)),i.getChildByName("label").getComponent(cc.Label).string=o.toString(),i.opacity=255,i.getChildByName("gun_bg").opacity=0,this.bubble_none2.node.opacity=255,this.bubble_2.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(t){"ball_out"==t.animation.name&&(e.bubble_2.opacity=0,i.getChildByName("gun_bg").opacity=255,i.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_in",!1),cc.log("complete callback"))}),this.bubble_2.getChildByName("spine").getComponent(sp.Skeleton).clearTracks(),this.bubble_2.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_out",!1)}if(0!=this.bubble_none1.node.opacity&&0!=this.bubble_none2.node.opacity&&255==this.gunNode.getChildByName("ballNode").opacity&&this.answerArr.length<25){var a=this.gunNode.getChildByName("ballNode"),r=a.getChildByName("label").getComponent(cc.Label).string,s=this.answerArr.length+1,c=this.node.getChildByName(s.toString()),l=c.getPosition(),u=this.gunNode.getPosition(),p=this.gunNode.getChildByName("gun1").getPosition().x+u.x,h=this.gunNode.getChildByName("gun1").getPosition().y+u.y,d=cc.v2(p,h),g=this.gunNode.getPosition(),b=this.getAngle(l,g),m=this.getRotationPos(u,d,b),f=parseInt(a.getChildByName("label").getComponent(cc.Label).string);this.pl.push(f),this.bullet.getChildByName("spine").getComponent(sp.Skeleton).setSkin(this.skinString(f)),this.bullet.getChildByName("label").getComponent(cc.Label).string=a.getChildByName("label").getComponent(cc.Label).string;var _=cc.callFunc(function(){var e=this;this.gunNode.getChildByName("gun").getComponent(sp.Skeleton).setAnimation(0,"ready",!1),this.gunNode.getChildByName("gun").getComponent(sp.Skeleton).setCompleteListener(function(t){if("ready"==t.animation.name){e.gunNode.getChildByName("gun").getComponent(sp.Skeleton).setAnimation(0,"go",!1),a.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,"ball_fire",!1),a.getChildByName("spine").getComponent(sp.Skeleton).setCompleteListener(function(e){"ball_fire"==e.animation.name&&(a.opacity=0)}),e.bullet.setPosition(m),cc.log(m),e.bullet.opacity=255,e.bullet.setScale(.5);var n=.2;s>18&&(n=.1),e.bullet.runAction(cc.sequence(cc.spawn(cc.scaleTo(n,1),cc.moveTo(n,l).easing(cc.easeSineOut())),y))}})}.bind(this),this),y=cc.callFunc(function(){this.bullet.opacity=0,this.createBall(parseInt(r),0,0,c,!0),cc.log("create a answer ball",this.answerArr),this.gunNode.runAction(cc.rotateTo(.5,0))}.bind(this),this);this.gunNode.runAction(cc.sequence(cc.rotateBy(.5,b),_))}}},t.prototype.getAngle=function(e,t){var n=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y),i=o/Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),a=Math.acos(i),r=Math.floor(180/(Math.PI/a));return r=e.x>t.x?r:-r},t.prototype.getRotationPos=function(e,t,n){var o=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),i=2*Math.PI/360*n,a=o*Math.cos(i),r=Math.sqrt(Math.pow(o,2)-Math.pow(a,2)),s=e.x+r,c=e.y+a;return s=n>0?s:e.x-r,cc.v2(s,c)},t.prototype.nextCheckPoint=function(e){this.minuteHand.rotation=0,this.secondHand.rotation=0,this.timer=0,this.openClock(),this.updateNode=[];for(var t=0;t<this.decomposeArr.length;t++)this.decomposeArr[t].destroy();for(t=0;t<this.answerArr.length;t++)this.answerArr[t].destroy();for(t=0;t<this.labelArr.length;t++)this.labelArr[t].destroy();this.decomposeArr=[],this.answerArr=[],this.labelArr=[],this.pl=[],this.li=[],this.an=[],this.bubble.opacity=0,this.bubble_1.opacity=0,this.bubble_2.opacity=0,this.gunNode.getChildByName("ballNode").opacity=0,this.bullet.opacity=0,this.decoposeNum=i.DaAnData.getInstance().numberArr[e-1],cc.log("next point is ",e),cc.log("checkpointsnum is ",this.checkpointsNum),this.decompose(this.decoposeNum),this.answer(this.decoposeNum),this.createDecomposeBall(),this.initProgress(this.checkpoint),this.defaultValue(),this.updateNode.push(this.bubble_1),this.updateNode.push(this.bubble_2),this.updateNode.push(this.gunNode.getChildByName("ballNode")),this.cueNum=0},t.prototype.reset=function(){if(0==this.gunNode.rotation){this.minuteHand.rotation=0,this.secondHand.rotation=0,this.timer=0,this.openClock();for(var e=0;e<this.answerArr.length;e++)-1!=this.updateNode.indexOf(this.answerArr[e])&&this.updateNode.splice(this.updateNode.indexOf(this.answerArr[e]),1),this.answerArr[e].destroy();this.answerArr=[],this.pl=[],this.bubble.opacity=0,this.bubble_1.opacity=0,this.bubble_2.opacity=0,this.gunNode.getChildByName("ballNode").opacity=0,this.bullet.opacity=0,this.cueNum=0,this.defaultValue(),this.mask.active=!1}},t.prototype.cueAnswer=function(){for(var e=0;e<this.pl.length;e++)if(-1==this.an.indexOf(this.pl[e]))this.answerArr[e].getChildByName("err").active=!0;else for(var t=0;t<e;t++)this.pl[t]==this.pl[e]&&(this.answerArr[e].getChildByName("err").active=!0)},t.prototype.isRight=function(){if(0==this.gunNode.rotation){for(var e=0,t=0;t<this.an.length;t++)-1!=this.pl.indexOf(this.an[t])&&e++;e==this.an.length&&this.pl.length==this.an.length?(this.checkpoint++,this.checkpoint>=this.checkpointsNum+1?(this.closeClock(),this.tijiao.interactable=!1,this.chongzhi.interactable=!1,a.UIHelp.showOverTips(1,this.timer,"\u606d\u559c\u5168\u90e8\u901a\u5173",function(){c.UIManager.getInstance().closeUI(u.OverTips),this.reset()}.bind(this),function(){c.UIManager.getInstance().closeUI(u.OverTips),this.mask.active=!0,s.ConstValue.IS_TEACHER&&(this.submit.node.active=!0)}.bind(this))):(this.closeClock(),a.UIHelp.showOverTips(2,this.timer,"\u6311\u6218\u6210\u529f",function(){c.UIManager.getInstance().closeUI(u.OverTips),this.reset()}.bind(this),function(){c.UIManager.getInstance().closeUI(u.OverTips),this.nextCheckPoint(this.checkpoint)}.bind(this)))):(this.cueNum++,this.mask.active=!0,this.closeClock(),a.UIHelp.showOverTips(3,this.timer,"\u6311\u6218\u5931\u8d25\uff01\u70b9\u51fb\u91cd\u7f6e\u540e\u518d\u6b21\u6311\u6218",this.cueAnswer.bind(this)))}},t.prototype.openClock=function(){this.intervalIndex=setInterval(function(){this.timer=this.timer+1;var e=this.timer/60>>0,t=this.timer%60;this.minStr=String(e),this.secStr=String(t),e<10&&(this.minStr="0"+this.minStr),t<10&&(this.secStr="0"+this.secStr),this.minuteHand.rotation=6*e,this.secondHand.rotation=6*t,this.minutes.getComponent(cc.Label).string=this.minStr,this.second.getComponent(cc.Label).string=this.secStr,60==e&&clearInterval(this.intervalIndex)}.bind(this),1e3)},t.prototype.closeClock=function(){clearInterval(this.intervalIndex)},t.prototype.backButton=function(){this.closeClock(),c.UIManager.getInstance().closeUI(n),p.ListenerManager.getInstance().trigger(h.ListenerType.OnEditStateSwitching,{state:0})},t.prototype.submitButton=function(){c.UIManager.getInstance().openUI(l.default)},t.className="GamePanel",__decorate([b(cc.Button)],t.prototype,"back",void 0),__decorate([b(cc.Button)],t.prototype,"submit",void 0),__decorate([b(cc.Button)],t.prototype,"queren",void 0),__decorate([b(cc.Button)],t.prototype,"chongzhi",void 0),__decorate([b(cc.Button)],t.prototype,"tijiao",void 0),__decorate([b(cc.Label)],t.prototype,"minutes",void 0),__decorate([b(cc.Label)],t.prototype,"second",void 0),__decorate([b(cc.Node)],t.prototype,"minuteHand",void 0),__decorate([b(cc.Node)],t.prototype,"secondHand",void 0),__decorate([b(cc.Label)],t.prototype,"numberStr",void 0),__decorate([b(cc.Sprite)],t.prototype,"bubble_none1",void 0),__decorate([b(cc.Sprite)],t.prototype,"bubble_none2",void 0),__decorate([b(cc.Node)],t.prototype,"bubble_1",void 0),__decorate([b(cc.Node)],t.prototype,"bubble_2",void 0),__decorate([b(cc.Node)],t.prototype,"bubble",void 0),__decorate([b(cc.Node)],t.prototype,"bullet",void 0),__decorate([b(cc.Node)],t.prototype,"gunNode",void 0),__decorate([b(cc.Node)],t.prototype,"miya",void 0),__decorate([b(cc.Node)],t.prototype,"mask",void 0),__decorate([b(cc.Node)],t.prototype,"numberNode",void 0),__decorate([b(cc.Node)],t.prototype,"signNode",void 0),__decorate([b(cc.BitmapFont)],t.prototype,"font",void 0),__decorate([b(cc.Prefab)],t.prototype,"ballNodeP",void 0),t=n=__decorate([g],t)}(o.BaseUI);n.default=m,cc._RF.pop()},{"../../Data/ConstValue":"ConstValue","../../Data/DaAnData":"DaAnData","../../Data/ListenerType":"ListenerType","../../Http/NetWork":"NetWork","../../Manager/ListenerManager":"ListenerManager","../../Manager/UIManager":"UIManager","../../UI/Item/OverTips":"OverTips","../../Utils/UIHelp":"UIHelp","../BaseUI":"BaseUI","./SubmissionPanel":"SubmissionPanel"}],ListenerManager:[function(e,t,n){"use strict";cc._RF.push(t,"05dc2tRAiFMobMbxaPK4NIf","ListenerManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t,n){void 0===n&&(n=!1),this.mIsOnce=!1,this.mListener=e,this.mArgArray=t,this.mIsOnce=n}return Object.defineProperty(e.prototype,"listener",{get:function(){return this.mListener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"argArray",{get:function(){return this.mArgArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOnce",{get:function(){return this.mIsOnce},set:function(e){this.mIsOnce=e},enumerable:!0,configurable:!0}),e}();n.Delegate=o;var i=function(){function e(){this.mListenerMap=new Map}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.has=function(e,t,n){return null!==this.find(e,t,n)},e.prototype.trigger=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(!e)return console.error("Listener type is null!"),!1;var i=[],a=[],r=this.mListenerMap.get(e);r&&(r.forEach(function(e,t){for(var n=0,o=e;n<o.length;n++){var s=o[n];i.push(s),a.push(t)}for(var c=e.length-1;c>=0;--c)e[c].isOnce&&e.splice(c,1);e.length<=0&&r.delete(t)}),r.size<=0&&this.mListenerMap.delete(e));for(var s=i.length,c=0;c<s;c++){var l=i[c];(t=l.listener).call.apply(t,[a[c]].concat(l.argArray,n))}return s>0},e.prototype.add=function(e,t,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];this.addListener.apply(this,[e,t,n,!1].concat(o))},e.prototype.addOnce=function(e,t,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];this.addListener.apply(this,[e,t,n,!0].concat(o))},e.prototype.remove=function(e,t,n,o){this.removeBy(function(i,a,r){return(!e||e===i)&&((!t||t===a)&&((!n||n===r.listener)&&!(o&&!r.isOnce)))})},e.prototype.removeAll=function(e){var t=this;this.mListenerMap.forEach(function(n,o){n.delete(e),n.size<=0&&t.mListenerMap.delete(o)})},e.prototype.addListener=function(e,t,n,i){for(var a=[],r=4;r<arguments.length;r++)a[r-4]=arguments[r];var s=this.find(e,t,n);if(s)s.isOnce=i,console.error("Listener is already exist!");else{var c=new o(n,a,i);this.mListenerMap.get(e).get(t).push(c)}},e.prototype.removeBy=function(e){var t=this;e&&this.mListenerMap.forEach(function(n,o){n.forEach(function(t,i){for(var a=t.length-1;a>=0;--a){var r=t[a];e(o,i,r)&&t.splice(a,1)}t.length<=0&&n.delete(i)}),n.size<=0&&t.mListenerMap.delete(o)})},e.prototype.find=function(e,t,n){if(!e)return console.error("Listener type is null!"),null;if(!t)return console.error("Caller type is null!"),null;if(!n)return console.error("Listener is null!"),null;var o,i;this.mListenerMap.has(e)?o=this.mListenerMap.get(e):(o=new Map,this.mListenerMap.set(e,o)),o.has(t)?i=o.get(t):(i=[],o.set(t,i));for(var a=0,r=i;a<r.length;a++){var s=r[a];if(s.mListener===n)return s}return null},e}();n.ListenerManager=i,cc._RF.pop()},{}],ListenerType:[function(e,t,n){"use strict";cc._RF.push(t,"8ea11Tcb4BI7ojchoTKxYZm","ListenerType"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.Test="Test",e.GameStart="GameStart",e.UpdateMainUI="UpdateMainUI",e.LoopUpdate="LoopUpdate",e.OnEndOfInput="OnEndOfInput",e.OnDaAnShanChu="OnDaAnShanChu",e.OnDaAnZengJia="OnDaAnZengJia",e.OnEditStateSwitching="OnEditStateSwitching",e}();n.ListenerType=o,cc._RF.pop()},{}],LoadingUI:[function(e,t,n){"use strict";cc._RF.push(t,"cf8a66RO2hJWJN7q1dt4/zn","LoadingUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),i=e("../../Data/ConstValue"),a=e("./TeacherPanel"),r=e("./GamePanel"),s=e("../../Manager/UIManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.progressLabel=null,t.dragonNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;cc.log("enterLoadingUI========");i.ConstValue.IS_EDITIONS&&courseware.page.sendToParent("load start");var t=i.ConstValue.IS_TEACHER?a.default:r.default;s.UIManager.getInstance().openUI(t,0,function(){i.ConstValue.IS_EDITIONS&&(courseware.page.sendToParent("load end"),courseware.page.sendToParent("start")),cc.log("enter techerpanel====="),e.node.active=!1},function(t,n,o){e.progressBar.progress=t/n;var a=Math.round(t/n*100);i.ConstValue.IS_EDITIONS&&(cc.log("is editions======"),courseware.page.sendToParent("loading",a)),e.progressLabel.string=a.toString()+"%";var r=t/n*609-304;e.dragonNode.x=r})},t.className="LoadingUI",__decorate([u(cc.ProgressBar)],t.prototype,"progressBar",void 0),__decorate([u(cc.Label)],t.prototype,"progressLabel",void 0),__decorate([u(cc.Node)],t.prototype,"dragonNode",void 0),t=__decorate([l],t)}(o.BaseUI);n.LoadingUI=p,cc._RF.pop()},{"../../Data/ConstValue":"ConstValue","../../Manager/UIManager":"UIManager","../BaseUI":"BaseUI","./GamePanel":"GamePanel","./TeacherPanel":"TeacherPanel"}],LogWrap:[function(e,t,n){"use strict";cc._RF.push(t,"615f7lsxLNDWJSqVJoRIFW3","LogWrap"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getDateString=function(){var e=new Date,t=e.getHours().toString(),n="";return n+=(1==t.length?"0"+t:t)+":",n+=(1==(t=e.getMinutes().toString()).length?"0"+t:t)+":",n+=(1==(t=e.getSeconds().toString()).length?"0"+t:t)+":",1==(t=e.getMilliseconds().toString()).length&&(t="00"+t),2==t.length&&(t="0"+t),n="["+(n+=t)+"]"},e.stack=function(e){var t=(new Error).stack.split("\n");t.shift();var n=[];t.forEach(function(e){var t,o=(e=e.substring(7)).split(" ");o.length<2?n.push(o[0]):n.push(((t={})[o[0]]=o[1],t))});var o=[];if(e<n.length-1)for(var i in n[e])o.push(i);var a=o[0].split(".");return a[0]+".js->"+a[1]+": "},e.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(console.log||cc.log).call(this,"%s%s:"+cc.js.formatStr.apply(cc,arguments),e.stack(2),e.getDateString())},e.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(console.log||cc.log).call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:#00CD00;",e.stack(2),e.getDateString())},e.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(console.log||cc.log).call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:#ee7700;",e.stack(2),e.getDateString())},e.err=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(console.log||cc.log).call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:red",e.stack(2),e.getDateString())},e}();n.LogWrap=o,cc._RF.pop()},{}],MathExtension:[function(e,t,n){"use strict";cc._RF.push(t,"81407Q2vf9Ezor3KOYrFKb8","MathExtension"),Math.randomRangeInt=function(e,t){var n=Math.random();return 1===n&&(n-=Number.EPSILON),e+Math.floor(n*(t-e))},Math.randomRangeFloat=function(e,t){return e+Math.random()*(t-e)},Math.fmod=function(e,t){return e-Math.floor(e/t)*t},cc._RF.pop()},{}],NetWork:[function(e,t,n){"use strict";cc._RF.push(t,"9cd01aQNbFMUY4sUMN0yYH5","NetWork"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.httpRequest=function(e,t,n,o,i){void 0===o&&(o=null),void 0===i&&(i="");var a=new XMLHttpRequest;a.open(t,e),a.timeout=1e4,a.setRequestHeader("Content-Type",n),a.withCredentials=!0,a.onreadystatechange=function(){console.log("httpRequest rsp status",a.status,"        xhr.readyState",a.readyState),4==a.readyState&&a.status>=200&&a.status<=400&&o&&o(!1,a.responseText)},a.ontimeout=function(e){console.log("httpRequest timeout"),o&&o(!0,null)},a.onerror=function(e){console.log("httpRequest error"),o&&o(!0,null)},a.send(i)},e.prototype.GetRequest=function(){var e=location.search,t=new Object;if(-1!=e.indexOf("?"))for(var n=e.substr(1).split("&"),o=0;o<n.length;o++)t[n[o].split("=")[0]]=unescape(n[o].split("=")[1]);return t},e.isOnlineEnv=/\/\/static\.haibian\.com/.test(window.location.href),e.isProtocol=/http:/.test(window.location.protocol),e.isLocal=/localhost/.test(window.location.href)||e.isProtocol,e.BASE=e.isOnlineEnv?"//courseware.haibian.com":e.isLocal?"//ceshi.courseware.haibian.com":"//ceshi_courseware.haibian.com",e.GET_QUESTION=e.BASE+"/get",e.GET_USER_PROGRESS=e.BASE+"/get/answer",e.GET_TITLE=e.BASE+"/get/title",e.ADD=e.BASE+"/add",e.MODIFY=e.BASE+"/modify",e.courseware_id=0,e.title_id=null,e.user_id=null,e}();n.NetWork=o,cc._RF.pop()},{}],OverTips:[function(e,t,n){"use strict";cc._RF.push(t,"0fe09CVpZpE96/+aPUom1lS","OverTips"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),i=e("../../UIComm/Tools"),a=e("../../Manager/UIManager"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.NodeDes=null,t.des=null,t.time=null,t.close=null,t.sp_BgAnimator=null,t.sp_lightAnimator=null,t.rightButton=null,t.leftButton=null,t.closeButton=null,t.layout=null,t.callback1=null,t.callback2=null,t}var n;return __extends(t,e),n=t,t.prototype.start=function(){},t.prototype.init=function(e,t,n,o,a){this.type=e,i.Tools.playSpine(this.sp_BgAnimator,"fault",!1);var r=t%60,s="\u7528\u65f6 "+(t/60>>0).toString()+":"+r.toString();this.time.string=s,this.NodeDes.setScale(.001,.001),this.layout.node.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()}),this.leftButton.node.active=!1,this.closeButton.node.active=!1,this.rightButton.node.active=!1,1==e?(this.Successful(n,1),this.close.node.active=!1,this.callback1=o,this.callback2=a):2==e?(this.Successful(n,2),this.close.node.active=!1,this.callback1=o,this.callback2=a):3==e&&(this.failure(n),this.time.node.active=!1,this.time.node.active=!1,this.callback1=o,this.close.node.active=!0),this.TipsAnimatorScale(this.NodeDes)},t.prototype.Successful=function(e,t){this.des.node.active=!0,this.sp_lightAnimator.node.active=!0,i.Tools.playSpine(this.sp_BgAnimator,"fault",!1),i.Tools.playSpine(this.sp_BgAnimator,"right_1",!1,function(){1==t?(this.leftButton.node.active=!0,this.closeButton.node.active=!0,this.leftButton.node.on("click",this.callback1,this),this.closeButton.node.on("click",this.callback2,this)):2==t&&(this.leftButton.node.active=!0,this.rightButton.node.active=!0,this.leftButton.node.on("click",this.callback1,this),this.rightButton.node.on("click",this.callback2,this))}.bind(this)),i.Tools.playSpine(this.sp_lightAnimator,"light",!1,function(){}.bind(this)),this.des.string=e,this.des.node.color=new cc.Color(39,178,187)},t.prototype.failure=function(e){this.des.node.active=!0,this.sp_lightAnimator.node.active=!1,i.Tools.playSpine(this.sp_BgAnimator,"fault",!1),this.des.string=e},t.prototype.OnClickClose=function(){this.callback1(),a.UIManager.getInstance().closeUI(n)},t.prototype.TipsAnimatorScale=function(e){e.stopAllActions();var t=cc.sequence(cc.delayTime(1),cc.scaleTo(.2,1,1));e.runAction(t)},t.className="OverTips",__decorate([c(cc.Node)],t.prototype,"NodeDes",void 0),__decorate([c(cc.Label)],t.prototype,"des",void 0),__decorate([c(cc.Label)],t.prototype,"time",void 0),__decorate([c(cc.Button)],t.prototype,"close",void 0),__decorate([c(sp.Skeleton)],t.prototype,"sp_BgAnimator",void 0),__decorate([c(sp.Skeleton)],t.prototype,"sp_lightAnimator",void 0),__decorate([c(cc.Button)],t.prototype,"rightButton",void 0),__decorate([c(cc.Button)],t.prototype,"leftButton",void 0),__decorate([c(cc.Button)],t.prototype,"closeButton",void 0),__decorate([c(cc.Layout)],t.prototype,"layout",void 0),t=n=__decorate([s],t)}(o.BaseUI);n.OverTips=l,cc._RF.pop()},{"../../Manager/UIManager":"UIManager","../../UIComm/Tools":"Tools","../BaseUI":"BaseUI"}],ShaderComponent:[function(e,t,n){"use strict";cc._RF.push(t,"dbe38Eu9bZCbJeHFtq3EVSq","ShaderComponent"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ShaderManager"),i=cc._decorator,a=i.ccclass,r=i.property,s=i.requireComponent,c=i.executeInEditMode,l=[o.ShaderType.Fluxay,o.ShaderType.FluxaySuper],u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._shader=o.ShaderType.Default,t._color=cc.color(),t._start=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"shader",{get:function(){return this._shader},set:function(e){this._shader=e,this._applyShader()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.getComponent(cc.Sprite).setState(0),this._applyShader()},t.prototype.update=function(e){this._material&&(this._setShaderColor(),this._setShaderTime(e))},t.prototype._applyShader=function(){var e=this._shader,t=this.getComponent(cc.Sprite),n=o.default.useShader(t,e);this._material=n,this._start=0;var i=this._color;if(i.setR(255),i.setG(255),i.setB(255),i.setA(255),n){switch(e){case o.ShaderType.Blur:case o.ShaderType.GaussBlur:n.setNum(.03)}this._setShaderColor()}},t.prototype._setShaderColor=function(){var e=this.node,t=e.color,n=this._color,o=t.getR(),i=t.getG(),a=t.getB(),r=e.opacity,s=!1;n.getR()!==o&&(n.setR(o),s=!0),n.getG()!==i&&(n.setG(i),s=!0),n.getB()!==a&&(n.setB(a),s=!0),n.getA()!==r&&(n.setA(r),s=!0),s&&this._material.setColor(o/255,i/255,a/255,r/255)},t.prototype._setShaderTime=function(e){if(l.indexOf(this._shader)>=0){var t=this._start;t>65535&&(t=0),t+=e,this._material.setTime(t),this._start=t}},__decorate([r({type:cc.Enum(o.ShaderType),visible:!1})],t.prototype,"_shader",void 0),__decorate([r({type:cc.Enum(o.ShaderType)})],t.prototype,"shader",null),t=__decorate([a,c,s(cc.Sprite)],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./ShaderManager":"ShaderManager"}],ShaderLab:[function(e,t,n){"use strict";cc._RF.push(t,"463d9mDMEBPfaKBF4qNZ0aY","ShaderLab"),Object.defineProperty(n,"__esModule",{value:!0});var o="\nuniform mat4 viewProj;\nattribute vec3 a_position;\nattribute vec2 a_uv0;\nvarying vec2 uv0;\nvoid main () {\n    vec4 pos = viewProj * vec4(a_position, 1);\n    gl_Position = pos;\n    uv0 = a_uv0;\n}",i={GrayScaling:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float gray = dot(c.rgb, vec3(0.299 * 0.5, 0.587 * 0.5, 0.114 * 0.5));\n    gl_FragColor = vec4(gray, gray, gray, c.a * 0.5);\n}\n"},Stone:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float clrbright = (c.r + c.g + c.b) * (1. / 3.);\n    float gray = (0.6) * clrbright;\n    gl_FragColor = vec4(gray, gray, gray, c.a);\n}\n"},Ice:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 clrx = color * texture2D(texture, uv0);\n    float brightness = (clrx.r + clrx.g + clrx.b) * (1. / 3.);\n\tfloat gray = (1.5)*brightness;\n\tclrx = vec4(gray, gray, gray, clrx.a)*vec4(0.8,1.2,1.5,1);\n    gl_FragColor =clrx;\n}\n"},Frozen:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    c *= vec4(0.8, 1, 0.8, 1);\n\tc.b += c.a * 0.2;\n    gl_FragColor = c;\n}\n"},Mirror:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    c.r *= 0.5;\n    c.g *= 0.8;\n    c.b += c.a * 0.2;\n    gl_FragColor = c;\n}\n"},Poison:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    c.r *= 0.8;\n\tc.r += 0.08 * c.a;\n\tc.g *= 0.8;\n    c.g += 0.2 * c.a;\n\tc.b *= 0.8;\n    gl_FragColor = c;\n}\n"},Banish:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float gg = (c.r + c.g + c.b) * (1.0 / 3.0);\n    c.r = gg * 0.9;\n    c.g = gg * 1.2;\n    c.b = gg * 0.8;\n    c.a *= (gg + 0.1);\n    gl_FragColor = c;\n}\n"},Vanish:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float gray = (c.r + c.g + c.b) * (1. / 3.);\n    float rgb = gray * 0.8;\n    gl_FragColor = vec4(rgb, rgb, rgb, c.a * (gray + 0.1));\n}\n"},Invisible:{vert:o,frag:"\nvoid main () {\n    gl_FragColor = vec4(0,0,0,0);\n}\n"},Blur:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float num;\nvarying vec2 uv0;\nvoid main () {\n    vec4 sum = vec4(0.0);\n    vec2 size = vec2(num,num);\n    sum += texture2D(texture, uv0 - 0.4 * size) * 0.05;\n\tsum += texture2D(texture, uv0 - 0.3 * size) * 0.09;\n\tsum += texture2D(texture, uv0 - 0.2 * size) * 0.12;\n\tsum += texture2D(texture, uv0 - 0.1 * size) * 0.15;\n\tsum += texture2D(texture, uv0             ) * 0.16;\n\tsum += texture2D(texture, uv0 + 0.1 * size) * 0.15;\n\tsum += texture2D(texture, uv0 + 0.2 * size) * 0.12;\n\tsum += texture2D(texture, uv0 + 0.3 * size) * 0.09;\n    sum += texture2D(texture, uv0 + 0.4 * size) * 0.05;\n    \n    vec4 vectemp = vec4(0,0,0,0);\n    vec4 substract = vec4(0,0,0,0);\n    vectemp = (sum - substract) * color;\n\n    float alpha = texture2D(texture, uv0).a;\n    if(alpha < 0.05) { gl_FragColor = vec4(0 , 0 , 0 , 0); }\n\telse { gl_FragColor = vectemp; }\n}\n"},GaussBlur:{vert:o,frag:"\n#define repeats 5.\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float num;\nvarying vec2 uv0;\n\nvec4 draw(vec2 uv) {\n    return color * texture2D(texture,uv).rgba; \n}\nfloat grid(float var, float size) {\n    return floor(var*size)/size;\n}\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\nvoid main()\n{\n    vec4 blurred_image = vec4(0.);\n    for (float i = 0.; i < repeats; i++) { \n        vec2 q = vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i,uv0.x+uv0.y))+num); \n        vec2 uv2 = uv0+(q*num);\n        blurred_image += draw(uv2)/2.;\n        q = vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i+2.,uv0.x+uv0.y+24.))+num); \n        uv2 = uv0+(q*num);\n        blurred_image += draw(uv2)/2.;\n    }\n    blurred_image /= repeats;\n    gl_FragColor = vec4(blurred_image);\n}\n"},Dissolve:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float time;\nvarying vec2 uv0;\n\nvoid main()\n{\n    vec4 c = color * texture2D(texture,uv0);\n    float height = c.r;\n    if(height < time)\n    {\n        discard;\n    }\n    if(height < time+0.04)\n    {\n        // \u6eb6\u89e3\u989c\u8272\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\n        c = vec4(.9,.6,0.3,c.a);\n    }\n    gl_FragColor = c;\n}\n"},Fluxay:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float time;\nvarying vec2 uv0;\n\nvoid main()\n{\n    vec4 src_color = color * texture2D(texture, uv0).rgba;\n\n    float width = 0.08;       //\u6d41\u5149\u7684\u5bbd\u5ea6\u8303\u56f4 (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u5bbd\u5ea6)\n    float start = tan(time/1.414);  //\u6d41\u5149\u7684\u8d77\u59cbx\u5750\u6807\n    float strength = 0.008;   //\u6d41\u5149\u589e\u4eae\u5f3a\u5ea6   (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u589e\u4eae\u5f3a\u5ea6)\n    float offset = 0.5;      //\u504f\u79fb\u503c         (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u503e\u659c\u7a0b\u5ea6)\n    if(uv0.x < (start - offset * uv0.y) &&  uv0.x > (start - offset * uv0.y - width))\n    {\n        vec3 improve = strength * vec3(255, 255, 255);\n        vec3 result = improve * vec3( src_color.r, src_color.g, src_color.b);\n        gl_FragColor = vec4(result, src_color.a);\n\n    }else{\n        gl_FragColor = src_color;\n    }\n}\n"},FluxaySuper:{vert:o,frag:"\n#define TAU 6.12\n#define MAX_ITER 5\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float time;\nvarying vec2 uv0;\n\nvoid main()\n{\n    float time = time * .5+5.;\n    // uv should be the 0-1 uv of texture...\n    vec2 uv = uv0.xy;//fragCoord.xy / iResolution.xy;\n    \n    vec2 p = mod(uv*TAU, TAU)-250.0;\n\n    vec2 i = vec2(p);\n    float c = 1.0;\n    float inten = .0045;\n\n    for (int n = 0; n < MAX_ITER; n++) \n    {\n        float t =  time * (1.0 - (3.5 / float(n+1)));\n        i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(1.5*t + i.x));\n        c += 1.0/length(vec2(p.x / (cos(i.x+t)/inten),p.y / (cos(i.y+t)/inten)));\n    }\n    c /= float(MAX_ITER);\n    c = 1.17-pow(c, 1.4);\n    vec4 tex = texture2D(texture,uv);\n    vec3 colour = vec3(pow(abs(c), 20.0));\n    colour = clamp(colour + vec3(0.0, 0.0, .0), 0.0, tex.a);\n\n    // \u6df7\u5408\u6ce2\u5149\n    float alpha = c*tex[3];  \n    tex[0] = tex[0] + colour[0]*alpha; \n    tex[1] = tex[1] + colour[1]*alpha; \n    tex[2] = tex[2] + colour[2]*alpha; \n    gl_FragColor = color * tex;\n}\n"},Pure:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    gl_FragColor = vec4(color.rgb, c.a);\n}\n"}};n.default=i,cc._RF.pop()},{}],ShaderManager:[function(e,t,n){"use strict";cc._RF.push(t,"d1e19w9UihLPqSppbSLUBq8","ShaderManager"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("./ShaderLab"),a=e("./ShaderMaterial");(function(e){e[e.Default=0]="Default",e[e.Gray=1]="Gray",e[e.GrayScaling=100]="GrayScaling",e[e.Stone=101]="Stone",e[e.Ice=102]="Ice",e[e.Frozen=103]="Frozen",e[e.Mirror=104]="Mirror",e[e.Poison=105]="Poison",e[e.Banish=106]="Banish",e[e.Vanish=107]="Vanish",e[e.Invisible=108]="Invisible",e[e.Blur=109]="Blur",e[e.GaussBlur=110]="GaussBlur",e[e.Dissolve=111]="Dissolve",e[e.Fluxay=112]="Fluxay",e[e.FluxaySuper=113]="FluxaySuper",e[e.Pure=114]="Pure"})(o=n.ShaderType||(n.ShaderType={}));var r=function(){function e(){}return e.useShader=function(e,t){if(cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS){if(e&&e.spriteFrame){if(t>o.Gray){var n=o[t],r=i.default[n];if(!r)return void console.warn("Shader not defined",n);cc.dynamicAtlasManager.enabled=!1;var s=new a.default(n,r.vert,r.frag,r.defines||[]),c=e.spriteFrame.getTexture();s.setTexture(c),s.updateHash();var l=e;return l._material=s,l._renderData._material=s,l._state=t,s}e.setState(t)}}else console.warn("Shader not surpport for canvas")},e}();n.default=r,cc._RF.pop()},{"./ShaderLab":"ShaderLab","./ShaderMaterial":"ShaderMaterial"}],ShaderMaterial:[function(e,t,n){"use strict";cc._RF.push(t,"70d0bHxjchOgLl9oySm1PPr","ShaderMaterial"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc.renderer.renderEngine,i=function(e){function t(t,n,o,i){var a=e.call(this,!1)||this,r=cc.renderer._forward._programLib;return!r._templates[t]&&r.define(t,n,o,i),a._init(t),a}return __extends(t,e),t.prototype._init=function(e){var t=o.renderer,n=o.gfx,i=new t.Pass(e);i.setDepth(!1,!1),i.setCullMode(n.CULL_NONE),i.setBlend(n.BLEND_FUNC_ADD,n.BLEND_SRC_ALPHA,n.BLEND_ONE_MINUS_SRC_ALPHA,n.BLEND_FUNC_ADD,n.BLEND_SRC_ALPHA,n.BLEND_ONE_MINUS_SRC_ALPHA);var a=new t.Technique(["transparent"],[{name:"texture",type:t.PARAM_TEXTURE_2D},{name:"color",type:t.PARAM_COLOR4},{name:"pos",type:t.PARAM_FLOAT3},{name:"size",type:t.PARAM_FLOAT2},{name:"time",type:t.PARAM_FLOAT},{name:"num",type:t.PARAM_FLOAT}],[i]);this._texture=null,this._color={r:1,g:1,b:1,a:1},this._pos={x:0,y:0,z:0},this._size={x:0,y:0},this._time=0,this._num=0,this._effect=this.effect=new t.Effect([a],{color:this._color,pos:this._pos,size:this._size,time:this._time,num:this._num},[]),this._mainTech=a},t.prototype.setTexture=function(e){this._texture=e,this._texture.update({flipY:!1,mipmap:!1}),this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId()},t.prototype.setColor=function(e,t,n,o){this._color.r=e,this._color.g=t,this._color.b=n,this._color.a=o,this._effect.setProperty("color",this._color)},t.prototype.setPos=function(e,t,n){this._pos.x=e,this._pos.y=t,this._pos.z=n,this._effect.setProperty("pos",this._pos)},t.prototype.setSize=function(e,t){this._size.x=e,this._size.y=t,this._effect.setProperty("size",this._size)},t.prototype.setTime=function(e){this._time=e,this._effect.setProperty("time",this._time)},t.prototype.setNum=function(e){this._num=e,this._effect.setProperty("num",this._num)},t}(o.Material);n.default=i,cc._RF.pop()},{}],Step:[function(e,t,n){"use strict";cc._RF.push(t,"ec260b7b1dBQYLxfWoMa0cz","Step"),cc.Class({extends:cc.Component,properties:{node_title:cc.Node,node_parent:cc.Node,_stepNode:[],NowIndex:-1},Init:function(e){for(var t=0;t<e.length;t++){var n=cc.instantiate(this.node_title);n.setParent(this.node_parent),n.children[1].getComponent(cc.Label).string=t.toString(),n.children[3].getComponent(cc.Label).string=e[t].des,n.active=!0,t+1>=e.length&&(n.children[2].active=!1,n.setContentSize(30,30)),this._stepNode.push(n)}this.NextStep()},SetNowPos:function(e){},NextStep:function(){this.NowIndex+1>=this._stepNode.length||(this.NowIndex>=0&&(this._stepNode[this.NowIndex].children[2].color=new cc.Color(122,170,229)),this._stepNode[this.NowIndex+1].children[0].color=new cc.Color(122,170,229),this.NowIndex++)},LestStep:function(){this.NowIndex-1<0||(this.NowIndex-1>=0&&(this._stepNode[this.NowIndex-1].children[2].color=new cc.Color(129,129,129)),this._stepNode[this.NowIndex].children[0].color=new cc.Color(129,129,129),this.NowIndex--)},start:function(){for(var e=[],t=["\u5f55\u5165\u9898\u76ee\u4fe1\u606f","\u68c0\u6d4b\u9898\u76ee\u4fe1\u606f"],n=0;n<t.length;n++){var o=[];o.des=t[n],e.push(o)}this.Init(e)},ReStart:function(){}}),cc._RF.pop()},{}],StringExtension:[function(e,t,n){"use strict";cc._RF.push(t,"85c1bk+r3FHf5RqunqKCFt+","StringExtension"),String.prototype.format=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Array.prototype.slice.call(arguments),o=0;return this.replace(/%s/g,function(e,t){return n[o++]})},cc._RF.pop()},{}],SubmissionPanel:[function(e,t,n){"use strict";cc._RF.push(t,"bdbeagD9lJH1p1yPQBbNwPK","SubmissionPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),i=e("../../Manager/UIManager"),a=e("../../Http/NetWork"),r=e("../../Utils/LogWrap"),s=e("../../Utils/UIHelp"),c=e("../../Data/DaAnData"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return __extends(t,e),n=t,t.prototype.start=function(){},t.prototype.onQueDingBtnClick=function(e){this.DetectionNet()},t.prototype.onQuXiaoBtnClick=function(e){i.UIManager.getInstance().closeUI(n)},t.prototype.DetectionNet=function(){var e=JSON.stringify({numberArr:c.DaAnData.getInstance().numberArr,checkpointsNum:c.DaAnData.getInstance().checkpointsNum});a.NetWork.getInstance().httpRequest(a.NetWork.GET_TITLE+"?title_id="+a.NetWork.title_id,"GET","application/json;charset=utf-8",function(t,o){t?i.UIManager.getInstance().closeUI(n):null==(o=JSON.parse(o)).data.courseware_content?(r.LogWrap.log(o.data),this.AddNet(e)):(a.NetWork.courseware_id=o.data.courseware_id,this.ModifyNet(e),r.LogWrap.log("data modify===",e))}.bind(this),null)},t.prototype.AddNet=function(e){var t={title_id:a.NetWork.title_id,courseware_content:e};a.NetWork.getInstance().httpRequest(a.NetWork.ADD,"POST","application/json;charset=utf-8",function(e,t){e||(s.UIHelp.showTip("\u7b54\u6848\u63d0\u4ea4\u6210\u529f"),i.UIManager.getInstance().closeUI(n))}.bind(this),JSON.stringify(t))},t.prototype.ModifyNet=function(e){var t={courseware_id:a.NetWork.courseware_id,courseware_content:e};cc.log("-------------------////"),cc.log(t),a.NetWork.getInstance().httpRequest(a.NetWork.MODIFY,"POST","application/json;charset=utf-8",function(e,t){e||(s.UIHelp.showTip("\u7b54\u6848\u4fee\u6539\u6210\u529f"),i.UIManager.getInstance().closeUI(n))}.bind(this),JSON.stringify(t))},t.className="SubmissionPanel",t=n=__decorate([u],t)}(o.BaseUI));n.default=p,cc._RF.pop()},{"../../Data/DaAnData":"DaAnData","../../Http/NetWork":"NetWork","../../Manager/UIManager":"UIManager","../../Utils/LogWrap":"LogWrap","../../Utils/UIHelp":"UIHelp","../BaseUI":"BaseUI"}],TeacherPanel:[function(e,t,n){"use strict";cc._RF.push(t,"70c27EBmWdPJYtgMQ9dyPZS","TeacherPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),i=e("../../Manager/UIManager"),a=e("../../Http/NetWork"),r=e("../../Data/DaAnData"),s=e("./GamePanel"),c=e("../../Manager/ListenerManager"),l=e("../../Data/ListenerType"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkpointsEditBox=null,t.editBoxNode=null,t.submissonButton=null,t.tipNode=null,t.editbox2=null,t.editboxArr=Array(),t}return __extends(t,e),t.prototype.onLoad=function(){this.getNet(),this.initData()},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.initData=function(){this.checkpointsEditBox.string=String(r.DaAnData.getInstance().checkpointsNum),this.checkpointEditingEnd(null),cc.log("checkpointsnum is =",r.DaAnData.getInstance().checkpointsNum)},t.prototype.ShowTips=function(e){this.tipNode.active=!0,this.tipNode.getChildByName("label").getComponent(cc.Label).string=e,this.tipNode.getChildByName("layout").on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()})},t.prototype.closeTip=function(){this.tipNode.active=!1},t.prototype.button=function(){cc.log("checkpoint num",r.DaAnData.getInstance().checkpointsNum,r.DaAnData.getInstance().numberArr),this.errorChecking()&&i.UIManager.getInstance().showUI(s.default,function(){c.ListenerManager.getInstance().trigger(l.ListenerType.OnEditStateSwitching,{state:1})})},t.prototype.checkpointEditingEnd=function(e){switch(this.checkpointsEditBox.string){case"1":r.DaAnData.getInstance().checkpointsNum=1;break;case"2":r.DaAnData.getInstance().checkpointsNum=2;break;case"3":r.DaAnData.getInstance().checkpointsNum=3;break;case"4":r.DaAnData.getInstance().checkpointsNum=4;break;default:this.checkpointsEditBox.string="",r.DaAnData.getInstance().checkpointsNum=0}for(var t=0;t<this.editboxArr.length;t++)this.editboxArr[t].destroy();var n=function(e){var t=cc.instantiate(o.editbox2);t.x=0,o.editboxArr.push(t),t.parent=o.editBoxNode,t.getChildByName("label").getComponent(cc.Label).string=(e+1).toString(),t.on("editing-did-ended",function(n){r.DaAnData.getInstance().numberArr[e]=parseInt(t.getComponent(cc.EditBox).string),cc.log(r.DaAnData.getInstance().numberArr)}.bind(o)),r.DaAnData.getInstance().numberArr[e]&&(t.getComponent(cc.EditBox).string=r.DaAnData.getInstance().numberArr[e].toString())},o=this;for(t=0;t<parseInt(this.checkpointsEditBox.string);t++)n(t)},t.prototype.errorChecking=function(){return 0==r.DaAnData.getInstance().checkpointsNum?(this.ShowTips("\u5173\u5361\u6570\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u8f93\u5165\u5173\u5361\u6570\u3002"),!1):!(r.DaAnData.getInstance().numberArr.length<r.DaAnData.getInstance().checkpointsNum)||(this.ShowTips("\u88ab\u5206\u89e3\u8d28\u56e0\u6570\u7684\u6570\u4e0d\u80fd\u4e3a\u7a7a\u3002"),!1)},t.prototype.getNet=function(){a.NetWork.getInstance().httpRequest(a.NetWork.GET_TITLE+"?title_id="+a.NetWork.title_id,"GET","application/json;charset=utf-8",function(e,t){if(!e){var n=JSON.parse(t);if(cc.log("response_data is ",n),null==n.data.courseware_content);else{var o=JSON.parse(n.data.courseware_content);r.DaAnData.getInstance().numberArr=o.numberArr,r.DaAnData.getInstance().checkpointsNum=o.checkpointsNum,cc.log("data is ",o),cc.log("---------number is",r.DaAnData.getInstance().numberArr),cc.log("---------checkpointsNum is ",r.DaAnData.getInstance().checkpointsNum),this.initData()}}}.bind(this),null)},t.className="TeacherPanel",__decorate([h(cc.EditBox)],t.prototype,"checkpointsEditBox",void 0),__decorate([h(cc.Node)],t.prototype,"editBoxNode",void 0),__decorate([h(cc.Button)],t.prototype,"submissonButton",void 0),__decorate([h(cc.Node)],t.prototype,"tipNode",void 0),__decorate([h(cc.Prefab)],t.prototype,"editbox2",void 0),t=__decorate([p],t)}(o.BaseUI);n.default=d,cc._RF.pop()},{"../../Data/DaAnData":"DaAnData","../../Data/ListenerType":"ListenerType","../../Http/NetWork":"NetWork","../../Manager/ListenerManager":"ListenerManager","../../Manager/UIManager":"UIManager","../BaseUI":"BaseUI","./GamePanel":"GamePanel"}],TimeManager:[function(e,t,n){"use strict";cc._RF.push(t,"6a93cVTR3pJrpapom9vowVf","TimeManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.getCurrentTime=function(){return(new Date).getTime()},e.instance=null,e}();n.TimeManager=o,cc._RF.pop()},{}],TipUI:[function(e,t,n){"use strict";cc._RF.push(t,"04f62OpblhMYb6+AOI+oOHr","TipUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),i=e("../Item/Tip"),a=cc._decorator,r=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipPrefab=null,t.tipPool=[],t}return __extends(t,e),t.prototype.showTip=function(e){for(var t=0;t<this.tipPool.length;++t)if(null!=this.tipPool[t]&&this.tipPool[t].isReady())return this.tipPool[t].node.setSiblingIndex(200),void this.tipPool[t].playTip(e);cc.log("create tip");var n=cc.instantiate(this.tipPrefab);n.parent=this.node;var o=n.getComponent(i.Tip);this.tipPool.push(o),o.playTip(e)},t.className="TipUI",__decorate([s(cc.Prefab)],t.prototype,"tipPrefab",void 0),t=__decorate([r],t)}(o.BaseUI);n.TipUI=c,cc._RF.pop()},{"../BaseUI":"BaseUI","../Item/Tip":"Tip"}],Tip:[function(e,t,n){"use strict";cc._RF.push(t,"c7373SoEY5LDIC2BLTSmOq3","Tip"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipLabel=null,t.ready=!0,t}return __extends(t,e),t.prototype.playTip=function(e){this.node.stopAllActions(),this.ready=!1,this.tipLabel.string=e,this.reset();var t=cc.moveTo(.5,0,128),n=cc.fadeIn(.5),o=cc.spawn(t,n),i=cc.delayTime(1),a=cc.fadeOut(.5),r=cc.callFunc(function(){this.ready=!0},this),s=cc.sequence(o,i,a,r);this.node.runAction(s)},t.prototype.isReady=function(){return this.ready},t.prototype.reset=function(){this.node.setPosition(0,0),this.node.opacity=255},__decorate([a(cc.Label)],t.prototype,"tipLabel",void 0),t=__decorate([i],t)}(cc.Component);n.Tip=r,cc._RF.pop()},{}],TitleNode:[function(e,t,n){"use strict";cc._RF.push(t,"b276fOW8MRNTqj/bpy0hngz","TitleNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Manager/ListenerManager"),i=e("../../Data/ListenerType"),a=cc._decorator,r=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bianJiLabel=null,t.jianYanLabel=null,t.tiaoNode=null,t.heiSe=cc.color(0,0,0),t.huiSe=cc.color(127,127,127),t}return __extends(t,e),t.prototype.start=function(){this.bianJiLabel.node.color=this.heiSe,this.jianYanLabel.node.color=this.huiSe,this.tiaoNode.color=this.huiSe,o.ListenerManager.getInstance().add(i.ListenerType.OnEditStateSwitching,this,this.onStateSwitching)},t.prototype.onStateSwitching=function(e){0==e.state?(this.jianYanLabel.node.color=this.huiSe,this.tiaoNode.color=this.huiSe):(this.jianYanLabel.node.color=this.heiSe,this.tiaoNode.color=this.heiSe)},__decorate([s(cc.Label)],t.prototype,"bianJiLabel",void 0),__decorate([s(cc.Label)],t.prototype,"jianYanLabel",void 0),__decorate([s(cc.Node)],t.prototype,"tiaoNode",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"../../Data/ListenerType":"ListenerType","../../Manager/ListenerManager":"ListenerManager"}],Tools:[function(e,t,n){"use strict";cc._RF.push(t,"8c9926FhnVH2Z4Gs2ZXOlDV","Tools"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,a=(o.property,function(){function e(){}return e.playSpine=function(e,t,n,o){void 0===o&&(o=null),e.premultipliedAlpha=!1,e.setAnimation(0,t,n)&&e.setCompleteListener(function(e,n){(e.animation?e.animation.name:"")===t&&o&&null!=o&&o()})},e.getQueryVariable=function(e){if((t=window.location.href.split("?")).length<2)return!1;for(var t=t[1].split("&"),n=0;n<t.length;n++){var o=t[n].split("=");if(o[0]==e)return o[1]}return!1},e=__decorate([i],e)}());n.Tools=a,cc._RF.pop()},{}],UIHelp:[function(e,t,n){"use strict";cc._RF.push(t,"c44e6cLg85JzaIFNvBdsH7x","UIHelp"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Manager/UIManager"),i=e("../UI/panel/TipUI"),a=e("../UI/Item/OverTips"),r=function(){function e(){}return e.showTip=function(t){var n=o.UIManager.getInstance().getUI(i.TipUI);n?n.showTip(t):o.UIManager.getInstance().openUI(i.TipUI,200,function(){e.showTip(t)})},e.showOverTips=function(t,n,i,r,s){var c=o.UIManager.getInstance().getUI(a.OverTips);c?c.init(t,n,i,r,s):o.UIManager.getInstance().openUI(a.OverTips,200,function(){e.showOverTips(t,n,i,r,s)})},e}();n.UIHelp=r,cc._RF.pop()},{"../Manager/UIManager":"UIManager","../UI/Item/OverTips":"OverTips","../UI/panel/TipUI":"TipUI"}],UIManager:[function(e,t,n){"use strict";cc._RF.push(t,"fcb706mngZPXIeAjofYaIuT","UIManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.uiList=[],this.uiRoot=null,this.uiRoot=cc.find("Canvas")}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.openUI=function(e,t,n,o){for(var i=this,a=[],r=4;r<arguments.length;r++)a[r-4]=arguments[r];this.getUI(e)||cc.loader.loadRes(e.getUrl(),function(e,t,n){o&&o(e,t,n)},function(o,r){if(o)cc.log(o);else if(!i.getUI(e)){var s=cc.instantiate(r);s.parent=i.uiRoot,t&&(s.zIndex=t);var c=s.getComponent(e);c.tag=e,i.uiList.push(c),n&&n(a)}})},e.prototype.closeUI=function(e){for(var t=0;t<this.uiList.length;++t)if(this.uiList[t].tag===e)return this.uiList[t].node.destroy(),void this.uiList.splice(t,1)},e.prototype.showUI=function(e,t){var n=this,o=this.getUI(e);o?(o.node.active=!0,o.onShow(),t&&t()):this.openUI(e,0,function(){t&&t(),n.getUI(e).onShow()})},e.prototype.hideUI=function(e){var t=this.getUI(e);t&&(t.node.active=!1)},e.prototype.getUI=function(e){for(var t=0;t<this.uiList.length;++t)if(this.uiList[t].tag===e)return this.uiList[t];return null},e}();n.UIManager=o,cc._RF.pop()},{}],affirmTips:[function(e,t,n){"use strict";cc._RF.push(t,"67e25WAGoRADq1zkpxqqwdF","affirmTips"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),i=e("../../Manager/UIManager"),a=cc._decorator,r=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.NodeDes=null,t.title=null,t.des=null,t.close=null,t.ok=null,t.sp_BgAnimator=null,t.sp_lightAnimator=null,t.callback=null,t}var n;return __extends(t,e),n=t,t.prototype.start=function(){},t.prototype.init=function(e,t,n){this.title.node.active=!1,this.des.node.active=!0,this.type=e,this.callback=n,this.des.string=t,this.callback=n},t.prototype.OnClickClose=function(){},t.prototype.TipsAnimatorScale=function(e){e.stopAllActions();var t=cc.sequence(cc.delayTime(1),cc.scaleTo(.2,1,1));e.runAction(t)},t.prototype.OnClickOk=function(){console.log("\u786e\u8ba4"),i.UIManager.getInstance().closeUI(n),this.callback(1)},t.prototype.OnClickCancel=function(){console.log("\u53d6\u6d88"),i.UIManager.getInstance().closeUI(n),this.callback(0)},t.className="affirmTips",__decorate([s(cc.Node)],t.prototype,"NodeDes",void 0),__decorate([s(cc.Label)],t.prototype,"title",void 0),__decorate([s(cc.Label)],t.prototype,"des",void 0),__decorate([s(cc.Button)],t.prototype,"close",void 0),__decorate([s(cc.Button)],t.prototype,"ok",void 0),__decorate([s(cc.Button),s(sp.Skeleton)],t.prototype,"sp_BgAnimator",void 0),__decorate([s(sp.Skeleton)],t.prototype,"sp_lightAnimator",void 0),t=n=__decorate([r],t)}(o.BaseUI);n.affirmTips=c,cc._RF.pop()},{"../../Manager/UIManager":"UIManager","../BaseUI":"BaseUI"}]},{},["BaseConfigContainer","ConstValue","DaAnData","GameData","ListenerType","NetWork","GameMain","AudioManager","ListenerManager","TimeManager","UIManager","BaseUI","AnswerItem","OverTips","Tip","affirmTips","GamePanel","LoadingUI","SubmissionPanel","TeacherPanel","TipUI","TitleNode","Step","Tools","AdaptiveScreen","FadeUIPlugin","LogWrap","MathExtension","StringExtension","UIHelp","ShaderComponent","ShaderLab","ShaderManager","ShaderMaterial"]);