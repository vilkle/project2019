window.__require=function e(t,n,o){function r(a,c){if(!n[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return r(t[a][1][e]||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)r(o[a]);return r}({AdaptiveScreen:[function(e,t,n){"use strict";cc._RF.push(t,"ba00bud/zlDiY6tClWPdHIa","AdaptiveScreen"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,i=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgNode=null,t.viewWidth=640,t.viewHeight=1136,t}return __extends(t,e),t.prototype.onLoad=function(){this.screenAdapter()},t.prototype.start=function(){this.viewUp()},t.prototype.screenAdapter=function(){if(cc.Canvas.instance){this.stage=cc.Canvas.instance.node;var e=cc.Canvas.instance,t=cc.view.getFrameSize();t.width/t.height<e.designResolution.width/e.designResolution.height?(e.fitWidth=!0,e.fitHeight=!1):(e.fitHeight=!0,e.fitWidth=!1)}},t.prototype.viewUp=function(){var e=cc.winSize,t=e.width/this.viewWidth,n=e.height/this.viewHeight;this.bgNode.scale=1*Math.max(t,n)},__decorate([i({type:cc.Node,tooltip:"\u5168\u5c4f\u80cc\u666f\u56fe\u7247\uff0c\u7528\u4e8e\u81ea\u9002\u5e94"})],t.prototype,"bgNode",void 0),__decorate([i],t.prototype,"viewWidth",void 0),__decorate([i],t.prototype,"viewHeight",void 0),t=__decorate([r],t)}(cc.Component);n.default=a,cc._RF.pop()},{}],AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"16d7aVnmU1PQrpFj9P1Fxvb","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Data/ConstValue"),r=function(){function e(){this.bgm=""}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.playSound=function(e,t,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null);var a=o.ConstValue.AUDIO_DIR+e;cc.loader.loadRes(a,cc.AudioClip,function(e,o){if(e)cc.error(e);else{var a=cc.audioEngine.play(o,t||!1,n||1);r&&r(a),i&&cc.audioEngine.setFinishCallback(a,i)}})},e.prototype.stopAudio=function(e){cc.audioEngine.stop(e)},e.prototype.stopAll=function(){cc.audioEngine.stopAll()},e.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},e.prototype.resumeAll=function(){cc.audioEngine.resumeAll()},e.prototype.playBGM=function(e){if(this.bgm!=e){this.bgm=e,cc.audioEngine.stopMusic();var t=o.ConstValue.AUDIO_DIR+e;cc.loader.loadRes(t,cc.AudioClip,function(e,t){e?cc.error(e):cc.audioEngine.playMusic(t,!0)})}},e.prototype.resumeBGM=function(){cc.audioEngine.stopMusic();var e=o.ConstValue.AUDIO_DIR+this.bgm;cc.loader.loadRes(e,cc.AudioClip,function(e,t){e?cc.error(e):cc.audioEngine.playMusic(t,!0)})},e.instance=null,e}();n.AudioManager=r,cc._RF.pop()},{"../Data/ConstValue":"ConstValue"}],BaseConfigContainer:[function(e,t,n){"use strict";cc._RF.push(t,"a9280QRTmRIUqfgpuhZqA92","BaseConfigContainer"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e.prototype,"tag",{get:function(){return this.mTag},set:function(e){this.mTag=e},enumerable:!0,configurable:!0}),e}();n.BaseConfigContainer=o,cc._RF.pop()},{}],BaseUI:[function(e,t,n){"use strict";cc._RF.push(t,"c6da4j3MGhPfIxwls9tY6iS","BaseUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Data/ConstValue"),r=e("../Manager/ListenerManager"),i=cc._decorator,a=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.mData},set:function(e){this.mData=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tag",{get:function(){return this.mTag},set:function(e){this.mTag=e},enumerable:!0,configurable:!0}),t.getUrl=function(){return cc.log(this.className),o.ConstValue.PREFAB_UI_DIR+this.className},t.prototype.onDestroy=function(){r.ListenerManager.getInstance().removeAll(this)},t.prototype.onShow=function(){cc.log("BaseUI onShow")},t.className="BaseUI",t=__decorate([a],t)}(cc.Component));n.BaseUI=c,cc._RF.pop()},{"../Data/ConstValue":"ConstValue","../Manager/ListenerManager":"ListenerManager"}],ConstValue:[function(e,t,n){"use strict";cc._RF.push(t,"66b51obcd1Mi4dcboc3fwIs","ConstValue"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.IS_EDITIONS=!0,e.IS_TEACHER=!0,e.CONFIG_FILE_DIR="config/",e.PREFAB_UI_DIR="prefab/ui/panel/",e.AUDIO_DIR="audio/",e.CoursewareKey="X0d4WoA3xFkEPE^p%oFNFwvE",e}();n.ConstValue=o,cc._RF.pop()},{}],CustomTypes:[function(e,t,n){"use strict";cc._RF.push(t,"d2d70bGmsJOAJetl6yMvak0","CustomTypes"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(){}}();n.AnswerData=o,cc._RF.pop()},{}],DaAnData:[function(e,t,n){"use strict";cc._RF.push(t,"a93adxzfY9MGLm/6L4av8l2","DaAnData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.checkpointsNum=0,this.countsArr=[],this.goodsArr=[],this.submitEnable=!1}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();n.DaAnData=o,cc._RF.pop()},{}],DataReporting:[function(e,t,n){"use strict";cc._RF.push(t,"fcbb2jwzKhJwKls3NHmiFBh","DataReporting"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ConstValue"),r=cc._decorator,i=r.ccclass,a=(r.property,function(){function e(){}var t;return t=e,e.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},e.prototype.dispatchEvent=function(e,t){void 0===t&&(t=null),o.ConstValue.IS_EDITIONS&&(t?courseware.page.sendToParent(e,t):courseware.page.sendToParent(e))},e.prototype.addEvent=function(e,t){o.ConstValue.IS_EDITIONS&&courseware.page.on(e,t)},e.isRepeatReport=!0,e=t=__decorate([i],e)}());n.default=a,cc._RF.pop()},{"./ConstValue":"ConstValue"}],Dictionary:[function(e,t,n){"use strict";cc._RF.push(t,"cc667V2/zFJtI7/GBev9gvA","Dictionary"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./util"),r=function(){function e(e){this.table={},this.nElements=0,this.toStr=e||o.defaultToString}return e.prototype.getValue=function(e){var t=this.table["$"+this.toStr(e)];if(!o.isUndefined(t))return t.value},e.prototype.setValue=function(e,t){if(!o.isUndefined(e)&&!o.isUndefined(t)){var n,r="$"+this.toStr(e),i=this.table[r];return o.isUndefined(i)?(this.nElements++,n=void 0):n=i.value,this.table[r]={key:e,value:t},n}},e.prototype.remove=function(e){var t="$"+this.toStr(e),n=this.table[t];if(!o.isUndefined(n))return delete this.table[t],this.nElements--,n.value},e.prototype.keys=function(){var e=[];for(var t in this.table)if(o.has(this.table,t)){var n=this.table[t];e.push(n.key)}return e},e.prototype.values=function(){var e=[];for(var t in this.table)if(o.has(this.table,t)){var n=this.table[t];e.push(n.value)}return e},e.prototype.forEach=function(e){for(var t in this.table)if(o.has(this.table,t)){var n=this.table[t];if(!1===e(n.key,n.value))return}},e.prototype.containsKey=function(e){return!o.isUndefined(this.getValue(e))},e.prototype.clear=function(){this.table={},this.nElements=0},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){var e="{";return this.forEach(function(t,n){e+="\n\t"+t+" : "+n}),e+"\n}"},e}();n.default=r,cc._RF.pop()},{"./util":"util"}],ErrorPanel:[function(e,t,n){"use strict";cc._RF.push(t,"78373xfPadEJ5IFn4sizh3z","ErrorPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),r=e("../../Manager/UIManager"),i=e("../../Manager/AudioManager"),a=e("../../Http/NetWork"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.biaoTi=null,t.shuoMing=null,t.tiShi=null,t.btnLab=null,t.btn=null,t.isClose=!1,t}var n;return __extends(t,e),n=t,t.prototype.start=function(){},t.prototype.onLoad=function(){},t.prototype.setPanel=function(e,t,n,o,r,c){void 0===c&&(c=!1);var s={shuoMing:e,biaoTi:t,tiShi:n};a.NetWork.getInstance().LogJournalReport("ErrorPanelLog",s),i.AudioManager.getInstance().playSound("sfx_erro",!1,1),this.shuoMing.string=e,this.isClose=c,this.callback=r,this.biaoTi.string=t||this.biaoTi.string,this.tiShi.string=n||this.tiShi.string,this.btnLab.string=o||this.btnLab.string,this.btn.interactable=this.isClose},t.prototype.onBtnClick=function(){i.AudioManager.getInstance().playSound("sfx_buttn",!1,1),this.callback&&this.callback(),this.isClose&&r.UIManager.getInstance().closeUI(n)},t.className="ErrorPanel",__decorate([l(cc.Label)],t.prototype,"biaoTi",void 0),__decorate([l(cc.Label)],t.prototype,"shuoMing",void 0),__decorate([l(cc.Label)],t.prototype,"tiShi",void 0),__decorate([l(cc.Label)],t.prototype,"btnLab",void 0),__decorate([l(cc.Button)],t.prototype,"btn",void 0),t=n=__decorate([s],t)}(o.BaseUI);n.default=u,cc._RF.pop()},{"../../Http/NetWork":"NetWork","../../Manager/AudioManager":"AudioManager","../../Manager/UIManager":"UIManager","../BaseUI":"BaseUI"}],FadeUIPlugin:[function(e,t,n){"use strict";cc._RF.push(t,"2fe78Vyt/NInb1oC42+tpUk","FadeUIPlugin"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,i=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delay=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=cc.delayTime(this.delay),t=cc.scaleTo(.5,2,2),n=cc.scaleTo(.5,0,0),o=cc.scaleTo(.5,1,1),r=cc.sequence(e,t,n,o);this.node.runAction(r)},__decorate([i],t.prototype,"delay",void 0),t=__decorate([r],t)}(cc.Component);n.FadeUIPlugin=a,cc._RF.pop()},{}],GameData:[function(e,t,n){"use strict";cc._RF.push(t,"65c35Ym/oRKD6h93ZiyEFOw","GameData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();n.GameData=o,cc._RF.pop()},{}],GameMain:[function(e,t,n){"use strict";cc._RF.push(t,"df13ad6CdtFhp9uucAXsIC/","GameMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=document.getElementById("loading-full");e&&(e.style.display="none")},t.prototype.start=function(){},t.prototype.update=function(e){},t=__decorate([r],t)}(cc.Component));n.GameMain=i,cc._RF.pop()},{}],GamePanel:[function(e,t,n){"use strict";cc._RF.push(t,"34462hB2kdJ5ZjQOSTnliUY","GamePanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),r=e("../../Http/NetWork"),i=e("../../Data/DataReporting"),a=e("../../Data/ConstValue"),c=e("../../Data/DaAnData"),s=e("../../Manager/UIManager"),l=e("./UploadAndReturnPanel"),u=e("../../Utils/UIHelp"),p=e("../../Manager/AudioManager"),d=cc._decorator,h=d.ccclass,g=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.diamondNode=null,t.touchNode=null,t.miya=null,t.light1=null,t.light2=null,t.goods=null,t.goodAct=null,t.slotPrefab=null,t.slotNode=null,t.ball=null,t.bottle=null,t.crown=null,t.bubble=null,t.countLabel=null,t.button=null,t.placementArea=null,t.bagNode=null,t.bg=null,t.checkpointsNum=0,t.countsArr=[],t.goodsArr=[],t.slotArr=[],t.answerArr=[],t.checkpointIndex=1,t.diamondArr=[[],[],[],[]],t.touchTarget=null,t.overNum=0,t.overState=2,t.eventvalue={isResult:1,isLevel:1,levelData:[],result:4},t}return __extends(t,e),t.prototype.start=function(){var e=this;this.bg.on(cc.Node.EventType.TOUCH_START,function(){e.overState=2}),a.ConstValue.IS_TEACHER?(s.UIManager.getInstance().openUI(l.default),this.checkpointsNum=c.DaAnData.getInstance().checkpointsNum,this.countsArr=c.DaAnData.getInstance().countsArr,this.goodsArr=c.DaAnData.getInstance().goodsArr,this.startAction(),this.addSlot(),this.addData()):this.getNet();for(var t=0;t<this.diamondNode.children.length;t++)for(var n=0;n<this.diamondNode.children[t].children.length;n++)this.diamondNode.children[t].children[n].opacity=0;i.default.getInstance().addEvent("end_game",this.onEndGame.bind(this))},t.prototype.addData=function(){for(var e=0;e<this.checkpointsNum;e++)this.eventvalue.levelData.push({answer:this.countsArr[e],subject:null,result:4})},t.prototype.onLoad=function(){},t.prototype.onEndGame=function(){i.default.isRepeatReport&&(i.default.getInstance().dispatchEvent("addLog",{eventType:"clickSubmit",eventValue:JSON.stringify(this.eventvalue)}),i.default.isRepeatReport=!1),i.default.getInstance().dispatchEvent("end_finished",{eventType:"activity",eventValue:this.overState})},t.prototype.startAction=function(){for(var e=this,t=0;t<this.diamondNode.children.length;t++)for(var n=0;n<this.diamondNode.children[t].children.length;n++)this.diamondNode.children[t].children[n].opacity=0,this.diamondNode.children[t].children[n].children[0].active=!0;var o=function(t){for(var n=function(n){r.diamondNode.children[t].children[n].active=!0,setTimeout(function(){e.diamondNode.children[t].children[n].runAction(cc.sequence(cc.fadeIn(.1),cc.delayTime(.2),cc.callFunc(function(){e.diamondNode.children[t].children[n].children[0].active=!1})))},100*n)},o=0;o<r.diamondNode.children[t].children.length;o++)n(o)},r=this;for(t=0;t<this.diamondNode.children.length;t++)o(t);this.magic()},t.prototype.getDiamond=function(){this.diamondArr=[[],[],[],[]];for(var e=0;e<this.diamondNode.children.length;e++)for(var t=0;t<this.diamondNode.children[e].children.length;t++)this.diamondArr[e][t]=this.diamondNode.children[e].children[t];this.addListenerOnDiamond(),this.addListenerOnSlot()},t.prototype.magic=function(){var e=this;this.goods.active=!1,this.goods.setPosition(cc.v2(0,-101)),0==this.goodsArr[this.checkpointIndex-1]?this.goods.getComponent(cc.Sprite).spriteFrame=this.ball:1==this.goodsArr[this.checkpointIndex-1]?this.goods.getComponent(cc.Sprite).spriteFrame=this.bottle:2==this.goodsArr[this.checkpointIndex-1]&&(this.goods.getComponent(cc.Sprite).spriteFrame=this.crown),p.AudioManager.getInstance().playSound("sfx_eoopn",!1),this.miya.setAnimation(0,"boom",!1),this.miya.setCompleteListener(function(t){"boom"==t.animation.name&&(0==e.goodsArr[e.checkpointIndex-1]?e.talk("\u60f3\u8981\u76ae\u7403\u4e48\uff1f\u7ed9\u6211"+e.countsArr[e.checkpointIndex-1]+"\u4e2a\u94bb\u77f3\u5427\uff01"):1==e.goodsArr[e.checkpointIndex-1]?e.talk("\u60f3\u8981\u9152\u74f6\u4e48\uff1f\u7ed9\u6211"+e.countsArr[e.checkpointIndex-1]+"\u4e2a\u94bb\u77f3\u5427\uff01"):2==e.goodsArr[e.checkpointIndex-1]&&e.talk("\u60f3\u8981\u738b\u51a0\u4e48\uff1f\u7ed9\u6211"+e.countsArr[e.checkpointIndex-1]+"\u4e2a\u94bb\u77f3\u5427\uff01"))}),setTimeout(function(){e.light1.node.active=!0,e.light1.setAnimation(0,"magic_01",!1),e.light1.setCompleteListener(function(t){"magic_01"==t.animation.name&&(e.light1.node.active=!1)})},1e3),setTimeout(function(){e.goods.active=!0,e.countLabel.string=e.countsArr[e.checkpointIndex-1].toString(),e.getDiamond()},1500)},t.prototype.talk=function(e){var t=this;this.bubble.getChildByName("label").getComponent(cc.Label).string=e,this.miya.setAnimation(0,"talk_02",!1),this.miya.setCompleteListener(function(e){"talk_02"==e.animation.name&&t.miya.setAnimation(0,"idle",!0)}),this.bubble.runAction(cc.scaleTo(.3,1,1))},t.prototype.addSlot=function(){this.slotArr=[];for(var e=this.countsArr[this.checkpointIndex-1],t=e/10,n=e%10;t>=1;){t=(e=Math.floor(e/10))/10,n+=e%10}if(n<=7)for(var o=350-190*n/2,r=0;r<n;r++){var i=cc.instantiate(this.slotPrefab);this.slotArr.push(i),this.slotNode.addChild(i);var a=o+190*r;i.setPosition(cc.v2(a,-27))}else for(r=0;r<n;r++){i=cc.instantiate(this.slotPrefab);if(this.slotArr.push(i),this.slotNode.addChild(i),r<7){a=(o=-315)+190*r;i.setPosition(cc.v2(a,70))}else{a=(o=350-190*(n-7)/2)+190*(r-7);i.setPosition(cc.v2(a,-155))}}},t.prototype.removeListenerOnDiamond=function(){for(var e=0;e<this.diamondArr.length;e++)for(var t=0;t<this.diamondArr[e].length;t++){var n=this.diamondArr[e][t];n.off(cc.Node.EventType.TOUCH_START),n.off(cc.Node.EventType.TOUCH_MOVE),n.off(cc.Node.EventType.TOUCH_END),n.off(cc.Node.EventType.TOUCH_CANCEL)}},t.prototype.addListenerOnDiamond=function(){for(var e=this,t=function(t){for(var o=0;o<n.diamondArr[t].length;o++){var r=n.diamondArr[t][o];r.zIndex=o+1,r.on(cc.Node.EventType.TOUCH_START,function(t){if(!e.touchTarget&&0!=t.target.opacity){e.touchTarget=t.target,e.touchNode.active=!0,e.touchNode.zIndex=100,t.target.opacity=0;var n=e.node.convertToNodeSpaceAR(t.currentTouch._point);e.touchNode.setPosition(n),e.touchNode.getChildByName("diamond").getComponent(cc.Sprite).spriteFrame=t.target.getComponent(cc.Sprite).spriteFrame}}),r.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(e.touchTarget==t.target){var n=e.node.convertToNodeSpaceAR(t.currentTouch._point);e.touchNode.setPosition(n);for(var o=0;o<e.slotArr.length;o++){if(e.slotArr[o].getChildByName("slot").getBoundingBox().contains(e.slotArr[o].convertToNodeSpaceAR(t.currentTouch._point))){e.slotArr[o].getChildByName("light").active=!0;for(var r=0;r<e.slotArr.length;r++)r!=o&&(e.slotArr[r].getChildByName("light").active=!1)}else e.overNum++;if(o==e.slotArr.length-1){if(e.overNum==e.slotArr.length)for(var i=0;i<e.slotArr.length;i++)e.slotArr[i].getChildByName("light").active=!1;e.overNum=0}}}}),r.on(cc.Node.EventType.TOUCH_END,function(t){t.target==e.touchTarget&&(e.touchNode.active=!1,t.target.opacity=255,e.touchTarget=null)}),r.on(cc.Node.EventType.TOUCH_CANCEL,function(n){if(n.target==e.touchTarget){for(var o=0,r=0;r<e.slotArr.length;r++)if(!e.slotArr[r].getChildByName("diamond").active&&e.slotArr[r].getChildByName("slot").getBoundingBox().contains(e.slotArr[r].convertToNodeSpaceAR(n.currentTouch._point))){var i=e.slotArr[r].getChildByName("diamond");i.active=!0,i.getComponent(cc.Sprite).spriteFrame=e.touchNode.getChildByName("diamond").getComponent(cc.Sprite).spriteFrame,e.answerArr[r]=t,o++}o>0?(p.AudioManager.getInstance().playSound("sfx_dimndst",!1),e.touchNode.active=!1,n.target.zIndex=0,e.isOver()):(p.AudioManager.getInstance().playSound("sfx_wrngdmd",!1),e.touchNode.active=!1,n.target.opacity=255);for(var a=0;a<e.slotArr.length;a++)e.slotArr[a].getChildByName("light").active=!1;e.touchTarget=null}})}},n=this,o=0;o<this.diamondArr.length;o++)t(o)},t.prototype.removeListenerOnSlot=function(){for(var e=0;e<this.slotArr.length;e++){var t=this.slotArr[e].getChildByName("slot");t.off(cc.Node.EventType.TOUCH_START),t.off(cc.Node.EventType.TOUCH_MOVE),t.off(cc.Node.EventType.TOUCH_END),t.off(cc.Node.EventType.TOUCH_CANCEL)}},t.prototype.addListenerOnSlot=function(){for(var e=this,t=function(t){var o=n.slotArr[t].getChildByName("slot");o.on(cc.Node.EventType.TOUCH_START,function(n){if(!e.touchTarget&&e.slotArr[t].getChildByName("diamond").active){e.touchTarget=n.target,e.touchNode.active=!0,e.touchNode.zIndex=100;var o=e.node.convertToNodeSpaceAR(n.currentTouch._point);e.touchNode.setPosition(o),e.touchNode.getChildByName("diamond").getComponent(cc.Sprite).spriteFrame=e.slotArr[t].getChildByName("diamond").getComponent(cc.Sprite).spriteFrame,e.slotArr[t].getChildByName("diamond").active=!1}}),o.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(e.touchTarget==t.target){var n=e.node.convertToNodeSpaceAR(t.currentTouch._point);e.touchNode.setPosition(n)}}),o.on(cc.Node.EventType.TOUCH_END,function(n){e.touchTarget==n.target&&(e.touchNode.active=!1,e.slotArr[t].getChildByName("diamond").active=!0,e.touchTarget=null)}),o.on(cc.Node.EventType.TOUCH_CANCEL,function(n){if(e.touchTarget==n.target){var o=e.answerArr[t];if(e.placementArea.children[o].getBoundingBox().contains(e.placementArea.convertToNodeSpaceAR(n.currentTouch._point)))for(var r=0;r<e.diamondArr[o].length;r++)0==e.diamondArr[o][r].opacity&&(p.AudioManager.getInstance().playSound("sfx_dimndst",!1),e.diamondArr[o][r].opacity=255,e.diamondArr[o][r].zIndex=r+1,e.touchNode.active=!1,r=e.diamondArr[o].length,e.answerArr[t]=0);else p.AudioManager.getInstance().playSound("sfx_wrngdmd",!1),e.touchNode.active=!1,e.slotArr[t].getChildByName("diamond").active=!0;e.touchTarget=null}})},n=this,o=0;o<this.slotArr.length;o++)t(o)},t.prototype.isOver=function(){for(var e=0,t=0;t<this.slotArr.length;t++)this.slotArr[t].getChildByName("diamond").active&&e++;e==this.slotArr.length?this.button.interactable=!0:this.button.interactable=!1},t.prototype.isRight=function(){for(var e=this,t=0,n=0;n<this.answerArr.length;n++)0==this.answerArr[n]?t+=1e3:1==this.answerArr[n]?t+=100:2==this.answerArr[n]?t+=10:3==this.answerArr[n]&&(t+=1);if(this.eventvalue.levelData[this.checkpointIndex-1].subject=t,this.eventvalue.result=2,console.log("--",this.eventvalue),t==this.countsArr[this.checkpointIndex-1]){this.eventvalue.levelData[this.checkpointIndex-1].result=1,this.checkpointIndex==this.checkpointsNum&&(this.eventvalue.result=1,this.overState=1,console.log("--",this.eventvalue),i.default.getInstance().dispatchEvent("addLog",{eventType:"clickSubmit",eventValue:JSON.stringify(this.eventvalue)})),this.removeListenerOnDiamond(),this.removeListenerOnSlot(),this.bagNode.setPosition(cc.v2(-375,-454)),this.goodAct.getComponent(cc.Sprite).spriteFrame=this.goods.getComponent(cc.Sprite).spriteFrame;var o=cc.spawn(cc.moveBy(.2,cc.v2(30,30)),cc.scaleTo(.2,1.1,1)),r=cc.spawn(cc.moveBy(.2,cc.v2(-60,-60)),cc.scaleTo(.2,.9,1)),a=cc.spawn(cc.moveBy(.2,cc.v2(30,30)),cc.scaleTo(.2,1,1));this.bagNode.runAction(cc.sequence(cc.moveBy(.3,cc.v2(200,200)),o,r,a,cc.callFunc(function(){})));var s=cc.callFunc(function(){e.goodAct.active=!1,e.goodAct.setPosition(cc.v2(669,-499)),e.bubble.runAction(cc.scaleTo(.3,0,0)),e.bagNode.runAction(cc.sequence(cc.moveBy(.2,cc.v2(40,40)),cc.moveBy(.2,cc.v2(-40,-40)),cc.moveBy(.3,cc.v2(-200,-200)),h))}),l=cc.callFunc(function(){e.light2.node.active=!0,e.light2.setAnimation(0,"line_01",!1),e.light2.setCompleteListener(function(t){e.light2.node.active=!1})}),d=cc.callFunc(function(){e.goods.active=!1,e.goodAct.active=!0,e.goodAct.runAction(cc.sequence(l,cc.moveTo(.8,cc.v2(-219,22)).easing(cc.easeSineInOut()),s))}),h=cc.callFunc(function(){e.checkpointIndex==e.checkpointsNum?1==e.checkpointsNum?(c.DaAnData.getInstance().submitEnable=!0,u.UIHelp.showOverTip(2,"\u7b54\u9898\u597d\u5feb\u5466\uff0c\u8bf7\u7b49\u5f85\u8001\u5e08\u6536\u9898\u5427\u3002",!1,"",null,null,"\u6311\u6218\u6210\u529f")):(c.DaAnData.getInstance().submitEnable=!0,u.UIHelp.showOverTip(2,"\u7b54\u9898\u597d\u5feb\u5466\uff0c\u8bf7\u7b49\u5f85\u8001\u5e08\u6536\u9898\u5427\u3002",!1,"",null,null,"\u95ef\u5173\u6210\u529f")):u.UIHelp.showOverTip(1,"\u8fc7\u5173\u6210\u529f\uff01",!0,"\u4e0b\u4e00\u5173",null,function(){e.nextCheckpoint()})});this.goods.runAction(cc.sequence(cc.moveBy(.3,cc.v2(0,80)),cc.moveBy(.2,cc.v2(0,-10)),cc.moveBy(.2,cc.v2(0,10)),cc.moveBy(.2,cc.v2(0,-10)),cc.moveBy(.2,cc.v2(0,10)),d)),this.light1.node.active=!0,this.light1.setAnimation(0,"magic_02",!1),this.light1.setCompleteListener(function(t){"magic_02"==t.animation.name&&(e.light1.node.active=!1)}),p.AudioManager.getInstance().playSound("sfx_gtcrwn",!1),this.miya.setAnimation(0,"true_01",!1),this.miya.setCompleteListener(function(t){"true_01"==t.animation.name&&e.miya.setAnimation(0,"idle",!0)})}else this.eventvalue.levelData[this.checkpointIndex-1].result=2,this.miya.setAnimation(0,"false_01",!1),this.miya.setCompleteListener(function(t){"true_01"==t.animation.name&&e.miya.setAnimation(0,"idle",!0)}),u.UIHelp.showTip("\u518d\u60f3\u4e00\u60f3\u5427")},t.prototype.nextCheckpoint=function(){for(var e=0;e<this.diamondNode.children.length;e++)for(var t=0;t<this.diamondNode.children[e].children.length;t++)this.diamondArr[e][t].zIndex=t+1;this.checkpointIndex++,this.button.interactable=!1,this.countLabel.string="0";for(e=0;e<this.slotArr.length;e++)this.slotArr[e].destroy();this.slotArr=[],this.answerArr=[],this.startAction(),this.addSlot()},t.prototype.onDestroy=function(){},t.prototype.onShow=function(){},t.prototype.setPanel=function(){},t.prototype.getNet=function(){r.NetWork.getInstance().httpRequest(r.NetWork.GET_QUESTION+"?courseware_id="+r.NetWork.courseware_id,"GET","application/json;charset=utf-8",function(e,t){if(!e){var n=t;if(Array.isArray(n.data))return;var o=JSON.parse(n.data.courseware_content);null!=o&&(o.checkpointsNum?this.checkpointsNum=o.checkpointsNum:console.log("\u7f51\u7edc\u8bf7\u6c42\u6570\u636echeckpointsNum\u4e3a\u7a7a"),o.countsArr?this.countsArr=o.countsArr:console.log("\u7f51\u7edc\u8bf7\u6c42\u6570\u636ecountsArr\u4e3a\u7a7a"),o.goodsArr?this.goodsArr=o.goodsArr:console.log("\u7f51\u7edc\u8bf7\u6c42\u6570\u636egoodsArr\u4e3a\u7a7a"),this.startAction(),this.addSlot(),this.addData())}}.bind(this),null)},t.className="GamePanel",__decorate([g(cc.Node)],t.prototype,"diamondNode",void 0),__decorate([g(cc.Node)],t.prototype,"touchNode",void 0),__decorate([g(sp.Skeleton)],t.prototype,"miya",void 0),__decorate([g(sp.Skeleton)],t.prototype,"light1",void 0),__decorate([g(sp.Skeleton)],t.prototype,"light2",void 0),__decorate([g(cc.Node)],t.prototype,"goods",void 0),__decorate([g(cc.Node)],t.prototype,"goodAct",void 0),__decorate([g(cc.Prefab)],t.prototype,"slotPrefab",void 0),__decorate([g(cc.Node)],t.prototype,"slotNode",void 0),__decorate([g(cc.SpriteFrame)],t.prototype,"ball",void 0),__decorate([g(cc.SpriteFrame)],t.prototype,"bottle",void 0),__decorate([g(cc.SpriteFrame)],t.prototype,"crown",void 0),__decorate([g(cc.Node)],t.prototype,"bubble",void 0),__decorate([g(cc.Label)],t.prototype,"countLabel",void 0),__decorate([g(cc.Button)],t.prototype,"button",void 0),__decorate([g(cc.Node)],t.prototype,"placementArea",void 0),__decorate([g(cc.Node)],t.prototype,"bagNode",void 0),__decorate([g(cc.Node)],t.prototype,"bg",void 0),t=__decorate([h],t)}(o.BaseUI);n.default=f,cc._RF.pop()},{"../../Data/ConstValue":"ConstValue","../../Data/DaAnData":"DaAnData","../../Data/DataReporting":"DataReporting","../../Http/NetWork":"NetWork","../../Manager/AudioManager":"AudioManager","../../Manager/UIManager":"UIManager","../../Utils/UIHelp":"UIHelp","../BaseUI":"BaseUI","./UploadAndReturnPanel":"UploadAndReturnPanel"}],ListenerManager:[function(e,t,n){"use strict";cc._RF.push(t,"05dc2tRAiFMobMbxaPK4NIf","ListenerManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t,n){void 0===n&&(n=!1),this.mIsOnce=!1,this.mListener=e,this.mArgArray=t,this.mIsOnce=n}return Object.defineProperty(e.prototype,"listener",{get:function(){return this.mListener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"argArray",{get:function(){return this.mArgArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOnce",{get:function(){return this.mIsOnce},set:function(e){this.mIsOnce=e},enumerable:!0,configurable:!0}),e}();n.Delegate=o;var r=function(){function e(){this.mListenerMap=new Map}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.has=function(e,t,n){return null!==this.find(e,t,n)},e.prototype.trigger=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(!e)return console.error("Listener type is null!"),!1;var r=[],i=[],a=this.mListenerMap.get(e);a&&(a.forEach(function(e,t){for(var n=0,o=e;n<o.length;n++){var c=o[n];r.push(c),i.push(t)}for(var s=e.length-1;s>=0;--s)e[s].isOnce&&e.splice(s,1);e.length<=0&&a.delete(t)}),a.size<=0&&this.mListenerMap.delete(e));for(var c=r.length,s=0;s<c;s++){var l=r[s];(t=l.listener).call.apply(t,[i[s]].concat(l.argArray,n))}return c>0},e.prototype.add=function(e,t,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];this.addListener.apply(this,[e,t,n,!1].concat(o))},e.prototype.addOnce=function(e,t,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];this.addListener.apply(this,[e,t,n,!0].concat(o))},e.prototype.remove=function(e,t,n,o){this.removeBy(function(r,i,a){return(!e||e===r)&&((!t||t===i)&&((!n||n===a.listener)&&!(o&&!a.isOnce)))})},e.prototype.removeAll=function(e){var t=this;this.mListenerMap.forEach(function(n,o){n.delete(e),n.size<=0&&t.mListenerMap.delete(o)})},e.prototype.addListener=function(e,t,n,r){for(var i=[],a=4;a<arguments.length;a++)i[a-4]=arguments[a];var c=this.find(e,t,n);if(c)c.isOnce=r,console.error("Listener is already exist!");else{var s=new o(n,i,r);this.mListenerMap.get(e).get(t).push(s)}},e.prototype.removeBy=function(e){var t=this;e&&this.mListenerMap.forEach(function(n,o){n.forEach(function(t,r){for(var i=t.length-1;i>=0;--i){var a=t[i];e(o,r,a)&&t.splice(i,1)}t.length<=0&&n.delete(r)}),n.size<=0&&t.mListenerMap.delete(o)})},e.prototype.find=function(e,t,n){if(!e)return console.error("Listener type is null!"),null;if(!t)return console.error("Caller type is null!"),null;if(!n)return console.error("Listener is null!"),null;var o,r;this.mListenerMap.has(e)?o=this.mListenerMap.get(e):(o=new Map,this.mListenerMap.set(e,o)),o.has(t)?r=o.get(t):(r=[],o.set(t,r));for(var i=0,a=r;i<a.length;i++){var c=a[i];if(c.mListener===n)return c}return null},e}();n.ListenerManager=r,cc._RF.pop()},{}],ListenerType:[function(e,t,n){"use strict";cc._RF.push(t,"8ea11Tcb4BI7ojchoTKxYZm","ListenerType"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.Test="Test",e.GameStart="GameStart",e.UpdateMainUI="UpdateMainUI",e.LoopUpdate="LoopUpdate",e.OnEndOfInput="OnEndOfInput",e.OnDaAnShanChu="OnDaAnShanChu",e.OnDaAnZengJia="OnDaAnZengJia",e.OnEditStateSwitching="OnEditStateSwitching",e}();n.ListenerType=o,cc._RF.pop()},{}],LoadingUI:[function(e,t,n){"use strict";cc._RF.push(t,"cf8a66RO2hJWJN7q1dt4/zn","LoadingUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),r=e("../../Data/ConstValue"),i=e("./TeacherPanel"),a=e("./GamePanel"),c=e("../../Manager/UIManager"),s=e("../../Http/NetWork"),l=e("../../Data/DataReporting"),u=e("../../Manager/TimeManager"),p=cc._decorator,d=p.ccclass,h=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.progressLabel=null,t.dragonNode=null,t.isLoadStart=!1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;s.NetWork.getInstance().GetRequest();l.default.getInstance().dispatchEvent("load start");var t=r.ConstValue.IS_TEACHER?i.default:a.default;c.UIManager.getInstance().openUI(t,null,0,function(){s.NetWork.getInstance().LogJournalReport("ResLoadEnd",{curTime:u.TimeManager.getInstance().getNowFormatDate()}),l.default.getInstance().dispatchEvent("load end"),l.default.getInstance().dispatchEvent("start"),e.node.active=!1},function(t,n,o){e.isLoadStart||(e.isLoadStart=!0,s.NetWork.getInstance().LogJournalReport("ResLoadStart",{curTime:u.TimeManager.getInstance().getNowFormatDate()})),e.progressBar.progress=t/n;var r=Math.round(t/n*100);l.default.getInstance().dispatchEvent("loading",r),e.progressLabel.string=r.toString()+"%";var i=t/n*609-304;e.dragonNode.x=i})},t.className="LoadingUI",__decorate([h(cc.ProgressBar)],t.prototype,"progressBar",void 0),__decorate([h(cc.Label)],t.prototype,"progressLabel",void 0),__decorate([h(cc.Node)],t.prototype,"dragonNode",void 0),t=__decorate([d],t)}(o.BaseUI);n.LoadingUI=g,cc._RF.pop()},{"../../Data/ConstValue":"ConstValue","../../Data/DataReporting":"DataReporting","../../Http/NetWork":"NetWork","../../Manager/TimeManager":"TimeManager","../../Manager/UIManager":"UIManager","../BaseUI":"BaseUI","./GamePanel":"GamePanel","./TeacherPanel":"TeacherPanel"}],LogWrap:[function(e,t,n){"use strict";cc._RF.push(t,"615f7lsxLNDWJSqVJoRIFW3","LogWrap"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Data/ConstValue"),r=function(){function e(){}return e.getDateString=function(){var e=new Date,t=e.getHours().toString(),n="";return n+=(1==t.length?"0"+t:t)+":",n+=(1==(t=e.getMinutes().toString()).length?"0"+t:t)+":",n+=(1==(t=e.getSeconds().toString()).length?"0"+t:t)+":",1==(t=e.getMilliseconds().toString()).length&&(t="00"+t),2==t.length&&(t="0"+t),n="["+(n+=t)+"]"},e.stack=function(e){var t=(new Error).stack.split("\n");t.shift();var n=[];t.forEach(function(e){var t,o=(e=e.substring(7)).split(" ");o.length<2?n.push(o[0]):n.push(((t={})[o[0]]=o[1],t))});var o=[];if(e<n.length-1)for(var r in n[e])o.push(r);var i=o[0].split(".");return i[0]+".js->"+i[1]+": "},e.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=console.log||cc.log;o.ConstValue.IS_EDITIONS||r.call(this,"%s%s:"+cc.js.formatStr.apply(cc,arguments),e.stack(2),e.getDateString())},e.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=console.log||cc.log;o.ConstValue.IS_EDITIONS||r.call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:#00CD00;",e.stack(2),e.getDateString())},e.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=console.log||cc.log;o.ConstValue.IS_EDITIONS||r.call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:#ee7700;",e.stack(2),e.getDateString())},e.err=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=console.log||cc.log;o.ConstValue.IS_EDITIONS||r.call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:red",e.stack(2),e.getDateString())},e}();n.LogWrap=r,cc._RF.pop()},{"../Data/ConstValue":"ConstValue"}],MathExtension:[function(e,t,n){"use strict";cc._RF.push(t,"81407Q2vf9Ezor3KOYrFKb8","MathExtension"),Math.randomRangeInt=function(e,t){var n=Math.random();return 1===n&&(n-=Number.EPSILON),e+Math.floor(n*(t-e))},Math.randomRangeFloat=function(e,t){return e+Math.random()*(t-e)},Math.fmod=function(e,t){return e-Math.floor(e/t)*t},cc._RF.pop()},{}],MathUtils:[function(e,t,n){"use strict";cc._RF.push(t,"aa960SepSxHGal1p7xVIQi8","MathUtils"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.getAngle=function(e){return 180*e/Math.PI},e.prototype.getRadian=function(e){return e/180*Math.PI},e.prototype.getRadian2=function(e,t,n,o){var r=n-e,i=o-t;return Math.atan2(i,r)},e.prototype.getDistance=function(e,t){var n=t.x-e.x,o=t.y-e.y,r=n*n+o*o;return Math.sqrt(r)},e.prototype.limit=function(e,t){e=Math.min(e,t);var n=(t=Math.max(e,t))-e;return e+Math.random()*n},e.prototype.limitInteger=function(e,t){return Math.round(this.limit(e,t))},e.prototype.randomArray=function(e){return e[Math.floor(Math.random()*e.length)]},e.prototype.SagPoint=function(e,t,n,o){var r=(n.x-o.x)*(n.x-o.x)+(n.y-o.y)*(n.y-o.y),i=((e-n.x)*(o.x-n.x)+(t-n.y)*(o.y-n.y))/r,a=n.x+i*(o.x-n.x),c=n.y+i*(o.y-n.y);return new cc.Vec2(a,c)},e.prototype.extendedLinePoint=function(e,t,n){var o,r,i;return o=this.getDistance(e,t),t.x>e.x&&t.y>e.y?(r=n/o*Math.abs(e.x-t.x)+t.x,i=n/o*Math.abs(e.y-t.y)+t.y):t.x<e.x&&t.y>e.y?(r=-n/o*Math.abs(e.x-t.x)+t.x,i=n/o*Math.abs(e.y-t.y)+t.y):t.x<e.x&&t.y<e.y?(r=-n/o*Math.abs(e.x-t.x)+t.x,i=-n/o*Math.abs(e.y-t.y)+t.y):t.x>e.x&&t.y<e.y&&(r=n/o*Math.abs(e.x-t.x)+t.x,i=-n/o*Math.abs(e.y-t.y)+t.y),new cc.Vec2(r,i)},e.prototype.getTwoPointsRadian1=function(e,t){var n=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y),r=o/Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),i=Math.acos(r),a=Math.floor(180/(Math.PI/i));return t.x>e.x&&t.y<e.y&&(a=180-a),t.x==e.x&&t.y>e.y&&(a=180),t.x>e.x&&t.y==e.y&&(a=90),t.x<e.x&&t.y<e.y&&(a=180+a),t.x<e.x&&t.y==e.y&&(a=270),t.x<e.x&&t.y>e.y&&(a=360-a),a},e.prototype.getTwoPointsRadian2=function(e,t){var n=e.x-t.x,o=e.y-t.y;return-180*Math.atan2(o,n)/Math.PI-90},e.prototype.fingCrossPoint=function(e,t,n,o){var r=t.y-e.y,i=e.x-t.x,a=e.x*t.y-t.x*e.y,c=o.y-n.y,s=n.x-o.x,l=n.x*o.y-o.x*n.y,u=r*s-c*i;if(0==u)return null;var p=(a*s-l*i)/u,d=(r*l-c*a)/u;return new cc.Vec2(Math.floor(p),Math.floor(d))},e.prototype.accAdd=function(e,t){var n,o,r=0,i=0;try{r=e.toString().split(".")[1].length}catch(e){r=0}try{i=t.toString().split(".")[1].length}catch(e){i=0}if(o=Math.abs(r-i),n=Math.pow(10,Math.max(r,i)),o>0){var a=Math.pow(10,o);r>i?(e=Number(e.toString().replace(".","")),t=Number(t.toString().replace(".",""))*a):(e=Number(e.toString().replace(".",""))*a,t=Number(t.toString().replace(".","")))}else e=Number(e.toString().replace(".","")),t=Number(t.toString().replace(".",""));return(e+t)/n},e.prototype.accSub=function(e,t){var n,o=0,r=0;try{o=e.toString().split(".")[1].length}catch(e){o=0}try{r=t.toString().split(".")[1].length}catch(e){r=0}return((e*(n=Math.pow(10,Math.max(o,r)))-t*n)/n).toFixed(o>=r?o:r)},e.prototype.accMul=function(e,t){var n=0,o=e.toString(),r=t.toString();try{n+=o.split(".")[1].length}catch(e){}try{n+=r.split(".")[1].length}catch(e){}return Number(o.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,n)},e.prototype.accDiv=function(e,t){var n=0,o=0;try{n=e.toString().split(".")[1].length}catch(e){}try{o=t.toString().split(".")[1].length}catch(e){}return Number(e.toString().replace(".",""))/Number(t.toString().replace(".",""))*Math.pow(10,o-n)},e}();n.MathUtils=o,cc._RF.pop()},{}],NetWork:[function(e,t,n){"use strict";cc._RF.push(t,"9cd01aQNbFMUY4sUMN0yYH5","NetWork"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Data/ConstValue"),r=e("../Manager/UIManager"),i=e("../UI/panel/ErrorPanel"),a=function(){function e(){this.theRequest=null}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.httpRequest=function(t,n,a,c,s){if(void 0===c&&(c=null),void 0===s&&(s=""),!o.ConstValue.IS_TEACHER||e.title_id)if(o.ConstValue.IS_TEACHER||e.courseware_id&&e.user_id){var l=new XMLHttpRequest;l.open(n,t),l.timeout=1e4,l.setRequestHeader("Content-Type",a),l.withCredentials=!0,l.onreadystatechange=function(){if(console.log("httpRequest rsp status",l.status,"        xhr.readyState",l.readyState,"        xhr.responseText",l.responseText),4==l.readyState&&l.status>=200&&l.status<=400){var u=JSON.parse(l.responseText);c&&0==u.errcode?c(!1,u):o.ConstValue.IS_EDITIONS&&r.UIManager.getInstance().openUI(i.default,null,1e3,function(){r.UIManager.getInstance().getUI(i.default).setPanel(u.errmsg+",\u8bf7\u8054\u7cfb\u5ba2\u670d\uff01","","","\u786e\u5b9a",function(){e.getInstance().httpRequest(t,n,a,c,s)},!1)})}},l.ontimeout=function(l){o.ConstValue.IS_EDITIONS&&r.UIManager.getInstance().openUI(i.default,null,1e3,function(){r.UIManager.getInstance().getUI(i.default).setPanel("\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","","\u82e5\u91cd\u65b0\u8fde\u63a5\u65e0\u6548\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d","\u91cd\u65b0\u8fde\u63a5",function(){e.getInstance().httpRequest(t,n,a,c,s)},!0)}),console.log("httpRequest timeout"),c&&c(!0,null)},l.onerror=function(l){o.ConstValue.IS_EDITIONS&&r.UIManager.getInstance().openUI(i.default,null,1e3,function(){r.UIManager.getInstance().getUI(i.default).setPanel("\u7f51\u7edc\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","\u82e5\u91cd\u65b0\u8fde\u63a5\u65e0\u6548\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d","","\u91cd\u65b0\u8fde\u63a5",function(){e.getInstance().httpRequest(t,n,a,c,s)},!0)}),console.log("httpRequest error"),c&&c(!0,null)},l.send(s)}else r.UIManager.getInstance().openUI(i.default,null,1e3,function(){r.UIManager.getInstance().getUI(i.default).setPanel("\u5f02\u5e38\u7f16\u53f7\u4e3a001,\u8bf7\u8054\u7cfb\u5ba2\u670d\uff01","","","\u786e\u5b9a")});else r.UIManager.getInstance().openUI(i.default,null,1e3,function(){r.UIManager.getInstance().getUI(i.default).setPanel("URL\u53c2\u6570\u9519\u8bef,\u8bf7\u8054\u7cfb\u6280\u672f\u4eba\u5458\uff01","","","\u786e\u5b9a")})},e.prototype.GetRequest=function(){if(null!=this.theRequest)return this.theRequest;this.theRequest=new Object;var t=location.search;if(-1!=t.indexOf("?"))for(var n=t.substr(1).split("&"),o=0;o<n.length;o++)this.theRequest[n[o].split("=")[0]]=decodeURIComponent(n[o].split("=")[1]);return e.courseware_id=this.theRequest.id,e.title_id=this.theRequest.title_id,e.user_id=this.theRequest.user_id,e.empty=this.theRequest.empty,e.isLive=this.theRequest.isLive,this.LogJournalReport("CoursewareLogEvent",""),this.theRequest},e.prototype.LogJournalReport=function(t,n){o.ConstValue.IS_EDITIONS&&((new Image).src=(e.isOnlineEnv?"https://logserver.haibian.com/statistical/?type=7&":"https://ceshi-statistical.haibian.com/?type=7&")+"course_id="+this.GetRequest().id+"&chapter_id="+this.GetRequest().chapter_id+"&user_id="+this.GetRequest().user_id+"&subject="+this.GetRequest().subject+"&event="+t+"&identity=1&extra="+JSON.stringify({url:location,CoursewareKey:o.ConstValue.CoursewareKey,empty:this.GetRequest().empty,CoursewareName:"weizhiyuanli",data:n}))},e.isOnlineEnv=location.host.indexOf("ceshi-")<0&&location.host.indexOf("localhost")<0,e.isProtocol=/http:/.test(window.location.protocol),e.isLocal=/localhost/.test(window.location.href)||e.isProtocol,e.BASE=e.isOnlineEnv?"//courseware.haibian.com":e.isLocal?"//ceshi.courseware.haibian.com":"//ceshi_courseware.haibian.com",e.GET_QUESTION=e.BASE+"/get",e.GET_USER_PROGRESS=e.BASE+"/get/answer",e.GET_TITLE=e.BASE+"/get/title",e.ADD=e.BASE+"/add",e.MODIFY=e.BASE+"/modify",e.CLEAR=e.BASE+"/clear",e.courseware_id=null,e.title_id=null,e.user_id=null,e.empty=!1,e.chapter_id=null,e.subject=null,e.isLive=null,e}();n.NetWork=a,cc._RF.pop()},{"../Data/ConstValue":"ConstValue","../Manager/UIManager":"UIManager","../UI/panel/ErrorPanel":"ErrorPanel"}],OverTips:[function(e,t,n){"use strict";cc._RF.push(t,"d402btyepNJObcDSUkLUQcr","OverTips"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),r=e("../../UIComm/Tools"),i=e("../../Manager/UIManager"),a=e("../../Manager/AudioManager");(function(e){e[e.ZuoDaJieShu=0]="ZuoDaJieShu",e[e.ChuangGuanChengGong=1]="ChuangGuanChengGong",e[e.TiaoZhanJieShu=2]="TiaoZhanJieShu",e[e.TiaoZhanChengGong=3]="TiaoZhanChengGong",e[e.ChuangGuanJieShu=4]="ChuangGuanJieShu"})(n.Type_Tile||(n.Type_Tile={})),n.DefalutTitle=["\u4f5c\u7b54\u7ed3\u675f","\u95ef\u5173\u6210\u529f","\u6311\u6218\u7ed3\u675f","\u6311\u6218\u6210\u529f","\u95ef\u5173\u7ed3\u675f"];var c={"\u4f5c":"img_zuo","\u7b54":"img_da","\u7ed3":"img_jie","\u675f":"img_shu","\u6210":"img_cheng","\u529f":"img_gong","\u6311":"img_tiao","\u6218":"img_zhan","\u95ef":"img_chuang","\u5173":"img_guan"},s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=e.call(this)||this;return t.label_tip=null,t.spine_false=null,t.spine_true=null,t.spine_complete=null,t.buttonLabel=null,t.node_close=null,t.button=null,t.callback=null,t.btnCallback=null,t.endInAnimationOver=!1,t.img_titles=[],t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){cc.loader.loadRes("images/OverTips/word",cc.SpriteAtlas,function(e,t){})},t.prototype.start=function(){this.node_close.on(cc.Node.EventType.TOUCH_END,this.onClickClose,this)},t.prototype.onDisable=function(){this.node_close.off(cc.Node.EventType.TOUCH_END,this.onClickClose,this)},t.prototype.init=function(e,t,o,i,c,s,l){switch(void 0===t&&(t=""),void 0===o&&(o=!1),void 0===i&&(i=""),this.callback=c,this.spine_false.node.active=0==e,this.spine_true.node.active=1==e,this.spine_complete.node.active=2==e,this.label_tip.string=t,this.label_tip.node.active=!0,this.button.active=!!o,this.buttonLabel.string=i,this.btnCallback=s,e){case 0:r.Tools.playSpine(this.spine_false,"false",!1,this.delayClose.bind(this)),a.AudioManager.getInstance().playSound("sfx_genneg",!1,1);break;case 1:r.Tools.playSpine(this.spine_true,"true",!1,this.delayClose.bind(this)),a.AudioManager.getInstance().playSound("sfx_genpos",!1,1);break;case 2:if(this.spine_complete.node.active=!1,l||(l=n.DefalutTitle[0]),4!=l.length)return;for(var u=0;u<4;u++)this.createTitleImage(l[u])}var p=this.label_tip.node.position,d=cc.v2(p.x,p.y-72.8),h=cc.v2(p.x,p.y+12),g=cc.v2(p.x,p.y-8),f=cc.v2(p.x,p.y+7.3);this.label_tip.node.position=d,this.label_tip.node.runAction(cc.sequence(cc.moveTo(.08,h),cc.moveTo(.08,g),cc.moveTo(.08,f),cc.moveTo(.06,p)))},t.prototype.delayClose=function(){this.scheduleOnce(function(){this.onClickClose()}.bind(this),0)},t.prototype.onButtonCallback=function(){a.AudioManager.getInstance().playSound("sfx_buttn",!1,1),this.btnCallback(),i.UIManager.getInstance().closeUI(o)},t.prototype.onClickClose=function(e,t){e&&a.AudioManager.getInstance().playSound("sfx_buttn",!1,1),this.callback&&this.callback(),i.UIManager.getInstance().closeUI(o)},t.prototype.createTitleImage=function(e){cc.loader.loadRes("images/OverTips/word",cc.SpriteAtlas,function(t,n){var o=this;if(t)console.log(t.message||t);else{var i=n.getSpriteFrame(c[e]),s=new cc.Node;s.addComponent(cc.Sprite).spriteFrame=i,s.parent=this.node,this.img_titles.push(s),4==this.img_titles.length&&(this.endInAnimationOver=!0,this.spine_complete.node.active=!0,r.Tools.playSpine(this.spine_complete,"in",!1,function(){r.Tools.playSpine(o.spine_complete,"stand",!0),o.endInAnimationOver=!1}),a.AudioManager.getInstance().playSound("sfx_geupgrd",!1,1))}}.bind(this))},t.prototype.update=function(){if(this.endInAnimationOver){var e=this.spine_complete.findBone("paipai"),t=this.spine_complete.findBone("xiaoU"),n=this.spine_complete.findBone("mimiya"),o=this.spine_complete.findBone("doudou");this.img_titles[0].position=cc.v2(e.worldX-139,e.worldY-135),this.img_titles[1].position=cc.v2(t.worldX-139,t.worldY-135),this.img_titles[2].position=cc.v2(n.worldX-139,n.worldY-135),this.img_titles[3].position=cc.v2(o.worldX-139,o.worldY-135)}},t.className="OverTips",__decorate([u(cc.Label)],t.prototype,"label_tip",void 0),__decorate([u(sp.Skeleton)],t.prototype,"spine_false",void 0),__decorate([u(sp.Skeleton)],t.prototype,"spine_true",void 0),__decorate([u(sp.Skeleton)],t.prototype,"spine_complete",void 0),__decorate([u(cc.Label)],t.prototype,"buttonLabel",void 0),__decorate([u(cc.Node)],t.prototype,"node_close",void 0),__decorate([u(cc.Node)],t.prototype,"button",void 0),t=o=__decorate([l],t)}(o.BaseUI);n.OverTips=p,cc._RF.pop()},{"../../Manager/AudioManager":"AudioManager","../../Manager/UIManager":"UIManager","../../UIComm/Tools":"Tools","../BaseUI":"BaseUI"}],Set:[function(e,t,n){"use strict";cc._RF.push(t,"d8d97HoTUFPm7oqXrj5GU8u","Set"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./util"),r=e("./arrays"),i=e("./Dictionary"),a=function(){function e(e){this.dictionary=new i.default(e)}return e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.add=function(e){return!this.contains(e)&&!o.isUndefined(e)&&(this.dictionary.setValue(e,e),!0)},e.prototype.intersection=function(e){var t=this;this.forEach(function(n){return e.contains(n)||t.remove(n),!0})},e.prototype.union=function(e){var t=this;e.forEach(function(e){return t.add(e),!0})},e.prototype.difference=function(e){var t=this;e.forEach(function(e){return t.remove(e),!0})},e.prototype.isSubsetOf=function(e){if(this.size()>e.size())return!1;var t=!0;return this.forEach(function(n){return!!e.contains(n)||(t=!1,!1)}),t},e.prototype.remove=function(e){return!!this.contains(e)&&(this.dictionary.remove(e),!0)},e.prototype.forEach=function(e){this.dictionary.forEach(function(t,n){return e(n)})},e.prototype.toArray=function(){return this.dictionary.values()},e.prototype.isEmpty=function(){return this.dictionary.isEmpty()},e.prototype.size=function(){return this.dictionary.size()},e.prototype.clear=function(){this.dictionary.clear()},e.prototype.toString=function(){return r.toString(this.toArray())},e}();n.default=a,cc._RF.pop()},{"./Dictionary":"Dictionary","./arrays":"arrays","./util":"util"}],ShaderComponent:[function(e,t,n){"use strict";cc._RF.push(t,"dbe38Eu9bZCbJeHFtq3EVSq","ShaderComponent"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ShaderManager"),r=cc._decorator,i=r.ccclass,a=r.property,c=r.requireComponent,s=r.executeInEditMode,l=[o.ShaderType.Fluxay,o.ShaderType.FluxaySuper],u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._shader=o.ShaderType.Default,t._color=cc.color(),t._start=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"shader",{get:function(){return this._shader},set:function(e){this._shader=e,this._applyShader()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.getComponent(cc.Sprite).setState(0),this._applyShader()},t.prototype.update=function(e){this._material&&(this._setShaderColor(),this._setShaderTime(e))},t.prototype._applyShader=function(){var e=this._shader,t=this.getComponent(cc.Sprite),n=o.default.useShader(t,e);this._material=n,this._start=0;var r=this._color;if(r.setR(255),r.setG(255),r.setB(255),r.setA(255),n){switch(e){case o.ShaderType.Blur:case o.ShaderType.GaussBlur:n.setNum(.03)}this._setShaderColor()}},t.prototype._setShaderColor=function(){var e=this.node,t=e.color,n=this._color,o=t.getR(),r=t.getG(),i=t.getB(),a=e.opacity,c=!1;n.getR()!==o&&(n.setR(o),c=!0),n.getG()!==r&&(n.setG(r),c=!0),n.getB()!==i&&(n.setB(i),c=!0),n.getA()!==a&&(n.setA(a),c=!0),c&&this._material.setColor(o/255,r/255,i/255,a/255)},t.prototype._setShaderTime=function(e){if(l.indexOf(this._shader)>=0){var t=this._start;t>65535&&(t=0),t+=e,this._material.setTime(t),this._start=t}},__decorate([a({type:cc.Enum(o.ShaderType),visible:!1})],t.prototype,"_shader",void 0),__decorate([a({type:cc.Enum(o.ShaderType)})],t.prototype,"shader",null),t=__decorate([i,s,c(cc.Sprite)],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./ShaderManager":"ShaderManager"}],ShaderLab:[function(e,t,n){"use strict";cc._RF.push(t,"463d9mDMEBPfaKBF4qNZ0aY","ShaderLab"),Object.defineProperty(n,"__esModule",{value:!0});var o="\nuniform mat4 viewProj;\nattribute vec3 a_position;\nattribute vec2 a_uv0;\nvarying vec2 uv0;\nvoid main () {\n    vec4 pos = viewProj * vec4(a_position, 1);\n    gl_Position = pos;\n    uv0 = a_uv0;\n}",r={GrayScaling:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float gray = dot(c.rgb, vec3(0.299 * 0.5, 0.587 * 0.5, 0.114 * 0.5));\n    gl_FragColor = vec4(gray, gray, gray, c.a * 0.5);\n}\n"},Stone:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float clrbright = (c.r + c.g + c.b) * (1. / 3.);\n    float gray = (0.6) * clrbright;\n    gl_FragColor = vec4(gray, gray, gray, c.a);\n}\n"},Ice:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 clrx = color * texture2D(texture, uv0);\n    float brightness = (clrx.r + clrx.g + clrx.b) * (1. / 3.);\n\tfloat gray = (1.5)*brightness;\n\tclrx = vec4(gray, gray, gray, clrx.a)*vec4(0.8,1.2,1.5,1);\n    gl_FragColor =clrx;\n}\n"},Frozen:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    c *= vec4(0.8, 1, 0.8, 1);\n\tc.b += c.a * 0.2;\n    gl_FragColor = c;\n}\n"},Mirror:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    c.r *= 0.5;\n    c.g *= 0.8;\n    c.b += c.a * 0.2;\n    gl_FragColor = c;\n}\n"},Poison:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    c.r *= 0.8;\n\tc.r += 0.08 * c.a;\n\tc.g *= 0.8;\n    c.g += 0.2 * c.a;\n\tc.b *= 0.8;\n    gl_FragColor = c;\n}\n"},Banish:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float gg = (c.r + c.g + c.b) * (1.0 / 3.0);\n    c.r = gg * 0.9;\n    c.g = gg * 1.2;\n    c.b = gg * 0.8;\n    c.a *= (gg + 0.1);\n    gl_FragColor = c;\n}\n"},Vanish:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    float gray = (c.r + c.g + c.b) * (1. / 3.);\n    float rgb = gray * 0.8;\n    gl_FragColor = vec4(rgb, rgb, rgb, c.a * (gray + 0.1));\n}\n"},Invisible:{vert:o,frag:"\nvoid main () {\n    gl_FragColor = vec4(0,0,0,0);\n}\n"},Blur:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float num;\nvarying vec2 uv0;\nvoid main () {\n    vec4 sum = vec4(0.0);\n    vec2 size = vec2(num,num);\n    sum += texture2D(texture, uv0 - 0.4 * size) * 0.05;\n\tsum += texture2D(texture, uv0 - 0.3 * size) * 0.09;\n\tsum += texture2D(texture, uv0 - 0.2 * size) * 0.12;\n\tsum += texture2D(texture, uv0 - 0.1 * size) * 0.15;\n\tsum += texture2D(texture, uv0             ) * 0.16;\n\tsum += texture2D(texture, uv0 + 0.1 * size) * 0.15;\n\tsum += texture2D(texture, uv0 + 0.2 * size) * 0.12;\n\tsum += texture2D(texture, uv0 + 0.3 * size) * 0.09;\n    sum += texture2D(texture, uv0 + 0.4 * size) * 0.05;\n    \n    vec4 vectemp = vec4(0,0,0,0);\n    vec4 substract = vec4(0,0,0,0);\n    vectemp = (sum - substract) * color;\n\n    float alpha = texture2D(texture, uv0).a;\n    if(alpha < 0.05) { gl_FragColor = vec4(0 , 0 , 0 , 0); }\n\telse { gl_FragColor = vectemp; }\n}\n"},GaussBlur:{vert:o,frag:"\n#define repeats 5.\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float num;\nvarying vec2 uv0;\n\nvec4 draw(vec2 uv) {\n    return color * texture2D(texture,uv).rgba; \n}\nfloat grid(float var, float size) {\n    return floor(var*size)/size;\n}\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\nvoid main()\n{\n    vec4 blurred_image = vec4(0.);\n    for (float i = 0.; i < repeats; i++) { \n        vec2 q = vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i,uv0.x+uv0.y))+num); \n        vec2 uv2 = uv0+(q*num);\n        blurred_image += draw(uv2)/2.;\n        q = vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i+2.,uv0.x+uv0.y+24.))+num); \n        uv2 = uv0+(q*num);\n        blurred_image += draw(uv2)/2.;\n    }\n    blurred_image /= repeats;\n    gl_FragColor = vec4(blurred_image);\n}\n"},Dissolve:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float time;\nvarying vec2 uv0;\n\nvoid main()\n{\n    vec4 c = color * texture2D(texture,uv0);\n    float height = c.r;\n    if(height < time)\n    {\n        discard;\n    }\n    if(height < time+0.04)\n    {\n        // \u6eb6\u89e3\u989c\u8272\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\n        c = vec4(.9,.6,0.3,c.a);\n    }\n    gl_FragColor = c;\n}\n"},Fluxay:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float time;\nvarying vec2 uv0;\n\nvoid main()\n{\n    vec4 src_color = color * texture2D(texture, uv0).rgba;\n\n    float width = 0.08;       //\u6d41\u5149\u7684\u5bbd\u5ea6\u8303\u56f4 (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u5bbd\u5ea6)\n    float start = tan(time/1.414);  //\u6d41\u5149\u7684\u8d77\u59cbx\u5750\u6807\n    float strength = 0.008;   //\u6d41\u5149\u589e\u4eae\u5f3a\u5ea6   (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u589e\u4eae\u5f3a\u5ea6)\n    float offset = 0.5;      //\u504f\u79fb\u503c         (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u503e\u659c\u7a0b\u5ea6)\n    if(uv0.x < (start - offset * uv0.y) &&  uv0.x > (start - offset * uv0.y - width))\n    {\n        vec3 improve = strength * vec3(255, 255, 255);\n        vec3 result = improve * vec3( src_color.r, src_color.g, src_color.b);\n        gl_FragColor = vec4(result, src_color.a);\n\n    }else{\n        gl_FragColor = src_color;\n    }\n}\n"},FluxaySuper:{vert:o,frag:"\n#define TAU 6.12\n#define MAX_ITER 5\nuniform sampler2D texture;\nuniform vec4 color;\nuniform float time;\nvarying vec2 uv0;\n\nvoid main()\n{\n    float time = time * .5+5.;\n    // uv should be the 0-1 uv of texture...\n    vec2 uv = uv0.xy;//fragCoord.xy / iResolution.xy;\n    \n    vec2 p = mod(uv*TAU, TAU)-250.0;\n\n    vec2 i = vec2(p);\n    float c = 1.0;\n    float inten = .0045;\n\n    for (int n = 0; n < MAX_ITER; n++) \n    {\n        float t =  time * (1.0 - (3.5 / float(n+1)));\n        i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(1.5*t + i.x));\n        c += 1.0/length(vec2(p.x / (cos(i.x+t)/inten),p.y / (cos(i.y+t)/inten)));\n    }\n    c /= float(MAX_ITER);\n    c = 1.17-pow(c, 1.4);\n    vec4 tex = texture2D(texture,uv);\n    vec3 colour = vec3(pow(abs(c), 20.0));\n    colour = clamp(colour + vec3(0.0, 0.0, .0), 0.0, tex.a);\n\n    // \u6df7\u5408\u6ce2\u5149\n    float alpha = c*tex[3];  \n    tex[0] = tex[0] + colour[0]*alpha; \n    tex[1] = tex[1] + colour[1]*alpha; \n    tex[2] = tex[2] + colour[2]*alpha; \n    gl_FragColor = color * tex;\n}\n"},Pure:{vert:o,frag:"\nuniform sampler2D texture;\nuniform vec4 color;\nvarying vec2 uv0;\nvoid main () {\n    vec4 c = color * texture2D(texture, uv0);\n    gl_FragColor = vec4(color.rgb, c.a);\n}\n"}};n.default=r,cc._RF.pop()},{}],ShaderManager:[function(e,t,n){"use strict";cc._RF.push(t,"d1e19w9UihLPqSppbSLUBq8","ShaderManager"),Object.defineProperty(n,"__esModule",{value:!0});var o,r=e("./ShaderLab"),i=e("./ShaderMaterial");(function(e){e[e.Default=0]="Default",e[e.Gray=1]="Gray",e[e.GrayScaling=100]="GrayScaling",e[e.Stone=101]="Stone",e[e.Ice=102]="Ice",e[e.Frozen=103]="Frozen",e[e.Mirror=104]="Mirror",e[e.Poison=105]="Poison",e[e.Banish=106]="Banish",e[e.Vanish=107]="Vanish",e[e.Invisible=108]="Invisible",e[e.Blur=109]="Blur",e[e.GaussBlur=110]="GaussBlur",e[e.Dissolve=111]="Dissolve",e[e.Fluxay=112]="Fluxay",e[e.FluxaySuper=113]="FluxaySuper",e[e.Pure=114]="Pure"})(o=n.ShaderType||(n.ShaderType={}));var a=function(){function e(){}return e.useShader=function(e,t){if(cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS){if(e&&e.spriteFrame){if(t>o.Gray){var n=o[t],a=r.default[n];if(!a)return void console.warn("Shader not defined",n);cc.dynamicAtlasManager.enabled=!1;var c=new i.default(n,a.vert,a.frag,a.defines||[]),s=e.spriteFrame.getTexture();c.setTexture(s),c.updateHash();var l=e;return l._material=c,l._renderData._material=c,l._state=t,c}e.setState(t)}}else console.warn("Shader not surpport for canvas")},e}();n.default=a,cc._RF.pop()},{"./ShaderLab":"ShaderLab","./ShaderMaterial":"ShaderMaterial"}],ShaderMaterial:[function(e,t,n){"use strict";cc._RF.push(t,"70d0bHxjchOgLl9oySm1PPr","ShaderMaterial"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc.renderer.renderEngine,r=function(e){function t(t,n,o,r){var i=e.call(this,!1)||this,a=cc.renderer._forward._programLib;return!a._templates[t]&&a.define(t,n,o,r),i._init(t),i}return __extends(t,e),t.prototype._init=function(e){var t=o.renderer,n=o.gfx,r=new t.Pass(e);r.setDepth(!1,!1),r.setCullMode(n.CULL_NONE),r.setBlend(n.BLEND_FUNC_ADD,n.BLEND_SRC_ALPHA,n.BLEND_ONE_MINUS_SRC_ALPHA,n.BLEND_FUNC_ADD,n.BLEND_SRC_ALPHA,n.BLEND_ONE_MINUS_SRC_ALPHA);var i=new t.Technique(["transparent"],[{name:"texture",type:t.PARAM_TEXTURE_2D},{name:"color",type:t.PARAM_COLOR4},{name:"pos",type:t.PARAM_FLOAT3},{name:"size",type:t.PARAM_FLOAT2},{name:"time",type:t.PARAM_FLOAT},{name:"num",type:t.PARAM_FLOAT}],[r]);this._texture=null,this._color={r:1,g:1,b:1,a:1},this._pos={x:0,y:0,z:0},this._size={x:0,y:0},this._time=0,this._num=0,this._effect=this.effect=new t.Effect([i],{color:this._color,pos:this._pos,size:this._size,time:this._time,num:this._num},[]),this._mainTech=i},t.prototype.setTexture=function(e){this._texture=e,this._texture.update({flipY:!1,mipmap:!1}),this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId()},t.prototype.setColor=function(e,t,n,o){this._color.r=e,this._color.g=t,this._color.b=n,this._color.a=o,this._effect.setProperty("color",this._color)},t.prototype.setPos=function(e,t,n){this._pos.x=e,this._pos.y=t,this._pos.z=n,this._effect.setProperty("pos",this._pos)},t.prototype.setSize=function(e,t){this._size.x=e,this._size.y=t,this._effect.setProperty("size",this._size)},t.prototype.setTime=function(e){this._time=e,this._effect.setProperty("time",this._time)},t.prototype.setNum=function(e){this._num=e,this._effect.setProperty("num",this._num)},t}(o.Material);n.default=r,cc._RF.pop()},{}],StringExtension:[function(e,t,n){"use strict";cc._RF.push(t,"85c1bk+r3FHf5RqunqKCFt+","StringExtension"),String.prototype.format=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Array.prototype.slice.call(arguments),o=0;return this.replace(/%s/g,function(e,t){return n[o++]})},cc._RF.pop()},{}],SubmissionPanel:[function(e,t,n){"use strict";cc._RF.push(t,"bdbeagD9lJH1p1yPQBbNwPK","SubmissionPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),r=e("../../Manager/UIManager"),i=e("../../Http/NetWork"),a=e("../../Utils/UIHelp"),c=e("../../Data/ConstValue"),s=e("./ErrorPanel"),l=e("../../Data/DaAnData"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return __extends(t,e),n=t,t.prototype.start=function(){},t.prototype.onQueDingBtnClick=function(e){this.DetectionNet()},t.prototype.onQuXiaoBtnClick=function(e){r.UIManager.getInstance().closeUI(n)},t.prototype.DetectionNet=function(){if(i.NetWork.title_id){var e=JSON.stringify({CoursewareKey:c.ConstValue.CoursewareKey,checkpointsNum:l.DaAnData.getInstance().checkpointsNum,countsArr:l.DaAnData.getInstance().countsArr,goodsArr:l.DaAnData.getInstance().goodsArr});console.log("-----------data is",e),i.NetWork.getInstance().httpRequest(i.NetWork.GET_TITLE+"?title_id="+i.NetWork.title_id,"GET","application/json;charset=utf-8",function(t,n){if(!t)if(null==n.data.courseware_content||""==n.data.courseware_content)this.AddNet(e);else{i.NetWork.courseware_id=n.data.courseware_id;var o=JSON.parse(n.data.courseware_content);i.NetWork.empty||(o.CoursewareKey==c.ConstValue.CoursewareKey?this.ModifyNet(e):r.UIManager.getInstance().openUI(s.default,null,1e3,function(){r.UIManager.getInstance().getUI(s.default).setPanel("\u8be5titleId\u5df2\u88ab\u4f7f\u7528,\u8bf7\u8054\u7cfb\u6280\u672f\u8001\u5e08\u89e3\u51b3\uff01\ntitleId="+i.NetWork.title_id,"","","\u786e\u5b9a")}))}}.bind(this),null)}else r.UIManager.getInstance().openUI(s.default,null,1e3,function(){r.UIManager.getInstance().getUI(s.default).setPanel("titleId\u4e3a\u7a7a,\u8bf7\u8054\u7cfb\u6280\u672f\u8001\u5e08\u89e3\u51b3\uff01\ntitleId="+i.NetWork.title_id,"","","\u786e\u5b9a")})},t.prototype.AddNet=function(e){var t={title_id:i.NetWork.title_id,courseware_content:e,is_result:1,is_lavel:0};i.NetWork.getInstance().httpRequest(i.NetWork.ADD,"POST","application/json;charset=utf-8",function(e,t){e||(a.UIHelp.showTip("\u7b54\u6848\u63d0\u4ea4\u6210\u529f"),r.UIManager.getInstance().closeUI(n))}.bind(this),JSON.stringify(t))},t.prototype.ModifyNet=function(e){var t={courseware_id:i.NetWork.courseware_id,courseware_content:e,is_result:1,is_lavel:0};i.NetWork.getInstance().httpRequest(i.NetWork.MODIFY,"POST","application/json;charset=utf-8",function(e,t){e||(a.UIHelp.showTip("\u7b54\u6848\u4fee\u6539\u6210\u529f"),r.UIManager.getInstance().closeUI(n))}.bind(this),JSON.stringify(t))},t.className="SubmissionPanel",t=n=__decorate([p],t)}(o.BaseUI));n.default=d,cc._RF.pop()},{"../../Data/ConstValue":"ConstValue","../../Data/DaAnData":"DaAnData","../../Http/NetWork":"NetWork","../../Manager/UIManager":"UIManager","../../Utils/UIHelp":"UIHelp","../BaseUI":"BaseUI","./ErrorPanel":"ErrorPanel"}],TeacherPanel:[function(e,t,n){"use strict";cc._RF.push(t,"70c27EBmWdPJYtgMQ9dyPZS","TeacherPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),r=e("../../Manager/UIManager"),i=e("../../Http/NetWork"),a=e("../../Utils/UIHelp"),c=e("../../Data/DaAnData"),s=e("./GamePanel"),l=e("../../Manager/ListenerManager"),u=e("../../Data/ListenerType"),p=cc._decorator,d=p.ccclass,h=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemNodePrefab=null,t.itemNode=null,t.checkpointLayout=null,t.checkpointLabel=null,t.bg=null,t.checkpointMask=null,t.popNode=null,t.errorNode=null,t.checkpointEnable=!0,t.itemNodeArr=[],t.checkpointUp=!0,t}return __extends(t,e),t.prototype.start=function(){var e=this;this.getNet(),this.checkpointMask.on(cc.Node.EventType.TOUCH_START,function(t){e.checkpointUp||(e.checkpointUp=!0,e.checkpointLayout.runAction(cc.moveTo(.2,cc.v2(0,0))))}),this.initItemNode()},t.prototype.initItemNode=function(){c.DaAnData.getInstance().checkpointsNum=1;var e=cc.instantiate(this.itemNodePrefab);this.itemNode.addChild(e),this.itemNodeArr.push(e),this.addEditListener(),this.addPlusListener(),this.addReduceListener()},t.prototype.updateItemNode=function(){for(var e=0;e<this.itemNodeArr.length;e++)this.itemNodeArr[e].destroy();this.itemNodeArr=[];for(e=0;e<c.DaAnData.getInstance().checkpointsNum;e++){var t=cc.instantiate(this.itemNodePrefab);this.itemNode.addChild(t),this.itemNodeArr.push(t)}},t.prototype.onCheckpointBtnClick=function(){this.checkpointUp?(this.checkpointUp=!1,this.checkpointLayout.runAction(cc.moveTo(.2,cc.v2(0,-120)))):(this.checkpointUp=!0,this.checkpointLayout.runAction(cc.moveTo(.2,cc.v2(0,0))))},t.prototype.onCheckpointClick1=function(){var e=this;this.checkpointEnable&&(this.checkpointEnable=!1,this.checkpointUp=!0,c.DaAnData.getInstance().checkpointsNum=1,this.checkpointLabel.string="1 \u5173",this.checkpointLayout.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,0)),cc.callFunc(function(){e.checkpointEnable=!0}))),this.updateItemNode(),this.addEditListener(),this.addPlusListener(),this.addReduceListener())},t.prototype.onCheckpointClick2=function(){var e=this;this.checkpointEnable&&(this.checkpointEnable=!1,this.checkpointUp=!0,c.DaAnData.getInstance().checkpointsNum=2,this.checkpointLabel.string="2 \u5173",this.checkpointLayout.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,0)),cc.callFunc(function(){e.checkpointEnable=!0}))),this.updateItemNode(),this.addEditListener(),this.addPlusListener(),this.addReduceListener())},t.prototype.onCheckpointClick3=function(){var e=this;this.checkpointEnable&&(this.checkpointEnable=!1,this.checkpointUp=!0,c.DaAnData.getInstance().checkpointsNum=3,this.checkpointLabel.string="3 \u5173",this.checkpointLayout.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,0)),cc.callFunc(function(){e.checkpointEnable=!0}))),this.updateItemNode(),this.addEditListener(),this.addPlusListener(),this.addReduceListener())},t.prototype.addEditListener=function(){for(var e=this,t=function(t){n.itemNodeArr[t].getChildByName("New EditBox").on("editing-did-ended",function(n){var o=parseInt(n.string),r=e.getSum(o);if(/^[0-5]{1,4}$/.test(n.string))if(r<=14){c.DaAnData.getInstance().countsArr[t]=o;var i=e.itemNodeArr[t].getChildByName("rightAnswerNode"),a=o%10,s=Math.floor(o/10)%10,l=Math.floor(o/100)%10,u=Math.floor(o/1e3)%10;i.getChildByName("qian").getComponent(cc.Label).string=u.toString(),i.getChildByName("bai").getComponent(cc.Label).string=l.toString(),i.getChildByName("shi").getComponent(cc.Label).string=s.toString(),i.getChildByName("ge").getComponent(cc.Label).string=a.toString()}else n.string="",n.node.getChildByName("PLACEHOLDER_LABEL").active=!0;else n.string="",n.node.getChildByName("PLACEHOLDER_LABEL").active=!0})},n=this,o=0;o<this.itemNodeArr.length;o++)t(o)},t.prototype.addPlusListener=function(){for(var e=this,t=function(t){n.itemNodeArr[t].getChildByName("addButton").on("click",function(){e.popNode.active||(e.popNode.active=!0,e.addListenerOnPop(e.itemNodeArr[t]))})},n=this,o=0;o<this.itemNodeArr.length;o++)t(o)},t.prototype.addReduceListener=function(){for(var e=this,t=function(t){n.itemNodeArr[t].getChildByName("removeButton").on("click",function(){e.itemNodeArr[t].getChildByName("addButton").active||(e.itemNodeArr[t].getChildByName("goodsSprite").getComponent(cc.Sprite).spriteFrame=null,e.itemNodeArr[t].getChildByName("addButton").active=!0)})},n=this,o=0;o<this.itemNodeArr.length;o++)t(o)},t.prototype.addListenerOnPop=function(e){for(var t=this,n=this.popNode.getChildByName("thing"),o=function(o){n.children[o].on(cc.Node.EventType.TOUCH_START,function(){e.getChildByName("goodsSprite").getComponent(cc.Sprite).spriteFrame=n.children[o].getComponent(cc.Sprite).spriteFrame,n.children[o].getComponent(cc.Sprite).setState(0),e.getChildByName("addButton").active=!1;var r=t.itemNodeArr.indexOf(e);c.DaAnData.getInstance().goodsArr[r]=o;for(var i=0;i<n.children.length;i++)o!=i&&n.children[i].getComponent(cc.Sprite).setState(1)})},r=0;r<n.children.length;r++)o(r)},t.prototype.popBtnCallback=function(){for(var e=this.popNode.getChildByName("thing"),t=0;t<e.children.length;t++)e.children[t].getComponent(cc.Sprite).setState(0),e.children[t].off(cc.Node.EventType.TOUCH_START);this.popNode.active=!1},t.prototype.getSum=function(e){for(var t=e,n=t/10,o=t%10;n>=1;)n=(t=Math.floor(t/10))/10,o+=t%10,1;return o},t.prototype.errorCheck=function(){for(var e=0;e<this.itemNodeArr.length;e++)if(null==this.itemNodeArr[e].getChildByName("goodsSprite").getComponent(cc.Sprite).spriteFrame)return this.errorNode.active=!0,this.errorNode.getChildByName("New Label").getComponent(cc.Label).string="\u7b2c"+(e+1)+"\u5173\u6ca1\u6709\u9009\u62e9\u7269\u54c1\uff0c\u8bf7\u5148\u9009\u62e9\u7269\u54c1\u3002",!1;for(e=0;e<this.itemNodeArr.length;e++)if(""==this.itemNodeArr[e].getChildByName("New EditBox").getComponent(cc.EditBox).string)return this.errorNode.active=!0,this.errorNode.getChildByName("New Label").getComponent(cc.Label).string="\u7b2c"+(e+1)+"\u5173\u6ca1\u6709\u586b\u5199\u7269\u54c1\u4ef7\u503c\uff0c\u8bf7\u5148\u586b\u5199\u7269\u54c1\u4ef7\u503c \u3002",!1;return!0},t.prototype.onErrorBtnCallback=function(){this.errorNode.active=!1},t.prototype.onBtnSaveClicked=function(){console.log(c.DaAnData.getInstance()),this.errorCheck()&&r.UIManager.getInstance().showUI(s.default,function(){l.ListenerManager.getInstance().trigger(u.ListenerType.OnEditStateSwitching,{state:1})})},t.prototype.getNet=function(){i.NetWork.getInstance().httpRequest(i.NetWork.GET_TITLE+"?title_id="+i.NetWork.title_id,"GET","application/json;charset=utf-8",function(e,t){if(console.log("\u6d88\u606f\u8fd4\u56de"+t),!e){var n=t;if(Array.isArray(n.data))return;JSON.parse(n.data.courseware_content);i.NetWork.courseware_id=n.data.courseware_id,i.NetWork.empty&&this.ClearNet()}}.bind(this),null)},t.prototype.ClearNet=function(){var e={courseware_id:i.NetWork.courseware_id};i.NetWork.getInstance().httpRequest(i.NetWork.CLEAR,"POST","application/json;charset=utf-8",function(e,t){e||a.UIHelp.showTip("\u7b54\u6848\u5220\u9664\u6210\u529f")}.bind(this),JSON.stringify(e))},t.className="TeacherPanel",__decorate([h(cc.Prefab)],t.prototype,"itemNodePrefab",void 0),__decorate([h(cc.Node)],t.prototype,"itemNode",void 0),__decorate([h(cc.Node)],t.prototype,"checkpointLayout",void 0),__decorate([h(cc.Label)],t.prototype,"checkpointLabel",void 0),__decorate([h(cc.Node)],t.prototype,"bg",void 0),__decorate([h(cc.Node)],t.prototype,"checkpointMask",void 0),__decorate([h(cc.Node)],t.prototype,"popNode",void 0),__decorate([h(cc.Node)],t.prototype,"errorNode",void 0),t=__decorate([d],t)}(o.BaseUI);n.default=g,cc._RF.pop()},{"../../Data/DaAnData":"DaAnData","../../Data/ListenerType":"ListenerType","../../Http/NetWork":"NetWork","../../Manager/ListenerManager":"ListenerManager","../../Manager/UIManager":"UIManager","../../Utils/UIHelp":"UIHelp","../BaseUI":"BaseUI","./GamePanel":"GamePanel"}],TimeManager:[function(e,t,n){"use strict";cc._RF.push(t,"6a93cVTR3pJrpapom9vowVf","TimeManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.getCurrentTime=function(){return(new Date).getTime()},e.prototype.getNowFormatDate=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate();n>=1&&n<=9&&(n="0"+n),o>=0&&o<=9&&(o="0"+o);var r=e.getHours(),i=e.getMinutes(),a=e.getSeconds(),c=e.getMilliseconds();return r>=0&&r<=9&&(r="0"+r),i>=0&&i<=9&&(i="0"+i),a>=0&&a<=9&&(a="0"+a),c>=0&&c<=9&&(c="00"+c),c>=10&&c<=90&&(c="0"+c),t+":"+n+":"+o+":"+r+":"+i+":"+a+":"+c},e.instance=null,e}();n.TimeManager=o,cc._RF.pop()},{}],TipUI:[function(e,t,n){"use strict";cc._RF.push(t,"04f62OpblhMYb6+AOI+oOHr","TipUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),r=e("../Item/Tip"),i=cc._decorator,a=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipPrefab=null,t.tipPool=[],t}return __extends(t,e),t.prototype.showTip=function(e){for(var t=0;t<this.tipPool.length;t++)if(!this.tipPool[t].isReady())return this.tipPool[t].reset(),void this.tipPool[t].playTip(e);for(var n=0;n<this.tipPool.length;++n)if(null!=this.tipPool[n]&&this.tipPool[n].isReady())return this.tipPool[n].node.setSiblingIndex(200),void this.tipPool[n].playTip(e);cc.log("create tip");var o=cc.instantiate(this.tipPrefab);o.parent=this.node;var i=o.getComponent(r.Tip);this.tipPool.push(i),i.playTip(e)},t.className="TipUI",__decorate([c(cc.Prefab)],t.prototype,"tipPrefab",void 0),t=__decorate([a],t)}(o.BaseUI);n.TipUI=s,cc._RF.pop()},{"../BaseUI":"BaseUI","../Item/Tip":"Tip"}],Tip:[function(e,t,n){"use strict";cc._RF.push(t,"c7373SoEY5LDIC2BLTSmOq3","Tip"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,i=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.neiRongNode=null,t.tipLabel=null,t.ready=!0,t}return __extends(t,e),t.prototype.playTip=function(e){this.neiRongNode.active=!0,this.node.stopAllActions(),this.ready=!1,this.tipLabel.string=e,this.reset();var t=cc.moveTo(.5,0,128),n=(cc.fadeIn(.5),cc.fadeOut(.5)),o=cc.spawn(t,n),r=cc.delayTime(1),i=cc.callFunc(function(){this.ready=!0},this),a=cc.sequence(r,o,i);this.node.runAction(a)},t.prototype.isReady=function(){return this.ready},t.prototype.reset=function(){this.node.setPosition(0,0),this.node.opacity=255},__decorate([i(cc.Node)],t.prototype,"neiRongNode",void 0),__decorate([i(cc.Label)],t.prototype,"tipLabel",void 0),t=__decorate([r],t)}(cc.Component);n.Tip=a,cc._RF.pop()},{}],TitleNode:[function(e,t,n){"use strict";cc._RF.push(t,"b276fOW8MRNTqj/bpy0hngz","TitleNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Manager/ListenerManager"),r=e("../../Data/ListenerType"),i=cc._decorator,a=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bianJiLabel=null,t.jianYanLabel=null,t.tiaoNode=null,t.heiSe=cc.color(0,0,0),t.huiSe=cc.color(127,127,127),t}return __extends(t,e),t.prototype.start=function(){this.bianJiLabel.node.color=this.heiSe,this.jianYanLabel.node.color=this.huiSe,this.tiaoNode.color=this.huiSe,o.ListenerManager.getInstance().add(r.ListenerType.OnEditStateSwitching,this,this.onStateSwitching)},t.prototype.onStateSwitching=function(e){0==e.state?(this.jianYanLabel.node.color=this.huiSe,this.tiaoNode.color=this.huiSe):(this.jianYanLabel.node.color=this.heiSe,this.tiaoNode.color=this.heiSe)},__decorate([c(cc.Label)],t.prototype,"bianJiLabel",void 0),__decorate([c(cc.Label)],t.prototype,"jianYanLabel",void 0),__decorate([c(cc.Node)],t.prototype,"tiaoNode",void 0),t=__decorate([a],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../../Data/ListenerType":"ListenerType","../../Manager/ListenerManager":"ListenerManager"}],Tools:[function(e,t,n){"use strict";cc._RF.push(t,"8c9926FhnVH2Z4Gs2ZXOlDV","Tools"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(e,t){this.time=0,this.pos=cc.Vec2.ZERO,this.time=e,this.pos=t}}();n.ArtMoveParam=o;var r=cc._decorator,i=r.ccclass,a=(r.property,function(){function e(){}return e.playSpine=function(e,t,n,o){void 0===o&&(o=null),e.setAnimation(0,t,n)&&e.setCompleteListener(function(e,n){(e.animation?e.animation.name:"")===t&&o&&null!=o&&o()})},e.getQueryVariable=function(e){if((t=window.location.href.split("?")).length<2)return!1;for(var t=t[1].split("&"),n=0;n<t.length;n++){var o=t[n].split("=");if(o[0]==e)return o[1]}return!1},e.runArtMoveSequence=function(e,t,n){void 0===n&&(n=null);var o=e.getPosition().sub(t[t.length-1].pos);function r(e){return e.add(o)}if(e.setPosition(r(t[0].pos)),t.length<=1)n&&n();else{for(var i=[],a=1;a<t.length-1;a++){var c=.001*(t[a].time-t[a-1].time);i.push(cc.moveTo(c,r(t[a].pos)))}n&&i.push(cc.callFunc(n)),e.runAction(cc.sequence(i))}},e.getNowTimeMS=function(){return(new Date).getTime()},e.getNowTimeS=function(){return Math.floor(.001*(new Date).getTime())},e.getFormatTime=function(e){var t=Math.floor(e/60);t<10&&(t="0"+t);var n=e%60;return n<10&&(n="0"+n),t+":"+n},e=__decorate([i],e)}());n.Tools=a,cc._RF.pop()},{}],UIHelp:[function(e,t,n){"use strict";cc._RF.push(t,"c44e6cLg85JzaIFNvBdsH7x","UIHelp"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Manager/UIManager"),r=e("../UI/panel/TipUI"),i=e("../UI/Item/affirmTips"),a=e("../UI/Item/OverTips"),c=function(){function e(){}return e.showTip=function(t){var n=o.UIManager.getInstance().getUI(r.TipUI);n?n.showTip(t):o.UIManager.getInstance().openUI(r.TipUI,null,211,function(){e.showTip(t)})},e.showOverTip=function(t,n,r,i,c,s,l){void 0===n&&(n=""),void 0===r&&(r=!1),void 0===i&&(i=""),void 0===c&&(c=null),void 0===s&&(s=null);var u=o.UIManager.getInstance().getUI(a.OverTips);u?u.init(t,n,r,i,c,s,l):o.UIManager.getInstance().openUI(a.OverTips,null,210,function(){e.showOverTip(t,n,r,i,c,s,l)})},e.AffirmTip=function(t,n,r,a,c){var s=o.UIManager.getInstance().getUI(i.AffirmTips);s?s.init(t,n,r,a,c):o.UIManager.getInstance().openUI(i.AffirmTips,null,210,function(){e.AffirmTip(t,n,r,a,c)})},e}();n.UIHelp=c,cc._RF.pop()},{"../Manager/UIManager":"UIManager","../UI/Item/OverTips":"OverTips","../UI/Item/affirmTips":"affirmTips","../UI/panel/TipUI":"TipUI"}],UIManager:[function(e,t,n){"use strict";cc._RF.push(t,"fcb706mngZPXIeAjofYaIuT","UIManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.uiList=[],this.uiRoot=null,this.uiRoot=cc.find("Canvas")}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.openUI=function(e,t,n,o,r){for(var i=this,a=[],c=5;c<arguments.length;c++)a[c-5]=arguments[c];this.getUI(e)||cc.loader.loadRes(e.getUrl(),function(e,t,n){r&&r(e,t,n)},function(r,c){if(r)cc.log(r);else if(!i.getUI(e)){var s=cc.instantiate(c);s.parent=i.uiRoot,n&&(s.zIndex=n);var l=s.getComponent(e);l.data=t,l.tag=e,i.uiList.push(l),o&&o(a)}})},e.prototype.closeUI=function(e){for(var t=0;t<this.uiList.length;++t)if(this.uiList[t].tag===e)return this.uiList[t].node.destroy(),void this.uiList.splice(t,1)},e.prototype.showUI=function(e,t,n){var o=this,r=this.getUI(e);r?(r.data=t,r.node.active=!0,r.onShow(),n&&n()):this.openUI(e,t,0,function(){n&&n(),o.getUI(e).onShow()})},e.prototype.hideUI=function(e){var t=this.getUI(e);t&&(t.node.active=!1)},e.prototype.getUI=function(e){for(var t=0;t<this.uiList.length;++t)if(this.uiList[t].tag===e)return this.uiList[t];return null},e}();n.UIManager=o,cc._RF.pop()},{}],UploadAndReturnPanel:[function(e,t,n){"use strict";cc._RF.push(t,"8a2a4ho4VlCloJCvzPCR9a/","UploadAndReturnPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),r=e("../../Manager/UIManager"),i=e("./GamePanel"),a=e("./SubmissionPanel"),c=e("../../Manager/ListenerManager"),s=e("../../Data/ListenerType"),l=e("../../Data/DaAnData"),u=e("../../Utils/UIHelp"),p=e("../Item/OverTips"),d=e("../../Manager/AudioManager"),h=cc._decorator,g=h.ccclass,f=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return __extends(t,e),n=t,t.prototype.start=function(){},t.prototype.onFanHui=function(){c.ListenerManager.getInstance().trigger(s.ListenerType.OnEditStateSwitching,{state:0}),r.UIManager.getInstance().closeUI(i.default),r.UIManager.getInstance().closeUI(n),r.UIManager.getInstance().closeUI(p.OverTips),r.UIManager.getInstance().closeUI(a.default),d.AudioManager.getInstance().stopAll()},t.prototype.onTiJiao=function(){l.DaAnData.getInstance().submitEnable?r.UIManager.getInstance().openUI(a.default,null,211):u.UIHelp.showTip("\u8bf7\u901a\u5173\u540e\u8fdb\u884c\u4fdd\u5b58\u3002")},t.className="UploadAndReturnPanel",t=n=__decorate([g],t)}(o.BaseUI));n.default=f,cc._RF.pop()},{"../../Data/DaAnData":"DaAnData","../../Data/ListenerType":"ListenerType","../../Manager/AudioManager":"AudioManager","../../Manager/ListenerManager":"ListenerManager","../../Manager/UIManager":"UIManager","../../Utils/UIHelp":"UIHelp","../BaseUI":"BaseUI","../Item/OverTips":"OverTips","./GamePanel":"GamePanel","./SubmissionPanel":"SubmissionPanel"}],affirmTips:[function(e,t,n){"use strict";cc._RF.push(t,"67e25WAGoRADq1zkpxqqwdF","affirmTips"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseUI"),r=e("../../Manager/UIManager"),i=cc._decorator,a=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.NodeDes=null,t.title=null,t.des=null,t.close=null,t.ok=null,t.btnCloseLabel=null,t.btnOkLabel=null,t.win=null,t.fail=null,t.callback=null,t}var n;return __extends(t,e),n=t,t.prototype.start=function(){},t.prototype.init=function(e,t,n,o,r){this.title.node.active=!1,this.des.node.active=!0,this.win.active=1==e,this.fail.active=2==e,this.type=e,this.callback=n,this.des.string=t,this.callback=n,o&&(this.btnCloseLabel.string=o),r&&(this.btnOkLabel.string=r)},t.prototype.setOnlyOneBtnType=function(e){this.close.node.active=!1,this.ok.node.active=!0,this.ok.node.position=cc.v2(0,this.ok.node.position.y),e&&(this.btnOkLabel.string=e,e.length>4&&(this.btnOkLabel.fontSize=40))},t.prototype.OnClickClose=function(){},t.prototype.TipsAnimatorScale=function(e){e.stopAllActions();var t=cc.sequence(cc.delayTime(1),cc.scaleTo(.2,1,1));e.runAction(t)},t.prototype.OnClickOk=function(){console.log("\u786e\u8ba4"),r.UIManager.getInstance().closeUI(n),this.callback(1)},t.prototype.OnClickCancel=function(){console.log("\u53d6\u6d88"),r.UIManager.getInstance().closeUI(n),this.callback(0)},t.className="AffirmTips",__decorate([c(cc.Node)],t.prototype,"NodeDes",void 0),__decorate([c(cc.Label)],t.prototype,"title",void 0),__decorate([c(cc.Label)],t.prototype,"des",void 0),__decorate([c(cc.Button)],t.prototype,"close",void 0),__decorate([c(cc.Button)],t.prototype,"ok",void 0),__decorate([c(cc.Label)],t.prototype,"btnCloseLabel",void 0),__decorate([c(cc.Label)],t.prototype,"btnOkLabel",void 0),__decorate([c(cc.Node)],t.prototype,"win",void 0),__decorate([c(cc.Node)],t.prototype,"fail",void 0),t=n=__decorate([a],t)}(o.BaseUI);n.AffirmTips=s,cc._RF.pop()},{"../../Manager/UIManager":"UIManager","../BaseUI":"BaseUI"}],arrays:[function(e,t,n){"use strict";cc._RF.push(t,"b058arw+iJCUoMo5lRZ29ul","arrays"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./util");function r(e,t,n){for(var r=n||o.defaultEquals,i=e.length,a=0;a<i;a++)if(r(e[a],t))return a;return-1}n.indexOf=r,n.lastIndexOf=function(e,t,n){for(var r=n||o.defaultEquals,i=e.length-1;i>=0;i--)if(r(e[i],t))return i;return-1},n.contains=function(e,t,n){return r(e,t,n)>=0},n.remove=function(e,t,n){var o=r(e,t,n);return!(o<0||(e.splice(o,1),0))},n.frequency=function(e,t,n){for(var r=n||o.defaultEquals,i=e.length,a=0,c=0;c<i;c++)r(e[c],t)&&a++;return a},n.equals=function(e,t,n){var r=n||o.defaultEquals;if(e.length!==t.length)return!1;for(var i=e.length,a=0;a<i;a++)if(!r(e[a],t[a]))return!1;return!0},n.copy=function(e){return e.concat()},n.swap=function(e,t,n){if(t<0||t>=e.length||n<0||n>=e.length)return!1;var o=e[t];return e[t]=e[n],e[n]=o,!0},n.toString=function(e){return"["+e.toString()+"]"},n.forEach=function(e,t){for(var n=0,o=e;n<o.length;n++)if(!1===t(o[n]))return},cc._RF.pop()},{"./util":"util"}],util:[function(e,t,n){"use strict";cc._RF.push(t,"c9cacB846tOCorK/Mt3JpJs","util"),Object.defineProperty(n,"__esModule",{value:!0});var o=Object.prototype.hasOwnProperty;function r(e){return"function"==typeof e}function i(e){return void 0===e}function a(e){return"[object String]"===Object.prototype.toString.call(e)}n.has=function(e,t){return o.call(e,t)},n.defaultCompare=function(e,t){return e<t?-1:e===t?0:1},n.defaultEquals=function(e,t){return e===t},n.defaultToString=function(e){return null===e?"COLLECTION_NULL":i(e)?"COLLECTION_UNDEFINED":a(e)?"$s"+e:"$o"+e.toString()},n.makeString=function(e,t){if(void 0===t&&(t=","),null===e)return"COLLECTION_NULL";if(i(e))return"COLLECTION_UNDEFINED";if(a(e))return e.toString();var o="{",r=!0;for(var c in e)n.has(e,c)&&(r?r=!1:o+=t,o=o+c+":"+e[c]);return o+"}"},n.isFunction=r,n.isUndefined=i,n.isString=a,n.reverseCompareFunction=function(e){return i(e)||!r(e)?function(e,t){return e<t?1:e===t?0:-1}:function(t,n){return-1*e(t,n)}},n.compareToEquals=function(e){return function(t,n){return 0===e(t,n)}},cc._RF.pop()},{}]},{},["BaseConfigContainer","ConstValue","CustomTypes","DaAnData","DataReporting","GameData","ListenerType","NetWork","GameMain","AudioManager","ListenerManager","TimeManager","UIManager","Tools","BaseUI","OverTips","Tip","affirmTips","ErrorPanel","GamePanel","LoadingUI","SubmissionPanel","TeacherPanel","TipUI","TitleNode","UploadAndReturnPanel","AdaptiveScreen","FadeUIPlugin","LogWrap","MathExtension","MathUtils","StringExtension","UIHelp","Dictionary","Set","arrays","util","ShaderComponent","ShaderLab","ShaderManager","ShaderMaterial"]);