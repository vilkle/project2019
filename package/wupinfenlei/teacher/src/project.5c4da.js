window.__require=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+a+"'")}}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){return o(t[a][1][e]||e)},p,p.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<r.length;a++)o(r[a]);return o}({AdaptiveScreen:[function(e,t,n){"use strict";cc._RF.push(t,"ba00bud/zlDiY6tClWPdHIa","AdaptiveScreen");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgNode=null,t.viewWidth=640,t.viewHeight=1136,t}return r(t,e),t.prototype.onLoad=function(){this.screenAdapter()},t.prototype.start=function(){this.viewUp()},t.prototype.screenAdapter=function(){if(cc.Canvas.instance){this.stage=cc.Canvas.instance.node;var e=cc.Canvas.instance,t=cc.view.getFrameSize();t.width/t.height<e.designResolution.width/e.designResolution.height?(e.fitWidth=!0,e.fitHeight=!1):(e.fitHeight=!0,e.fitWidth=!1)}},t.prototype.viewUp=function(){var e=cc.winSize,t=e.width/this.viewWidth,n=e.height/this.viewHeight;this.bgNode.scale=1*Math.max(t,n)},o([s({type:cc.Node,tooltip:"\u5168\u5c4f\u80cc\u666f\u56fe\u7247\uff0c\u7528\u4e8e\u81ea\u9002\u5e94"})],t.prototype,"bgNode",void 0),o([s],t.prototype,"viewWidth",void 0),o([s],t.prototype,"viewHeight",void 0),t=o([a],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"16d7aVnmU1PQrpFj9P1Fxvb","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Data/ConstValue"),o=function(){function e(){this.bgm=""}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.playSound=function(e,t,n,o,i){void 0===o&&(o=null),void 0===i&&(i=null);var a=r.ConstValue.AUDIO_DIR+e;cc.loader.loadRes(a,cc.AudioClip,function(e,r){if(e)cc.error(e);else{var a=cc.audioEngine.play(r,t||!1,n||1);o&&o(a),i&&cc.audioEngine.setFinishCallback(a,i)}})},e.prototype.stopAudio=function(e){cc.audioEngine.stop(e)},e.prototype.stopAll=function(){cc.audioEngine.stopAll()},e.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},e.prototype.resumeAll=function(){cc.audioEngine.resumeAll()},e.prototype.playBGM=function(e){if(this.bgm!=e){this.bgm=e,cc.audioEngine.stopMusic();var t=r.ConstValue.AUDIO_DIR+e;cc.loader.loadRes(t,cc.AudioClip,function(e,t){e?cc.error(e):cc.audioEngine.playMusic(t,!0)})}},e.prototype.resumeBGM=function(){cc.audioEngine.stopMusic();var e=r.ConstValue.AUDIO_DIR+this.bgm;cc.loader.loadRes(e,cc.AudioClip,function(e,t){e?cc.error(e):cc.audioEngine.playMusic(t,!0)})},e.instance=null,e}();n.AudioManager=o,cc._RF.pop()},{"../Data/ConstValue":"ConstValue"}],BaseConfigContainer:[function(e,t,n){"use strict";cc._RF.push(t,"a9280QRTmRIUqfgpuhZqA92","BaseConfigContainer"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return Object.defineProperty(e.prototype,"tag",{get:function(){return this.mTag},set:function(e){this.mTag=e},enumerable:!0,configurable:!0}),e}();n.BaseConfigContainer=r,cc._RF.pop()},{}],BaseUI:[function(e,t,n){"use strict";cc._RF.push(t,"c6da4j3MGhPfIxwls9tY6iS","BaseUI");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Data/ConstValue"),a=e("../Manager/ListenerManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.mData},set:function(e){this.mData=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tag",{get:function(){return this.mTag},set:function(e){this.mTag=e},enumerable:!0,configurable:!0}),t.getUrl=function(){return cc.log(this.className),i.ConstValue.PREFAB_UI_DIR+this.className},t.prototype.onDestroy=function(){a.ListenerManager.getInstance().removeAll(this)},t.prototype.onShow=function(){cc.log("BaseUI onShow")},t.className="BaseUI",t=o([c],t)}(cc.Component));n.BaseUI=l,cc._RF.pop()},{"../Data/ConstValue":"ConstValue","../Manager/ListenerManager":"ListenerManager"}],ConstValue:[function(e,t,n){"use strict";cc._RF.push(t,"66b51obcd1Mi4dcboc3fwIs","ConstValue"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.IS_EDITIONS=!0,e.IS_TEACHER=!0,e.CONFIG_FILE_DIR="config/",e.PREFAB_UI_DIR="prefab/ui/panel/",e.AUDIO_DIR="audio/",e.CoursewareKey="BEn#x!6z!mkE0SnnH$qG26MG",e}();n.ConstValue=r,cc._RF.pop()},{}],CustomTypes:[function(e,t,n){"use strict";cc._RF.push(t,"d2d70bGmsJOAJetl6yMvak0","CustomTypes"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){return function(){}}();n.AnswerData=r,cc._RF.pop()},{}],DaAnData:[function(e,t,n){"use strict";cc._RF.push(t,"9a06b1CbqFBYb5+vTxq7BHO","DaAnData"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){this.types=1,this.typetype=[],this.checkpointsNum=0,this.typeDataArr=[],this.submitEnable=!1}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();n.DaAnData=r,cc._RF.pop()},{}],DataReporting:[function(e,t,n){"use strict";cc._RF.push(t,"fcbb2jwzKhJwKls3NHmiFBh","DataReporting");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ConstValue"),i=cc._decorator,a=i.ccclass,s=(i.property,function(){function e(){}var t;return t=e,e.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},e.prototype.dispatchEvent=function(e,t){void 0===t&&(t=null),o.ConstValue.IS_EDITIONS&&(t?courseware.page.sendToParent(e,t):courseware.page.sendToParent(e))},e.prototype.addEvent=function(e,t){o.ConstValue.IS_EDITIONS&&courseware.page.on(e,t)},e.isRepeatReport=!0,e=t=r([a],e)}());n.default=s,cc._RF.pop()},{"./ConstValue":"ConstValue"}],Dictionary:[function(e,t,n){"use strict";cc._RF.push(t,"cc667V2/zFJtI7/GBev9gvA","Dictionary"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util"),o=function(){function e(e){this.table={},this.nElements=0,this.toStr=e||r.defaultToString}return e.prototype.getValue=function(e){var t=this.table["$"+this.toStr(e)];if(!r.isUndefined(t))return t.value},e.prototype.setValue=function(e,t){if(!r.isUndefined(e)&&!r.isUndefined(t)){var n,o="$"+this.toStr(e),i=this.table[o];return r.isUndefined(i)?(this.nElements++,n=void 0):n=i.value,this.table[o]={key:e,value:t},n}},e.prototype.remove=function(e){var t="$"+this.toStr(e),n=this.table[t];if(!r.isUndefined(n))return delete this.table[t],this.nElements--,n.value},e.prototype.keys=function(){var e=[];for(var t in this.table)if(r.has(this.table,t)){var n=this.table[t];e.push(n.key)}return e},e.prototype.values=function(){var e=[];for(var t in this.table)if(r.has(this.table,t)){var n=this.table[t];e.push(n.value)}return e},e.prototype.forEach=function(e){for(var t in this.table)if(r.has(this.table,t)){var n=this.table[t];if(!1===e(n.key,n.value))return}},e.prototype.containsKey=function(e){return!r.isUndefined(this.getValue(e))},e.prototype.clear=function(){this.table={},this.nElements=0},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){var e="{";return this.forEach(function(t,n){e+="\n\t"+t+" : "+n}),e+"\n}"},e}();n.default=o,cc._RF.pop()},{"./util":"util"}],ErrorPanel:[function(e,t,n){"use strict";cc._RF.push(t,"78373xfPadEJ5IFn4sizh3z","ErrorPanel");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../BaseUI"),a=e("../../Manager/UIManager"),s=e("../../Manager/AudioManager"),c=e("../../Http/NetWork"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.biaoTi=null,t.shuoMing=null,t.tiShi=null,t.btnLab=null,t.btn=null,t.isClose=!1,t}var n;return r(t,e),n=t,t.prototype.start=function(){},t.prototype.onLoad=function(){},t.prototype.setPanel=function(e,t,n,r,o,i){void 0===i&&(i=!1);var a={shuoMing:e,biaoTi:t,tiShi:n};c.NetWork.getInstance().LogJournalReport("ErrorPanelLog",a),s.AudioManager.getInstance().playSound("sfx_erro",!1,1),this.shuoMing.string=e,this.isClose=i,this.callback=o,this.biaoTi.string=t||this.biaoTi.string,this.tiShi.string=n||this.tiShi.string,this.btnLab.string=r||this.btnLab.string,this.btn.interactable=this.isClose},t.prototype.onBtnClick=function(){s.AudioManager.getInstance().playSound("sfx_buttn",!1,1),this.callback&&this.callback(),this.isClose&&a.UIManager.getInstance().closeUI(n)},t.className="ErrorPanel",o([u(cc.Label)],t.prototype,"biaoTi",void 0),o([u(cc.Label)],t.prototype,"shuoMing",void 0),o([u(cc.Label)],t.prototype,"tiShi",void 0),o([u(cc.Label)],t.prototype,"btnLab",void 0),o([u(cc.Button)],t.prototype,"btn",void 0),t=n=o([p],t)}(i.BaseUI);n.default=h,cc._RF.pop()},{"../../Http/NetWork":"NetWork","../../Manager/AudioManager":"AudioManager","../../Manager/UIManager":"UIManager","../BaseUI":"BaseUI"}],FadeUIPlugin:[function(e,t,n){"use strict";cc._RF.push(t,"2fe78Vyt/NInb1oC42+tpUk","FadeUIPlugin");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delay=0,t}return r(t,e),t.prototype.onLoad=function(){var e=cc.delayTime(this.delay),t=cc.scaleTo(.5,2,2),n=cc.scaleTo(.5,0,0),r=cc.scaleTo(.5,1,1),o=cc.sequence(e,t,n,r);this.node.runAction(o)},o([s],t.prototype,"delay",void 0),t=o([a],t)}(cc.Component);n.FadeUIPlugin=c,cc._RF.pop()},{}],GameData:[function(e,t,n){"use strict";cc._RF.push(t,"65c35Ym/oRKD6h93ZiyEFOw","GameData"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();n.GameData=r,cc._RF.pop()},{}],GameMain:[function(e,t,n){"use strict";cc._RF.push(t,"df13ad6CdtFhp9uucAXsIC/","GameMain");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){var e=document.getElementById("loading-full");e&&(e.style.display="none")},t.prototype.start=function(){},t.prototype.update=function(e){},t=o([a],t)}(cc.Component));n.GameMain=s,cc._RF.pop()},{}],GamePanel:[function(e,t,n){"use strict";cc._RF.push(t,"246c2OOkGlKHoa6ZJOVEHI+","GamePanel");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../BaseUI"),a=e("../../Http/NetWork"),s=e("../../Utils/UIHelp"),c=e("../../Manager/AudioManager"),l=e("../../Data/ConstValue"),p=e("../../Manager/UIManager"),u=e("../../Data/DaAnData"),h=e("../panel/UploadAndReturnPanel"),d=e("../../Data/DataReporting"),g=e("../../collections/Set"),f=e("../Item/OverTips"),y=cc._decorator,v=y.ccclass,m=y.property,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.progressNode=null,t.bigNode=null,t.smallNode=null,t.selectPrefab=null,t.backButton=null,t.touchNode=null,t.loudSpeaker=null,t.loudspeakerBox=null,t.selectNode=null,t.types=0,t.typetype=[],t.checkpointsNum=0,t.typeDataArr=[],t.sourceSFArr=[],t.animalSFArr=[],t.foodSFArr=[],t.stationerySFArr=[],t.clothesSFArr=[],t.ItemNodeArr=[],t.AnswerBoardArr=[],t.selectNodeArr=[],t.selectNodeCenterArr=[],t.selectPosArr=[],t.answerArr=[],t.answer=[],t.answer1=[],t.answer2=[],t.answer3=[],t.answer4=[],t.player1=[],t.player2=[],t.player3=[],t.player4=[],t.typeArr=[],t.selectArr=[],t.finishArr=[],t.timeOutArr=[],t.checkpoint=1,t.selectType=0,t.touchTarget=null,t.isOver=0,t.selectMove=!1,t.overNum=0,t.progress=null,t.eventvalue={isResult:1,isLevel:1,levelData:[],result:4},t}return r(t,e),t.prototype.onLoad=function(){l.ConstValue.IS_TEACHER?(this.types=u.DaAnData.getInstance().types,this.typetype=u.DaAnData.getInstance().typetype,this.checkpointsNum=u.DaAnData.getInstance().checkpointsNum,this.typeDataArr=u.DaAnData.getInstance().typeDataArr,this.loadSourceSFArr(),p.UIManager.getInstance().openUI(h.default,null,212)):this.getNet()},t.prototype.start=function(){var e=this;d.default.getInstance().addEvent("end_game",this.onEndGame.bind(this)),this.bg.on(cc.Node.EventType.TOUCH_START,function(t){if(1!=e.isOver&&(e.isOver=2,e.eventvalue.result=2,e.eventvalue.levelData[e.checkpoint-1].result=2),1==e.isOver&&2==e.types){for(var n=0;n<e.timeOutArr.length;n++)clearTimeout(e.timeOutArr[n]);for(n=0;n<e.selectNodeCenterArr.length;n++)e.selectNodeCenterArr[n].getChildByName("bubble").stopAllActions(),e.selectNodeCenterArr[n].getChildByName("bubble").setScale(0)}}),this.loudspeakerBox.node.on(cc.Node.EventType.TOUCH_START,function(){e.loudSpeaker.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),c.AudioManager.getInstance().stopAll(),c.AudioManager.getInstance().playSound("\u628a\u8fd9\u4e9b\u7269\u54c1\u5206\u7c7b\u6574\u7406\uff0c\u5e76\u62d6\u5230\u5bf9\u5e94\u533a\u57df\u5185\u3002",!1)})},t.prototype.loadSourceSFArr=function(){var e=this;1==this.types?(cc.loader.loadResDir("images/gameUI/pic/animal",cc.SpriteFrame,function(t,n,r){if(!t){for(var o=0;o<n.length;o++)for(var i=0;i<n.length-1-o;i++){var a=n[i].name.length,s=n[i].name.substring(a-1,a),c=parseInt(s),l=n[i+1].name.length,p=n[i+1].name.substring(l-1,l);if(c>parseInt(p)){var u=n[i+1];n[i+1]=n[i],n[i]=u}}for(o=0;o<n.length;o++)e.animalSFArr.push(n[o]),e.animalSFArr.length+e.foodSFArr.length+e.stationerySFArr.length+e.clothesSFArr.length==20&&e.setPanel()}}),cc.loader.loadResDir("images/gameUI/pic/food",cc.SpriteFrame,function(t,n,r){if(!t){for(var o=0;o<n.length;o++)for(var i=0;i<n.length-1-o;i++){var a=n[i].name.length,s=n[i].name.substring(a-1,a),c=parseInt(s),l=n[i+1].name.length,p=n[i+1].name.substring(l-1,l);if(c>parseInt(p)){var u=n[i+1];n[i+1]=n[i],n[i]=u}}for(o=0;o<n.length;o++)e.foodSFArr.push(n[o]),e.animalSFArr.length+e.foodSFArr.length+e.stationerySFArr.length+e.clothesSFArr.length==20&&e.setPanel()}}),cc.loader.loadResDir("images/gameUI/pic/stationery",cc.SpriteFrame,function(t,n,r){if(!t){for(var o=0;o<n.length;o++)for(var i=0;i<n.length-1-o;i++){var a=n[i].name.length,s=n[i].name.substring(a-1,a),c=parseInt(s),l=n[i+1].name.length,p=n[i+1].name.substring(l-1,l);if(c>parseInt(p)){var u=n[i+1];n[i+1]=n[i],n[i]=u}}for(o=0;o<n.length;o++)e.stationerySFArr.push(n[o]),e.animalSFArr.length+e.foodSFArr.length+e.stationerySFArr.length+e.clothesSFArr.length==20&&e.setPanel()}}),cc.loader.loadResDir("images/gameUI/pic/clothes",cc.SpriteFrame,function(t,n,r){if(!t){for(var o=0;o<n.length;o++)for(var i=0;i<n.length-1-o;i++){var a=n[i].name.length,s=n[i].name.substring(a-1,a),c=parseInt(s),l=n[i+1].name.length,p=n[i+1].name.substring(l-1,l);if(c>parseInt(p)){var u=n[i+1];n[i+1]=n[i],n[i]=u}}for(o=0;o<n.length;o++)e.clothesSFArr.push(n[o]),e.animalSFArr.length+e.foodSFArr.length+e.stationerySFArr.length+e.clothesSFArr.length==20&&e.setPanel()}})):2==this.types&&(1==this.typetype[0]?cc.loader.loadResDir("images/gameUI/pic/cookies",cc.SpriteFrame,function(t,n,r){if(!t){for(var o=0;o<n.length;o++)for(var i=0;i<n.length-1-o;i++){var a=n[i].name.length,s=n[i].name.substring(a-1,a),c=parseInt(s),l=n[i+1].name.length,p=n[i+1].name.substring(l-1,l);if(c>parseInt(p)){var u=n[i+1];n[i+1]=n[i],n[i]=u}}for(o=0;o<n.length;o++)e.sourceSFArr.push(n[o]),9==e.sourceSFArr.length&&e.setPanel()}}):2==this.typetype[0]&&cc.loader.loadResDir("images/gameUI/pic/figure",cc.SpriteFrame,function(t,n,r){if(!t){for(var o=0;o<n.length;o++)for(var i=0;i<n.length-1-o;i++){var a=n[i].name.length,s=n[i].name.substring(a-1,a),c=parseInt(s),l=n[i+1].name.length,p=n[i+1].name.substring(l-1,l);if(c>parseInt(p)){var u=n[i+1];n[i+1]=n[i],n[i]=u}}for(o=0;o<n.length;o++)e.sourceSFArr.push(n[o]),9==e.sourceSFArr.length&&e.setPanel()}}))},t.prototype.onEndGame=function(){d.default.isRepeatReport&&(d.default.getInstance().dispatchEvent("addLog",{eventType:"clickSubmit",eventValue:JSON.stringify(this.eventvalue)}),d.default.isRepeatReport=!1),1==this.eventvalue.isResult?this.isOver=1:0==this.eventvalue.levelData.length&&(this.isOver=0),d.default.getInstance().dispatchEvent("end_finished",{eventType:"activity",eventValue:this.isOver})},t.prototype.onDestroy=function(){},t.prototype.onShow=function(){},t.prototype.setPanel=function(){if(1==this.types){for(var e=0;e<5;e++)this.sourceSFArr[e]=this.animalSFArr[e],this.sourceSFArr[5+e]=this.foodSFArr[e],this.sourceSFArr[10+e]=this.stationerySFArr[e],this.sourceSFArr[15+e]=this.clothesSFArr[e];for(e=0;e<this.checkpointsNum;e++)this.finishArr.push(!1)}for(e=0;e<this.checkpointsNum;e++)this.eventvalue.levelData.push({subject:[],answer:[],result:4});this.initAnswerArr(1)},t.prototype.initAnswerArr=function(e){if(1==this.types)var t=20;else if(2==this.types)t=27;this.answer=[];for(var n=0;n<this.checkpointsNum;n++)for(var r=n*t;r<(n+1)*t;r++)this.typeDataArr[r]&&this.answer.push(r);if(1==this.types){this.answer=[];for(r=(e-1)*t;r<e*t;r++)this.typeDataArr[r]&&this.answer.push(r)}this.progressBar(e,this.checkpointsNum),this.createItem(e),this.postItem()},t.prototype.setTag=function(e,t,n,r){var o=e.getChildByName("bigTag").getChildByName(t),i=e.getChildByName("smallTag").getChildByName(t);n&&(o.setScale(n),i.setScale(n)),r&&(o.angle=r,i.angle=r),o&&(o.active=!0),i&&(i.active=!0)},t.prototype.centerSelectNode=function(){for(var e=this,t=0;t<3;t++)this.selectNodeArr[t]&&this.selectNodeCenterArr.push(this.selectNodeArr[t]);var n=this.selectNodeCenterArr.length,r=-(600*(n-1))/2;c.AudioManager.getInstance().playSound("sfx_casemove",!1);var o=function(t){i.selectNodeCenterArr[t].setPosition(cc.v2(r+600*t-2e3,-300)),i.selectPosArr[t]=cc.v2(r+600*t-2e3,-300),setTimeout(function(){e.selectNodeCenterArr[t].runAction(cc.moveBy(.5,cc.v2(2e3,0)))},100*(n-1-t))},i=this;for(t=0;t<n;t++)o(t)},t.prototype.createSelectBoard=function(){var e=this;this.finishArr=[!1,!0,!1],this.selectNode=cc.instantiate(this.selectPrefab),this.selectNode.setPosition(cc.v2(0,0)),cc.director.getScene().getChildByName("Canvas").getChildByName("GamePanel").addChild(this.selectNode),this.selectNodeArr=[],this.checkColor(this.checkpoint)>1?(this.selectNode.getChildByName("colorNode").active=!0,this.selectNode.getChildByName("colorNode").getChildByName("bubble").scaleX=0,this.selectArr[0]=!0,this.finishArr[0]=!1,this.selectNodeArr[0]=this.selectNode.getChildByName("colorNode")):(this.selectNode.getChildByName("colorNode").active=!1,this.selectArr[0]=!1,this.finishArr[0]=!0),this.checkFigure(this.checkpoint)>1?(this.selectNode.getChildByName("figureNode").active=!0,this.selectNode.getChildByName("figureNode").getChildByName("bubble").scaleX=0,this.selectArr[1]=!0,this.finishArr[1]=!1,this.selectNodeArr[1]=this.selectNode.getChildByName("figureNode")):(this.selectNode.getChildByName("figureNode").active=!1,this.selectArr[1]=!1,this.finishArr[1]=!0),this.checkSize(this.checkpoint)>1?(this.selectNode.getChildByName("sizeNode").active=!0,this.selectNode.getChildByName("sizeNode").getChildByName("bubble").scaleX=0,this.selectArr[2]=!0,this.finishArr[2]=!1,this.selectNodeArr[2]=this.selectNode.getChildByName("sizeNode")):(this.selectNode.getChildByName("sizeNode").active=!1,this.selectArr[2]=!1,this.finishArr[2]=!0),this.centerSelectNode();for(var t=function(t){n.selectNode.children[t].on(cc.Node.EventType.TOUCH_START,function(n){if(!e.selectMove)if(e.finishArr[t]){if(1==e.isOver&&2==e.types)for(var r=0;r<e.timeOutArr.length;r++)clearTimeout(e.timeOutArr[t]);if(e.selectNode.children[t].getComponent(sp.Skeleton).setAnimation(0,e.getSelectAnimationName(t,!0,!0),!1),e.selectNode.children[t].getComponent(sp.Skeleton).setCompleteListener(function(n){n.animation.name==e.getSelectAnimationName(t,!0,!0)&&e.selectNode.children[t].getComponent(sp.Skeleton).setAnimation(0,e.getSelectAnimationName(t,!0,!1),!0)}),1==e.selectNode.children[t].getChildByName("bubble").scale)e.selectNode.children[t].getChildByName("bubble").runAction(cc.scaleTo(.3,0,0));else{for(var o=0;o<3;o++)e.selectNodeArr[o]&&0!=e.selectNodeArr[o].getChildByName("bubble").scale&&(e.selectNodeArr[o].getChildByName("bubble").stopAllActions(),e.selectNodeArr[o].getChildByName("bubble").runAction(cc.scaleTo(.3,0,0)));e.selectNode.children[t].getChildByName("bubble").runAction(cc.scaleTo(.3,1,1)),e.selectNode.children[t].getChildByName("fireworks").opacity=255,c.AudioManager.getInstance().playSound("sfx_flowerfly",!1),e.selectNode.children[t].getChildByName("fireworks").getComponent(sp.Skeleton).setAnimation(0,"animation",!1),e.selectNode.children[t].getChildByName("fireworks").getComponent(sp.Skeleton).setCompleteListener(function(n){"animation"==n.animation.name&&(e.selectNode.children[t].getChildByName("fireworks").opacity=0)})}if(1==e.isOver&&2==e.types)for(r=0;r<e.timeOutArr.length;r++)clearTimeout(e.timeOutArr[t])}else{e.selectMove=!0,e.selectType=t+1,1==e.selectType?c.AudioManager.getInstance().playSound("sfx_selogic",!1):2==e.selectType?c.AudioManager.getInstance().playSound("sfx_seneo",!1):3==e.selectType&&c.AudioManager.getInstance().playSound("sfx_semia",!1);for(o=0;o<3;o++)e.selectNodeArr[o]&&1==e.selectNodeArr[o].getChildByName("bubble").scale&&e.selectNodeArr[o].getChildByName("bubble").runAction(cc.scaleTo(.3,0,0));e.selectNode.children[t].getComponent(sp.Skeleton).setAnimation(0,e.getSelectAnimationName(t,e.finishArr[t],!0),!1),setTimeout(function(){c.AudioManager.getInstance().playSound("sfx_casemove",!1);for(var t=function(t){setTimeout(function(){t<e.selectNodeCenterArr.length-1?e.selectNodeCenterArr[t].runAction(cc.moveBy(.5,cc.v2(2e3,0))):e.selectNodeCenterArr[t].runAction(cc.sequence(cc.moveBy(.5,cc.v2(2e3,0)),cc.callFunc(function(){e.selectMove=!1,e.selectNode.children[t].getComponent(sp.Skeleton).setAnimation(0,e.getSelectAnimationName(t,e.finishArr[t],!1),!0),e.createAnswerBoard(e.checkpoint)})))},100*(e.selectNodeCenterArr.length-1-t))},n=0;n<e.selectNodeCenterArr.length;n++)t(n)},400)}}),n.selectNode.children[t].on(cc.Node.EventType.TOUCH_END,function(e){}),n.selectNode.children[t].on(cc.Node.EventType.TOUCH_CANCEL,function(e){})},n=this,r=0;r<this.selectNode.children.length;r++)t(r)},t.prototype.resetSelect=function(){var e=this;this.selectMove=!0,this.selectNode.getChildByName("colorNode").stopAllActions(),this.selectNode.getChildByName("figureNode").stopAllActions(),this.selectNode.getChildByName("sizeNode").stopAllActions();for(var t=0;t<this.selectNodeCenterArr.length;t++)this.selectNodeCenterArr[t].setPosition(cc.v2(this.selectPosArr[t].x,-300));this.selectNode.active=!0,c.AudioManager.getInstance().playSound("sfx_casemove",!1);var n=function(t){r.finishArr[t]?r.selectNodeCenterArr[t].active&&r.selectNodeCenterArr[t].getComponent(sp.Skeleton).setAnimation(0,r.getSelectAnimationName(t,!0,!1),!0):r.selectNodeCenterArr[t].active&&r.selectNodeCenterArr[t].getComponent(sp.Skeleton).setAnimation(0,r.getSelectAnimationName(t,!1,!1),!0),setTimeout(function(){e.selectNodeCenterArr[t].active&&(t==e.selectNodeCenterArr.length-1?e.selectNodeCenterArr[t].runAction(cc.sequence(cc.moveBy(.5,cc.v2(2e3,0)),cc.callFunc(function(){e.selectMove=!1,1==e.isOver&&e.showHow()}))):e.selectNodeCenterArr[t].runAction(cc.sequence(cc.moveBy(.5,cc.v2(2e3,0)),cc.callFunc(function(){e.selectMove=!1}))))},100*(r.selectNodeCenterArr.length-1-t))},r=this;for(t=0;t<this.selectNodeCenterArr.length;t++)n(t)},t.prototype.showHow=function(){for(var e=this,t=function(t){var r=setTimeout(function(){e.selectNodeCenterArr[t].getChildByName("bubble").runAction(cc.sequence(cc.scaleTo(.3,1,1),cc.delayTime(1),cc.scaleTo(.3,0,0))),e.selectNodeCenterArr[t].getChildByName("fireworks").opacity=255,c.AudioManager.getInstance().playSound("sfx_flowerfly",!1),e.selectNodeCenterArr[t].getChildByName("fireworks").getComponent(sp.Skeleton).setAnimation(0,"animation",!1),e.selectNodeCenterArr[t].getChildByName("fireworks").getComponent(sp.Skeleton).setCompleteListener(function(n){"animation"==n.animation.name&&(e.selectNode.children[t].getChildByName("fireworks").opacity=0)})},1600*t);n.timeOutArr.push(r)},n=this,r=0;r<this.selectNodeCenterArr.length;r++)t(r)},t.prototype.backButtonCallBack=function(){var e=this;c.AudioManager.getInstance().playSound("sfx_casemove",!1);for(var t=0;t<this.ItemNodeArr.length;++t)this.ItemNodeArr[t].opacity=255;var n=function(t){setTimeout(function(){t<e.AnswerBoardArr.length-1?e.AnswerBoardArr[t].runAction(cc.moveBy(.5,cc.v2(2e3,0))):e.AnswerBoardArr[t].runAction(cc.sequence(cc.moveBy(.5,cc.v2(2e3,0)),cc.callFunc(function(){if(t==e.AnswerBoardArr.length-1){e.resetSelect(),e.removeListenerOnItem(),e.player1=[],e.player2=[],e.player3=[],e.player4=[],e.answerArr=[],e.AnswerBoardArr=[],e.backButton.node.active=!1;for(var n=e.AnswerBoardArr.length,r=0;r<n;r++)e.AnswerBoardArr[r].removeFromParent(),e.AnswerBoardArr[r].destroy()}})))},100*(r.AnswerBoardArr.length-t-1))},r=this;for(t=0;t<this.AnswerBoardArr.length;t++)n(t)},t.prototype.removeListenerOnItem=function(){for(var e=0;e<this.ItemNodeArr.length;e++)this.ItemNodeArr[e].off(cc.Node.EventType.TOUCH_START),this.ItemNodeArr[e].off(cc.Node.EventType.TOUCH_MOVE),this.ItemNodeArr[e].off(cc.Node.EventType.TOUCH_END),this.ItemNodeArr[e].off(cc.Node.EventType.TOUCH_CANCEL),this.ItemNodeArr[e].parent.opacity=255},t.prototype.addListenerOnItem=function(){for(var e=this,t=function(t){cc.log(n.ItemNodeArr[t]),n.ItemNodeArr[t].getChildByName("node").on(cc.Node.EventType.TOUCH_START,function(t){if(!e.touchTarget&&0!=t.target.parent.opacity){c.AudioManager.getInstance().playSound("sfx_buttn",!1),e.touchTarget=t.target,e.touchNode.active=!0,e.touchNode.zIndex=100,t.target.parent.opacity=0;var n=e.node.convertToNodeSpaceAR(t.currentTouch._point);e.touchNode.setPosition(n),e.touchNode.setScale(t.target.parent.scale+.1),e.touchNode.getComponent(cc.Sprite).spriteFrame=t.target.getComponent(cc.Sprite).spriteFrame,e.touchNode.scale=t.target.parent.scale-.1}}),n.ItemNodeArr[t].getChildByName("node").on(cc.Node.EventType.TOUCH_MOVE,function(t){if(e.touchTarget==t.target){var n=e.node.convertToNodeSpaceAR(t.currentTouch._point);e.touchNode.setPosition(n);for(var r=0;r<e.AnswerBoardArr.length;r++){if(e.AnswerBoardArr[r].getChildByName("bigTag").getBoundingBox().contains(e.AnswerBoardArr[r].convertToNodeSpaceAR(t.currentTouch._point))){e.AnswerBoardArr[r].getChildByName("box").active=!0;for(var o=0;o<e.AnswerBoardArr.length;o++)o!=r&&(e.AnswerBoardArr[o].getChildByName("box").active=!1)}else e.overNum++;if(r==e.AnswerBoardArr.length-1){if(e.overNum==e.AnswerBoardArr.length)for(var i=0;i<e.AnswerBoardArr.length;i++)e.AnswerBoardArr[i].getChildByName("box").active=!1;e.overNum=0}}}}),n.ItemNodeArr[t].getChildByName("node").on(cc.Node.EventType.TOUCH_END,function(t){e.touchTarget==t.target&&(c.AudioManager.getInstance().playSound("sfx_buttn",!1),e.touchNode.active=!1,t.target.parent.opacity=255,e.touchTarget=null)}),n.ItemNodeArr[t].getChildByName("node").on(cc.Node.EventType.TOUCH_CANCEL,function(n){if(e.touchTarget==n.target){c.AudioManager.getInstance().playSound("sfx_buttn",!1);var r=0;if(e.AnswerBoardArr[0]&&e.AnswerBoardArr[0].getChildByName("bigTag").getBoundingBox().contains(e.AnswerBoardArr[0].convertToNodeSpaceAR(n.currentTouch._point))&&(-1!=e.answerArr[0].indexOf(e.answer[t])?(e.AnswerBoardArr[0].getChildByName("answerNode").children[e.player1.length].getComponent(cc.Sprite).spriteFrame=e.touchNode.getComponent(cc.Sprite).spriteFrame,e.AnswerBoardArr[0].getChildByName("answerNode").children[e.player1.length].setScale(n.target.parent.scale),2==e.types&&(e.selectNode.children[e.selectType-1].getChildByName("bubble").getChildByName("answer1").children[e.player1.length].getComponent(cc.Sprite).spriteFrame=e.touchNode.getComponent(cc.Sprite).spriteFrame,e.selectNode.children[e.selectType-1].getChildByName("bubble").getChildByName("answer1").children[e.player1.length].setScale(n.target.parent.scale/2)),e.player1.push(e.answer[t]),e.touchNode.active=!1):(1==e.types&&(c.AudioManager.getInstance().stopAll(),c.AudioManager.getInstance().playSound("\u8fd9\u597d\u50cf\u4e0d\u662f\u52a8\u7269\u54e6~",!1)),e.touchNode.active=!1,n.target.parent.opacity=255),e.touchTarget=null,e.eventvalue.levelData[e.checkpoint-1].answer[0]=e.answerArr[0],e.eventvalue.levelData[e.checkpoint-1].subject[0]=e.player1,e.eventvalue.levelData[e.checkpoint-1].result=2,e.eventvalue.result=2,r++),e.AnswerBoardArr[1]&&e.AnswerBoardArr[1].getChildByName("bigTag").getBoundingBox().contains(e.AnswerBoardArr[1].convertToNodeSpaceAR(n.currentTouch._point))&&(-1!=e.answerArr[1].indexOf(e.answer[t])?(e.AnswerBoardArr[1].getChildByName("answerNode").children[e.player2.length].getComponent(cc.Sprite).spriteFrame=e.touchNode.getComponent(cc.Sprite).spriteFrame,e.AnswerBoardArr[1].getChildByName("answerNode").children[e.player2.length].setScale(n.target.parent.scale),2==e.types&&(e.selectNode.children[e.selectType-1].getChildByName("bubble").getChildByName("answer2").children[e.player2.length].getComponent(cc.Sprite).spriteFrame=e.touchNode.getComponent(cc.Sprite).spriteFrame,e.selectNode.children[e.selectType-1].getChildByName("bubble").getChildByName("answer2").children[e.player2.length].setScale(n.target.parent.scale/2)),e.player2.push(e.answer[t]),e.touchNode.active=!1):(1==e.types&&(c.AudioManager.getInstance().stopAll(),c.AudioManager.getInstance().playSound("\u8fd9\u597d\u50cf\u4e0d\u662f\u98df\u7269\u54e6~",!1)),e.touchNode.active=!1,n.target.parent.opacity=255),e.touchTarget=null,e.eventvalue.levelData[e.checkpoint-1].answer[1]=e.answerArr[1],e.eventvalue.levelData[e.checkpoint-1].subject[1]=e.player2,e.eventvalue.levelData[e.checkpoint-1].result=2,e.eventvalue.result=2,r++),e.AnswerBoardArr[2]&&e.AnswerBoardArr[2].getChildByName("bigTag").getBoundingBox().contains(e.AnswerBoardArr[2].convertToNodeSpaceAR(n.currentTouch._point))&&(-1!=e.answerArr[2].indexOf(e.answer[t])?(e.AnswerBoardArr[2].getChildByName("answerNode").children[e.player3.length].getComponent(cc.Sprite).spriteFrame=e.touchNode.getComponent(cc.Sprite).spriteFrame,e.AnswerBoardArr[2].getChildByName("answerNode").children[e.player3.length].setScale(n.target.parent.scale),2==e.types&&(e.selectNode.children[e.selectType-1].getChildByName("bubble").getChildByName("answer3").children[e.player3.length].getComponent(cc.Sprite).spriteFrame=e.touchNode.getComponent(cc.Sprite).spriteFrame,e.selectNode.children[e.selectType-1].getChildByName("bubble").getChildByName("answer3").children[e.player3.length].setScale(n.target.parent.scale/2)),e.player3.push(e.answer[t]),e.touchNode.active=!1):(1==e.types&&(c.AudioManager.getInstance().stopAll(),c.AudioManager.getInstance().playSound("\u8fd9\u597d\u50cf\u4e0d\u662f\u6587\u5177\u54e6~",!1)),e.touchNode.active=!1,n.target.parent.opacity=255),e.touchTarget=null,e.eventvalue.levelData[e.checkpoint-1].answer[2]=e.answerArr[2],e.eventvalue.levelData[e.checkpoint-1].subject[2]=e.player3,e.eventvalue.levelData[e.checkpoint-1].result=2,e.eventvalue.result=2,r++),e.AnswerBoardArr[3]&&e.AnswerBoardArr[3].getChildByName("bigTag").getBoundingBox().contains(e.AnswerBoardArr[3].convertToNodeSpaceAR(n.currentTouch._point))&&(-1!=e.answerArr[3].indexOf(e.answer[t])?(e.AnswerBoardArr[3].getChildByName("answerNode").children[e.player4.length].getComponent(cc.Sprite).spriteFrame=e.touchNode.getComponent(cc.Sprite).spriteFrame,e.AnswerBoardArr[3].getChildByName("answerNode").children[e.player4.length].setScale(n.target.parent.scale),2==e.types&&(e.selectNode.children[e.selectType-1].getChildByName("bubble").getChildByName("answer3").children[e.player3.length].getComponent(cc.Sprite).spriteFrame=e.touchNode.getComponent(cc.Sprite).spriteFrame,e.selectNode.children[e.selectType-1].getChildByName("bubble").getChildByName("answer3").children[e.player3.length].setScale(n.target.parent.scale/2)),e.player4.push(e.answer[t]),e.touchNode.active=!1):(1==e.types&&(c.AudioManager.getInstance().stopAll(),c.AudioManager.getInstance().playSound("\u8fd9\u597d\u50cf\u4e0d\u662f\u8863\u670d\u54e6~",!1)),e.touchNode.active=!1,n.target.parent.opacity=255),e.touchTarget=null,e.eventvalue.levelData[e.checkpoint-1].answer[3]=e.answerArr[3],e.eventvalue.levelData[e.checkpoint-1].subject[3]=e.player4,e.eventvalue.levelData[e.checkpoint-1].result=2,e.eventvalue.result=2,r++),0==r&&(e.touchNode.active=!1,n.target.parent.opacity=255,e.touchTarget=null),e.isSuccess()){var o=0;1==e.types?e.finishArr[e.checkpoint-1]=!0:2==e.types&&(e.finishArr[e.selectType-1]=!0);for(var i=0;i<e.finishArr.length;i++)e.finishArr[i]&&o++;o==e.finishArr.length?(e.eventvalue.levelData[e.checkpoint-1].result=1,e.eventvalue.result=1,e.isOver=1,e.success()):(e.eventvalue.levelData[e.checkpoint-1].result=1,e.nextCheckPoint())}for(var a=0;a<e.AnswerBoardArr.length;a++)e.AnswerBoardArr[a].getChildByName("box").active=!1}})},n=this,r=0;r<this.ItemNodeArr.length;r++)t(r)},t.prototype.nextCheckPoint=function(){var e=this;1==this.types?(c.AudioManager.getInstance().stopAll(),s.UIHelp.showOverTip(1,"\u7b54\u5bf9\u5566\uff01\u4f60\u771f\u68d2\uff5e","\u4e0b\u4e00\u5173",function(){c.AudioManager.getInstance().playSound("\u7b54\u5bf9\u5566\uff01\u4f60\u771f\u68d2~",!1)},function(){c.AudioManager.getInstance().stopAll(),e.checkpoint++;for(var t=0;t<e.ItemNodeArr.length;t++)e.ItemNodeArr[t].removeFromParent(),e.ItemNodeArr[t].destroy();e.ItemNodeArr=[];for(t=0;t<e.AnswerBoardArr.length;t++)e.AnswerBoardArr[t].removeFromParent(),e.AnswerBoardArr[t].destroy();e.AnswerBoardArr=[],e.player1=[],e.player2=[],e.player3=[],e.player4=[],e.answer1=[],e.answer2=[],e.answer3=[],e.answer4=[],e.answerArr=[],e.initAnswerArr(e.checkpoint),p.UIManager.getInstance().closeUI(f.OverTips)})):2==this.types&&(c.AudioManager.getInstance().stopAll(),s.UIHelp.showOverTip(1,"\u505a\u5bf9\u5566\uff01\u4f60\u771f\u68d2\uff01\u8bd5\u8bd5\u5176\u4ed6\u529e\u6cd5\u5427\uff5e","\u518d\u8bd5\u8bd5",function(){c.AudioManager.getInstance().playSound("\u505a\u5bf9\u5566\uff01\u4f60\u771f\u68d2\uff01\u8bd5\u8bd5\u5176\u4ed6\u529e\u6cd5\u5427~",!1)},function(){e.backButtonCallBack(),p.UIManager.getInstance().closeUI(f.OverTips)}))},t.prototype.success=function(){var e=this;u.DaAnData.getInstance().submitEnable=!0,d.default.getInstance().dispatchEvent("addLog",{eventType:"clickSubmit",eventValue:JSON.stringify(this.eventvalue)}),1==this.types?(c.AudioManager.getInstance().stopAll(),this.progressBar(this.checkpointsNum,this.checkpointsNum),s.UIHelp.showOverTip(2,"\u95ef\u5173\u6210\u529f\uff0c\u4f60\u771f\u68d2\uff5e","\u91cd\u73a9\u4e00\u6b21",function(){c.AudioManager.getInstance().playSound("\u95ef\u5173\u6210\u529f\uff0c\u4f60\u771f\u68d2~",!1)},function(){e.checkpoint=1;for(var t=0;t<e.ItemNodeArr.length;t++)e.ItemNodeArr[t].removeFromParent(),e.ItemNodeArr[t].destroy();e.ItemNodeArr=[];for(t=0;t<e.AnswerBoardArr.length;t++)e.AnswerBoardArr[t].removeFromParent(),e.AnswerBoardArr[t].destroy();e.AnswerBoardArr=[],e.player1=[],e.player2=[],e.player3=[],e.player4=[],e.answer1=[],e.answer2=[],e.answer3=[],e.answer4=[],e.answerArr=[],e.finishArr=[],e.setPanel(),p.UIManager.getInstance().closeUI(f.OverTips)})):2==this.types&&(c.AudioManager.getInstance().stopAll(),s.UIHelp.showOverTip(2,"\u4f60\u771f\u68d2\uff01\u7b49\u7b49\u8fd8\u6ca1\u505a\u5b8c\u7684\u540c\u5b66\u5427","\u770b\u770b\u7ed3\u679c",function(){c.AudioManager.getInstance().playSound("\u95ef\u5173\u6210\u529f\uff0c\u4f60\u771f\u68d2~",!1)},function(){e.backButtonCallBack(),p.UIManager.getInstance().closeUI(f.OverTips)}))},t.prototype.getSelectAnimationName=function(e,t,n){var r;return n?t?0==e?r="luoqi_daan_dianji":1==e?r="paipai_daan_dianji":2==e&&(r="miya_daan_dianji"):0==e?r="luoqi_dianji":1==e?r="paipai_dianji":2==e&&(r="miya_dianji"):t?0==e?r="luoqi_daan_idle":1==e?r="paipai_daan_idle":2==e&&(r="miya_daan_idle"):0==e?r="luoqi_idle":1==e?r="paipai_idle":2==e&&(r="miya_idle"),r},t.prototype.addListenerOnSelect=function(){var e=this;if(this.selectNode)for(var t=function(t){n.selectNode.children[t].on(cc.Node.EventType.TOUCH_START,function(n){e.selectNode.children[t].getComponent(sp.Skeleton).setAnimation(0,e.getSelectAnimationName(t,e.finishArr[t],!0),!1),e.selectNode.children[t].getComponent(sp.Skeleton).setCompleteListener(function(n){n.animation.name==e.getSelectAnimationName(t,e.finishArr[t],!0)&&e.selectNode.children[t].getComponent(sp.Skeleton).setAnimation(0,e.getSelectAnimationName(t,e.finishArr[t],!1),!0)})}),n.selectNode.children[t].on(cc.Node.EventType.TOUCH_END,function(e){}),n.selectNode.children[t].on(cc.Node.EventType.TOUCH_CANCEL,function(e){})},n=this,r=0;r<this.selectNode.children.length;r++)t(r)},t.prototype.createAnswerBoard=function(e){var t=new g.default;if(t.clear(),1==this.types){for(var n=20*(e-1);n<20*e;n++)if(this.typeDataArr[n]){var r=n-20*(e-1);t.add(Math.floor(r/5))}for(var o=0;o<t.size();o++){var i=cc.instantiate(this.smallNode);this.AnswerBoardArr.push(i)}this.typeArr=t.toArray().slice();for(o=0;o<this.typeArr.length;o++)0==this.typeArr[o]?this.setTag(this.AnswerBoardArr[o],"animal"):1==this.typeArr[o]?this.setTag(this.AnswerBoardArr[o],"food"):2==this.typeArr[o]?this.setTag(this.AnswerBoardArr[o],"stationery"):3==this.typeArr[o]&&this.setTag(this.AnswerBoardArr[o],"clothe");for(o=0;o<this.answer.length;o++)this.answer[o]<20*(this.checkpoint-1)+5?this.answer1.push(this.answer[o]):this.answer[o]>=20*(this.checkpoint-1)+5&&this.answer[o]<20*(this.checkpoint-1)+10?this.answer2.push(this.answer[o]):this.answer[o]>=20*(this.checkpoint-1)+10&&this.answer[o]<20*(this.checkpoint-1)+15?this.answer3.push(this.answer[o]):this.answer[o]>=20*(this.checkpoint-1)+15&&this.answer[o]<20*(this.checkpoint-1)+20&&this.answer4.push(this.answer[o]);this.answer1.length&&this.answerArr.push(this.answer1),this.answer2.length&&this.answerArr.push(this.answer2),this.answer3.length&&this.answerArr.push(this.answer3),this.answer4.length&&this.answerArr.push(this.answer4)}else if(2==this.types){if(this.selectType)switch(this.selectType){case 1:if(this.checkColor(this.checkpoint),this.answer1.length){i=cc.instantiate(this.bigNode);this.setTag(i,"blue"),this.AnswerBoardArr.push(i)}if(this.answer2.length){i=cc.instantiate(this.bigNode);this.setTag(i,"red"),this.AnswerBoardArr.push(i)}if(this.answer3.length){i=cc.instantiate(this.bigNode);this.setTag(i,"yellow"),this.AnswerBoardArr.push(i)}break;case 2:if(this.checkFigure(this.checkpoint),this.answer1.length){i=cc.instantiate(this.bigNode);1==this.typetype[this.checkpoint-1]?this.setTag(i,"cookieSquare"):2==this.typetype[this.checkpoint-1]&&this.setTag(i,"figureSquare"),this.AnswerBoardArr.push(i)}if(this.answer2.length){i=cc.instantiate(this.bigNode);1==this.typetype[this.checkpoint-1]?this.setTag(i,"cookieTriangle"):2==this.typetype[this.checkpoint-1]&&this.setTag(i,"figureTriangle"),this.AnswerBoardArr.push(i)}if(this.answer3.length){i=cc.instantiate(this.bigNode);1==this.typetype[this.checkpoint-1]?this.setTag(i,"cookieCircle"):2==this.typetype[this.checkpoint-1]&&this.setTag(i,"figureCircle"),this.AnswerBoardArr.push(i)}break;case 3:if(this.checkSize(this.checkpoint),this.answer1.length){i=cc.instantiate(this.bigNode);this.setTag(i,"figureSquare",1,-20),this.AnswerBoardArr.push(i)}if(this.answer2.length){i=cc.instantiate(this.bigNode);this.setTag(i,"figureSquare",.8,-40),this.AnswerBoardArr.push(i)}if(this.answer3.length){i=cc.instantiate(this.bigNode);this.setTag(i,"figureSquare",.6,-60),this.AnswerBoardArr.push(i)}}this.answer1.length&&this.answerArr.push(this.answer1),this.answer2.length&&this.answerArr.push(this.answer2),this.answer3.length&&this.answerArr.push(this.answer3),this.backButton.node.active=!0}this.postAnswerBoard(),this.addListenerOnItem()},t.prototype.checkColor=function(e){this.answer1=[],this.answer2=[],this.answer3=[];for(var t=0,n=0;n<this.answer.length;n++)this.answer[n]<27*(e-1)+9?this.answer1.push(this.answer[n]):this.answer[n]<27*(e-1)+18&&this.answer[n]>=27*(e-1)+9?this.answer2.push(this.answer[n]):this.answer[n]<27*(e-1)+27&&this.answer[n]>=27*(e-1)+18&&this.answer3.push(this.answer[n]);return this.answer1.length&&t++,this.answer2.length&&t++,this.answer3.length&&t++,t},t.prototype.checkFigure=function(e){this.answer1=[],this.answer2=[],this.answer3=[];for(var t=[0,1,2,9,10,11,18,19,20],n=[3,4,5,12,13,14,21,22,23],r=[6,7,8,15,16,17,24,25,26],o=0,i=0;i<this.answer.length;i++){var a=this.answer[i]-27*(e-1);-1!=t.indexOf(a)?this.answer1.push(this.answer[i]):-1!=n.indexOf(a)?this.answer2.push(this.answer[i]):-1!=r.indexOf(a)&&this.answer3.push(this.answer[i])}return this.answer1.length&&o++,this.answer2.length&&o++,this.answer3.length&&o++,o},t.prototype.checkSize=function(e){this.answer1=[],this.answer2=[],this.answer3=[];for(var t=0,n=0;n<this.answer.length;n++)this.answer[n]%3==0?this.answer1.push(this.answer[n]):this.answer[n]%3==1?this.answer2.push(this.answer[n]):this.answer[n]%3==2&&this.answer3.push(this.answer[n]);return this.answer1.length&&t++,this.answer2.length&&t++,this.answer3.length&&t++,t},t.prototype.createItem=function(e){if(1==this.types){for(var t=20*(e-1);t<20*e;t++)if(this.typeDataArr[t]){var n=new cc.Node;(o=new cc.Node).addComponent(cc.Sprite).spriteFrame=this.sourceSFArr[t%20],(i=new cc.Node).addComponent(cc.Sprite).spriteFrame=this.sourceSFArr[t%20],i.color=cc.color(0,0,0),i.opacity=100,i.setPosition(cc.v2(-10,-10)),o.zIndex=1,i.zIndex=0,o.name="node",i.name="nodeShadow",n.addChild(o),n.addChild(i),this.ItemNodeArr.push(n)}}else if(2==this.types)for(var r=27*(e-1);r<27*e;r++)if(this.typeDataArr[r]){n=new cc.Node;var o,i,a=r%27+1;(o=new cc.Node).addComponent(cc.Sprite).spriteFrame=this.sourceSFArr[Math.ceil(a/3)-1],(i=new cc.Node).addComponent(cc.Sprite).spriteFrame=this.sourceSFArr[Math.ceil(a/3)-1],i.color=cc.color(0,0,0),i.setPosition(cc.v2(-10,-10)),i.opacity=100,o.zIndex=1,i.zIndex=0,o.name="node",i.name="nodeShadow",n.addChild(o),n.addChild(i);var s=a%3;2==s?n.scale=.8:0==s&&(n.scale=.6),this.ItemNodeArr.push(n)}},t.prototype.postAnswerBoard=function(){var e=this,t=this.AnswerBoardArr.length,n=450+100*(4-t),r=-(t-1)*n/2+80;2==this.types&&(r=-(t-1)*(n=610)/2+80),c.AudioManager.getInstance().playSound("sfx_casemove",!1);for(var o=function(o){cc.director.getScene().getChildByName("Canvas").getChildByName("GamePanel").addChild(i.AnswerBoardArr[o]),i.AnswerBoardArr[o].setPosition(cc.v2(r+o*n-2e3,-91)),setTimeout(function(){e.AnswerBoardArr[o].runAction(cc.moveBy(.5,cc.v2(2e3,0)))},100*(t-1-o))},i=this,a=0;a<t;a++)o(a)},t.prototype.postItem=function(){var e=this,t=this.ItemNodeArr.length,n=Math.ceil(t/2),r=Math.floor(t/2),o=210*-(n-1)/2-50,i=210*-(r-1)/2-50;if(c.AudioManager.getInstance().playSound("sfx_ciopn",!1,1,null,function(){1==e.checkpoint&&c.AudioManager.getInstance().playSound("\u628a\u8fd9\u4e9b\u7269\u54c1\u5206\u7c7b\u6574\u7406\uff0c\u5e76\u62d6\u5230\u5bf9\u5e94\u533a\u57df\u5185\u3002",!1)}),n==r)for(var a=function(r){s.ItemNodeArr[r].opacity=0,cc.director.getScene().getChildByName("Canvas").getChildByName("GamePanel").addChild(s.ItemNodeArr[r]),r<n?s.ItemNodeArr[r].setPosition(cc.v2(o+210*r,360)):s.ItemNodeArr[r].setPosition(cc.v2(i+210*(r-n),210)),setTimeout(function(){e.ItemNodeArr[r].runAction(cc.sequence(cc.spawn(cc.moveBy(.8,cc.v2(50,0)),cc.fadeIn(.8)),cc.callFunc(function(){r==t-1&&(1==e.types?e.createAnswerBoard(e.checkpoint):2==e.types&&e.createSelectBoard())})))},50*r)},s=this,l=0;l<t;l++)a(l);else{var p=function(r){u.ItemNodeArr[r].opacity=0,cc.director.getScene().getChildByName("Canvas").getChildByName("GamePanel").addChild(u.ItemNodeArr[r]),r<n?u.ItemNodeArr[r].setPosition(cc.v2(o+210*r,360)):u.ItemNodeArr[r].setPosition(cc.v2(i+210*(r-n),210)),setTimeout(function(){e.ItemNodeArr[r].runAction(cc.sequence(cc.spawn(cc.moveBy(.8,cc.v2(50,0)),cc.fadeIn(.8)),cc.callFunc(function(){r==t-1&&(1==e.types?e.createAnswerBoard(e.checkpoint):2==e.types&&e.createSelectBoard())})))},50*r)},u=this;for(l=0;l<t;l++)p(l)}},t.prototype.progressBar=function(e,t){if(1==this.types){if(2==t)this.progressNode.getChildByName("progress2").active=!0,this.progress=this.progressNode.getChildByName("progress2");else if(3==t)this.progressNode.getChildByName("progress3").active=!0,this.progress=this.progressNode.getChildByName("progress3");else if(4==t)this.progressNode.getChildByName("progress4").active=!0,this.progress=this.progressNode.getChildByName("progress4");else if(5==t)this.progressNode.getChildByName("progress5").active=!0,this.progress=this.progressNode.getChildByName("progress5");else if(1==t)return;this.progressNode.active=!0;for(var n=0;n<t;n++)this.progress.children[n].getChildByName("bar1").zIndex=1,this.progress.children[n].getChildByName("bar2").zIndex=2,this.progress.children[n].getChildByName("bar3").zIndex=3,n>e-1||(n<e-1?(this.progress.children[n].getChildByName("bar1").zIndex=3,this.progress.children[n].getChildByName("bar2").zIndex=2,this.progress.children[n].getChildByName("bar3").zIndex=1):n==e-1&&(this.progress.children[n].getChildByName("bar1").zIndex=1,this.progress.children[n].getChildByName("bar2").zIndex=3,this.progress.children[n].getChildByName("bar3").zIndex=2))}else 2==this.types&&(this.progressNode.active=!1)},t.prototype.isSuccess=function(){for(var e=0;e<4;e++)this.answerArr[e]||this.answerArr.push([]);this.answerArr[0].sort(),this.answerArr[1].sort(),this.answerArr[2].sort(),this.answerArr[3].sort(),this.player1.sort(),this.player2.sort(),this.player3.sort(),this.player4.sort();var t=this.isEqual(this.answerArr[0],this.player1),n=this.isEqual(this.answerArr[1],this.player2),r=this.isEqual(this.answerArr[2],this.player3),o=this.isEqual(this.answerArr[3],this.player4);return!!(t&&n&&r&&o)},t.prototype.isEqual=function(e,t){for(var n=e.length,r=0,o=0;o<e.length;o++)-1!=t.indexOf(e[o])&&r++;return r==n},t.prototype.getNet=function(){a.NetWork.getInstance().httpRequest(a.NetWork.GET_QUESTION+"?courseware_id="+a.NetWork.courseware_id,"GET","application/json;charset=utf-8",function(e,t){if(!e){var n=t;if(Array.isArray(n.data))return;var r=JSON.parse(n.data.courseware_content);null!=r&&(r.types?this.types=r.types:console.log("getNet\u4e2d\u8fd4\u56de\u7684types\u7684\u503c\u4e3a\u7a7a"),r.typetype?this.typetype=r.typetype:console.log("getNet\u4e2d\u8fd4\u56de\u7684typetype\u7684\u503c\u4e3a\u7a7a"),r.checkpointsNum?this.checkpointsNum=r.checkpointsNum:console.log("getNet\u4e2d\u8fd4\u56de\u7684checkpointsNum\u7684\u503c\u4e3a\u7a7a"),r.typeDataArr?this.typeDataArr=r.typeDataArr:console.log("getNet\u4e2d\u8fd4\u56de\u7684typeDataArr\u7684\u503c\u4e3a\u7a7a"),this.loadSourceSFArr())}}.bind(this),null)},t.className="GamePanel",o([m(cc.Node)],t.prototype,"bg",void 0),o([m(cc.Node)],t.prototype,"progressNode",void 0),o([m(cc.Prefab)],t.prototype,"bigNode",void 0),o([m(cc.Prefab)],t.prototype,"smallNode",void 0),o([m(cc.Prefab)],t.prototype,"selectPrefab",void 0),o([m(cc.Button)],t.prototype,"backButton",void 0),o([m(cc.Node)],t.prototype,"touchNode",void 0),o([m(cc.Node)],t.prototype,"loudSpeaker",void 0),o([m(cc.Layout)],t.prototype,"loudspeakerBox",void 0),t=o([v],t)}(i.BaseUI);n.default=A,cc._RF.pop()},{"../../Data/ConstValue":"ConstValue","../../Data/DaAnData":"DaAnData","../../Data/DataReporting":"DataReporting","../../Http/NetWork":"NetWork","../../Manager/AudioManager":"AudioManager","../../Manager/UIManager":"UIManager","../../Utils/UIHelp":"UIHelp","../../collections/Set":"Set","../BaseUI":"BaseUI","../Item/OverTips":"OverTips","../panel/UploadAndReturnPanel":"UploadAndReturnPanel"}],ListenerManager:[function(e,t,n){"use strict";cc._RF.push(t,"05dc2tRAiFMobMbxaPK4NIf","ListenerManager"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t,n){void 0===n&&(n=!1),this.mIsOnce=!1,this.mListener=e,this.mArgArray=t,this.mIsOnce=n}return Object.defineProperty(e.prototype,"listener",{get:function(){return this.mListener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"argArray",{get:function(){return this.mArgArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOnce",{get:function(){return this.mIsOnce},set:function(e){this.mIsOnce=e},enumerable:!0,configurable:!0}),e}();n.Delegate=r;var o=function(){function e(){this.mListenerMap=new Map}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.has=function(e,t,n){return null!==this.find(e,t,n)},e.prototype.trigger=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!e)return console.error("Listener type is null!"),!1;var o=[],i=[],a=this.mListenerMap.get(e);a&&(a.forEach(function(e,t){for(var n=0,r=e;n<r.length;n++){var s=r[n];o.push(s),i.push(t)}for(var c=e.length-1;c>=0;--c)e[c].isOnce&&e.splice(c,1);e.length<=0&&a.delete(t)}),a.size<=0&&this.mListenerMap.delete(e));for(var s=o.length,c=0;c<s;c++){var l=o[c];(t=l.listener).call.apply(t,[i[c]].concat(l.argArray,n))}return s>0},e.prototype.add=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this.addListener.apply(this,[e,t,n,!1].concat(r))},e.prototype.addOnce=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this.addListener.apply(this,[e,t,n,!0].concat(r))},e.prototype.remove=function(e,t,n,r){this.removeBy(function(o,i,a){return(!e||e===o)&&((!t||t===i)&&((!n||n===a.listener)&&!(r&&!a.isOnce)))})},e.prototype.removeAll=function(e){var t=this;this.mListenerMap.forEach(function(n,r){n.delete(e),n.size<=0&&t.mListenerMap.delete(r)})},e.prototype.addListener=function(e,t,n,o){for(var i=[],a=4;a<arguments.length;a++)i[a-4]=arguments[a];var s=this.find(e,t,n);if(s)s.isOnce=o,console.error("Listener is already exist!");else{var c=new r(n,i,o);this.mListenerMap.get(e).get(t).push(c)}},e.prototype.removeBy=function(e){var t=this;e&&this.mListenerMap.forEach(function(n,r){n.forEach(function(t,o){for(var i=t.length-1;i>=0;--i){var a=t[i];e(r,o,a)&&t.splice(i,1)}t.length<=0&&n.delete(o)}),n.size<=0&&t.mListenerMap.delete(r)})},e.prototype.find=function(e,t,n){if(!e)return console.error("Listener type is null!"),null;if(!t)return console.error("Caller type is null!"),null;if(!n)return console.error("Listener is null!"),null;var r,o;this.mListenerMap.has(e)?r=this.mListenerMap.get(e):(r=new Map,this.mListenerMap.set(e,r)),r.has(t)?o=r.get(t):(o=[],r.set(t,o));for(var i=0,a=o;i<a.length;i++){var s=a[i];if(s.mListener===n)return s}return null},e}();n.ListenerManager=o,cc._RF.pop()},{}],ListenerType:[function(e,t,n){"use strict";cc._RF.push(t,"8ea11Tcb4BI7ojchoTKxYZm","ListenerType"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.Test="Test",e.GameStart="GameStart",e.UpdateMainUI="UpdateMainUI",e.LoopUpdate="LoopUpdate",e.OnEndOfInput="OnEndOfInput",e.OnDaAnShanChu="OnDaAnShanChu",e.OnDaAnZengJia="OnDaAnZengJia",e.OnEditStateSwitching="OnEditStateSwitching",e}();n.ListenerType=r,cc._RF.pop()},{}],LoadingUI:[function(e,t,n){"use strict";cc._RF.push(t,"cf8a66RO2hJWJN7q1dt4/zn","LoadingUI");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../BaseUI"),a=e("../../Data/ConstValue"),s=e("./TeacherPanel"),c=e("./GamePanel"),l=e("../../Manager/UIManager"),p=e("../../Http/NetWork"),u=e("../../Data/DataReporting"),h=e("../../Manager/TimeManager"),d=cc._decorator,g=d.ccclass,f=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.progressLabel=null,t.dragonNode=null,t.isLoadStart=!1,t}return r(t,e),t.prototype.onLoad=function(){var e=this;p.NetWork.getInstance().GetRequest();u.default.getInstance().dispatchEvent("load start");var t=a.ConstValue.IS_TEACHER?s.default:c.default;l.UIManager.getInstance().openUI(t,null,0,function(){p.NetWork.getInstance().LogJournalReport("ResLoadEnd",{curTime:h.TimeManager.getInstance().getNowFormatDate()}),u.default.getInstance().dispatchEvent("load end"),u.default.getInstance().dispatchEvent("start"),e.node.active=!1},function(t,n,r){e.isLoadStart||(e.isLoadStart=!0,p.NetWork.getInstance().LogJournalReport("ResLoadStart",{curTime:h.TimeManager.getInstance().getNowFormatDate()})),e.progressBar.progress=t/n;var o=Math.round(t/n*100);u.default.getInstance().dispatchEvent("loading",o),e.progressLabel.string=o.toString()+"%";var i=t/n*609-304;e.dragonNode.x=i})},t.className="LoadingUI",o([f(cc.ProgressBar)],t.prototype,"progressBar",void 0),o([f(cc.Label)],t.prototype,"progressLabel",void 0),o([f(cc.Node)],t.prototype,"dragonNode",void 0),t=o([g],t)}(i.BaseUI);n.LoadingUI=y,cc._RF.pop()},{"../../Data/ConstValue":"ConstValue","../../Data/DataReporting":"DataReporting","../../Http/NetWork":"NetWork","../../Manager/TimeManager":"TimeManager","../../Manager/UIManager":"UIManager","../BaseUI":"BaseUI","./GamePanel":"GamePanel","./TeacherPanel":"TeacherPanel"}],LogWrap:[function(e,t,n){"use strict";cc._RF.push(t,"615f7lsxLNDWJSqVJoRIFW3","LogWrap"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Data/ConstValue"),o=function(){function e(){}return e.getDateString=function(){var e=new Date,t=e.getHours().toString(),n="";return n+=(1==t.length?"0"+t:t)+":",n+=(1==(t=e.getMinutes().toString()).length?"0"+t:t)+":",n+=(1==(t=e.getSeconds().toString()).length?"0"+t:t)+":",1==(t=e.getMilliseconds().toString()).length&&(t="00"+t),2==t.length&&(t="0"+t),n="["+(n+=t)+"]"},e.stack=function(e){var t=(new Error).stack.split("\n");t.shift();var n=[];t.forEach(function(e){var t,r=(e=e.substring(7)).split(" ");r.length<2?n.push(r[0]):n.push(((t={})[r[0]]=r[1],t))});var r=[];if(e<n.length-1)for(var o in n[e])r.push(o);var i=r[0].split(".");return i[0]+".js->"+i[1]+": "},e.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=console.log||cc.log;r.ConstValue.IS_EDITIONS||o.call(this,"%s%s:"+cc.js.formatStr.apply(cc,arguments),e.stack(2),e.getDateString())},e.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=console.log||cc.log;r.ConstValue.IS_EDITIONS||o.call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:#00CD00;",e.stack(2),e.getDateString())},e.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=console.log||cc.log;r.ConstValue.IS_EDITIONS||o.call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:#ee7700;",e.stack(2),e.getDateString())},e.err=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=console.log||cc.log;r.ConstValue.IS_EDITIONS||o.call(this,"%c%s%s:"+cc.js.formatStr.apply(cc,arguments),"color:red",e.stack(2),e.getDateString())},e}();n.LogWrap=o,cc._RF.pop()},{"../Data/ConstValue":"ConstValue"}],MathExtension:[function(e,t,n){"use strict";cc._RF.push(t,"81407Q2vf9Ezor3KOYrFKb8","MathExtension"),Math.randomRangeInt=function(e,t){var n=Math.random();return 1===n&&(n-=Number.EPSILON),e+Math.floor(n*(t-e))},Math.randomRangeFloat=function(e,t){return e+Math.random()*(t-e)},Math.fmod=function(e,t){return e-Math.floor(e/t)*t},cc._RF.pop()},{}],NetWork:[function(e,t,n){"use strict";cc._RF.push(t,"28048rmKeBJabaAlJ3kTstQ","NetWork"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Data/ConstValue"),o=e("../Manager/UIManager"),i=e("../UI/panel/ErrorPanel"),a=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.httpRequest=function(t,n,a,s,c){if(void 0===s&&(s=null),void 0===c&&(c=""),!r.ConstValue.IS_TEACHER||e.title_id)if(r.ConstValue.IS_TEACHER||e.courseware_id&&e.user_id){var l=new XMLHttpRequest;l.open(n,t),l.timeout=1e4,l.setRequestHeader("Content-Type",a),l.withCredentials=!0,l.onreadystatechange=function(){if(console.log("httpRequest rsp status",l.status,"        xhr.readyState",l.readyState,"        xhr.responseText",l.responseText),4==l.readyState&&l.status>=200&&l.status<=400){var p=JSON.parse(l.responseText);s&&0==p.errcode?s(!1,p):r.ConstValue.IS_EDITIONS&&o.UIManager.getInstance().openUI(i.default,null,1e3,function(){o.UIManager.getInstance().getUI(i.default).setPanel(p.errmsg+",\u8bf7\u8054\u7cfb\u5ba2\u670d\uff01","","","\u786e\u5b9a",function(){e.getInstance().httpRequest(t,n,a,s,c)},!1)})}},l.ontimeout=function(l){r.ConstValue.IS_EDITIONS&&o.UIManager.getInstance().openUI(i.default,null,1e3,function(){o.UIManager.getInstance().getUI(i.default).setPanel("\u7f51\u7edc\u4e0d\u4f73\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","","\u82e5\u91cd\u65b0\u8fde\u63a5\u65e0\u6548\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d","\u91cd\u65b0\u8fde\u63a5",function(){e.getInstance().httpRequest(t,n,a,s,c)},!0)}),console.log("httpRequest timeout"),s&&s(!0,null)},l.onerror=function(l){r.ConstValue.IS_EDITIONS&&o.UIManager.getInstance().openUI(i.default,null,1e3,function(){o.UIManager.getInstance().getUI(i.default).setPanel("\u7f51\u7edc\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","\u82e5\u91cd\u65b0\u8fde\u63a5\u65e0\u6548\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d","","\u91cd\u65b0\u8fde\u63a5",function(){e.getInstance().httpRequest(t,n,a,s,c)},!0)}),console.log("httpRequest error"),s&&s(!0,null)},l.send(c)}else o.UIManager.getInstance().openUI(i.default,null,1e3,function(){o.UIManager.getInstance().getUI(i.default).setPanel("\u5f02\u5e38\u7f16\u53f7\u4e3a001,\u8bf7\u8054\u7cfb\u5ba2\u670d\uff01","","","\u786e\u5b9a")});else o.UIManager.getInstance().openUI(i.default,null,1e3,function(){o.UIManager.getInstance().getUI(i.default).setPanel("URL\u53c2\u6570\u9519\u8bef,\u8bf7\u8054\u7cfb\u6280\u672f\u4eba\u5458\uff01","","","\u786e\u5b9a")})},e.prototype.GetRequest=function(){if(null!=e.theRequest)return e.theRequest;e.theRequest=new Object;var t=location.search;if(-1!=t.indexOf("?"))for(var n=t.substr(1).split("&"),r=0;r<n.length;r++)e.theRequest[n[r].split("=")[0]]=decodeURIComponent(n[r].split("=")[1]);return e.courseware_id=e.theRequest.id,e.title_id=e.theRequest.title_id,e.user_id=e.theRequest.user_id,e.empty=e.theRequest.empty,e.isLive=e.theRequest.isLive,this.LogJournalReport("CoursewareLogEvent",""),console.log("11111gaolei",e.courseware_id,"           ",e.theRequest.id,"           ",JSON.stringify(e.theRequest)),e.theRequest},e.prototype.GetIsOnline=function(){var e=1;return this.GetRequest().isOnline&&(e=this.GetRequest().isOnline),e},e.prototype.LogJournalReport=function(t,n){r.ConstValue.IS_EDITIONS&&((new Image).src=(e.isOnlineEnv?"https://logserver.haibian.com/statistical/?type=7&":"https://ceshi-statistical.haibian.com/?type=7&")+"course_id="+this.GetRequest().id+"&chapter_id="+this.GetRequest().chapter_id+"&user_id="+this.GetRequest().user_id+"&subject="+this.GetRequest().subject+"&event="+t+"&identity=1&extra="+JSON.stringify({url:location,CoursewareKey:r.ConstValue.CoursewareKey,empty:this.GetRequest().empty,CoursewareName:"wupinfenlei",data:n}))},e.isOnlineEnv=location.host.indexOf("ceshi-")<0&&location.host.indexOf("localhost")<0&&1==e.getInstance().GetIsOnline(),e.isProtocol=/http:/.test(window.location.protocol),e.isLocal=/localhost/.test(window.location.href)||e.isProtocol,e.isOwcr="owcr:"==location.protocol||"file:"==location.protocol,e.BASE=e.isOnlineEnv?"https://courseware.haibian.com":e.isLocal?"http://ceshi.courseware.haibian.com":"https://ceshi_courseware.haibian.com",e.GET_QUESTION=e.BASE+"/get",e.GET_USER_PROGRESS=e.BASE+"/get/answer",e.GET_TITLE=e.BASE+"/get/title",e.ADD=e.BASE+"/add",e.MODIFY=e.BASE+"/modify",e.CLEAR=e.BASE+"/clear",e.courseware_id=null,e.title_id=null,e.user_id=null,e.empty=!1,e.chapter_id=null,e.subject=null,e.isLive=null,e.theRequest=null,e}();n.NetWork=a,cc._RF.pop()},{"../Data/ConstValue":"ConstValue","../Manager/UIManager":"UIManager","../UI/panel/ErrorPanel":"ErrorPanel"}],OverTips:[function(e,t,n){"use strict";cc._RF.push(t,"d402btyepNJObcDSUkLUQcr","OverTips");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../BaseUI"),a=e("../../UIComm/Tools"),s=e("../../Manager/UIManager"),c=e("../../Manager/AudioManager"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(e){function t(){var t=e.call(this)||this;return t.label_tip=null,t.spine_false=null,t.spine_true=null,t.spine_complete=null,t.node_close=null,t.button=null,t.callback=null,t}var n;return r(t,e),n=t,t.prototype.start=function(){this.node_close.on(cc.Node.EventType.TOUCH_END,this.onClickClose,this)},t.prototype.onDisable=function(){this.node_close.off(cc.Node.EventType.TOUCH_END,this.onClickClose,this)},t.prototype.init=function(e,t,n,r,o){var i=this;switch(void 0===t&&(t=""),void 0===n&&(n=""),this.callback=r,this.spine_false.node.active=0==e,this.spine_true.node.active=1==e,this.spine_complete.node.active=2==e,this.label_tip.string=t,n?(this.button.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=n,this.button.on("click",o,this)):this.button.active=!1,e){case 0:a.Tools.playSpine(this.spine_false,"false",!1,this.delayClose.bind(this)),c.AudioManager.getInstance().playSound("sfx_genneg",!1,1);break;case 1:a.Tools.playSpine(this.spine_true,"true",!1,this.delayClose.bind(this)),c.AudioManager.getInstance().playSound("sfx_genpos",!1,1),setTimeout(function(){i.callback()},1500);break;case 2:a.Tools.playSpine(this.spine_complete,"in",!1,function(){a.Tools.playSpine(this.spine_complete,"stand",!0,this.delayClose.bind(this))}.bind(this)),c.AudioManager.getInstance().playSound("sfx_geupgrd",!1,1),setTimeout(function(){i.callback()},1500)}var s=this.label_tip.node.position,l=cc.v2(s.x,s.y-72.8),p=cc.v2(s.x,s.y+12),u=cc.v2(s.x,s.y-8),h=cc.v2(s.x,s.y+7.3);this.label_tip.node.position=l,this.label_tip.node.runAction(cc.sequence(cc.moveTo(.08,p),cc.moveTo(.08,u),cc.moveTo(.08,h),cc.moveTo(.06,s)))},t.prototype.delayClose=function(){},t.prototype.onClickClose=function(e,t){e&&c.AudioManager.getInstance().playSound("sfx_buttn",!1,1),this.callback&&this.callback(),s.UIManager.getInstance().closeUI(n)},t.className="OverTips",o([u(cc.Label)],t.prototype,"label_tip",void 0),o([u(sp.Skeleton)],t.prototype,"spine_false",void 0),o([u(sp.Skeleton)],t.prototype,"spine_true",void 0),o([u(sp.Skeleton)],t.prototype,"spine_complete",void 0),o([u(cc.Node)],t.prototype,"node_close",void 0),o([u(cc.Node)],t.prototype,"button",void 0),t=n=o([p],t)}(i.BaseUI);n.OverTips=h,cc._RF.pop()},{"../../Manager/AudioManager":"AudioManager","../../Manager/UIManager":"UIManager","../../UIComm/Tools":"Tools","../BaseUI":"BaseUI"}],Set:[function(e,t,n){"use strict";cc._RF.push(t,"d8d97HoTUFPm7oqXrj5GU8u","Set"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util"),o=e("./arrays"),i=e("./Dictionary"),a=function(){function e(e){this.dictionary=new i.default(e)}return e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.add=function(e){return!this.contains(e)&&!r.isUndefined(e)&&(this.dictionary.setValue(e,e),!0)},e.prototype.intersection=function(e){var t=this;this.forEach(function(n){return e.contains(n)||t.remove(n),!0})},e.prototype.union=function(e){var t=this;e.forEach(function(e){return t.add(e),!0})},e.prototype.difference=function(e){var t=this;e.forEach(function(e){return t.remove(e),!0})},e.prototype.isSubsetOf=function(e){if(this.size()>e.size())return!1;var t=!0;return this.forEach(function(n){return!!e.contains(n)||(t=!1,!1)}),t},e.prototype.remove=function(e){return!!this.contains(e)&&(this.dictionary.remove(e),!0)},e.prototype.forEach=function(e){this.dictionary.forEach(function(t,n){return e(n)})},e.prototype.toArray=function(){return this.dictionary.values()},e.prototype.isEmpty=function(){return this.dictionary.isEmpty()},e.prototype.size=function(){return this.dictionary.size()},e.prototype.clear=function(){this.dictionary.clear()},e.prototype.toString=function(){return o.toString(this.toArray())},e}();n.default=a,cc._RF.pop()},{"./Dictionary":"Dictionary","./arrays":"arrays","./util":"util"}],StringExtension:[function(e,t,n){"use strict";cc._RF.push(t,"85c1bk+r3FHf5RqunqKCFt+","StringExtension"),String.prototype.format=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Array.prototype.slice.call(arguments),r=0;return this.replace(/%s/g,function(e,t){return n[r++]})},cc._RF.pop()},{}],SubmissionPanel:[function(e,t,n){"use strict";cc._RF.push(t,"bdbeagD9lJH1p1yPQBbNwPK","SubmissionPanel");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../BaseUI"),a=e("../../Manager/UIManager"),s=e("../../Http/NetWork"),c=e("../../Utils/UIHelp"),l=e("../../Data/ConstValue"),p=e("./ErrorPanel"),u=e("../../Data/DaAnData"),h=cc._decorator,d=h.ccclass,g=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return r(t,e),n=t,t.prototype.start=function(){},t.prototype.onQueDingBtnClick=function(e){this.DetectionNet()},t.prototype.onQuXiaoBtnClick=function(e){a.UIManager.getInstance().closeUI(n)},t.prototype.DetectionNet=function(){if(s.NetWork.title_id){var e=JSON.stringify({CoursewareKey:l.ConstValue.CoursewareKey,types:u.DaAnData.getInstance().types,typetype:u.DaAnData.getInstance().typetype,checkpointsNum:u.DaAnData.getInstance().checkpointsNum,typeDataArr:u.DaAnData.getInstance().typeDataArr});s.NetWork.getInstance().httpRequest(s.NetWork.GET_TITLE+"?title_id="+s.NetWork.title_id,"GET","application/json;charset=utf-8",function(t,n){if(!t)if(null==n.data.courseware_content||""==n.data.courseware_content)this.AddNet(e);else{s.NetWork.courseware_id=n.data.courseware_id;var r=JSON.parse(n.data.courseware_content);s.NetWork.empty||(r.CoursewareKey==l.ConstValue.CoursewareKey?this.ModifyNet(e):a.UIManager.getInstance().openUI(p.default,1e3,null,function(){a.UIManager.getInstance().getUI(p.default).setPanel("\u8be5titleId\u5df2\u88ab\u4f7f\u7528,\u8bf7\u8054\u7cfb\u6280\u672f\u8001\u5e08\u89e3\u51b3\uff01\ntitleId="+s.NetWork.title_id,"","","\u786e\u5b9a")}))}}.bind(this),null)}else a.UIManager.getInstance().openUI(p.default,1e3,null,function(){a.UIManager.getInstance().getUI(p.default).setPanel("titleId\u4e3a\u7a7a,\u8bf7\u8054\u7cfb\u6280\u672f\u8001\u5e08\u89e3\u51b3\uff01\ntitleId="+s.NetWork.title_id,"","","\u786e\u5b9a")})},t.prototype.AddNet=function(e){var t={title_id:s.NetWork.title_id,courseware_content:e,is_result:1,is_lavel:1};s.NetWork.getInstance().httpRequest(s.NetWork.ADD,"POST","application/json;charset=utf-8",function(e,t){e||(c.UIHelp.showTip("\u7b54\u6848\u63d0\u4ea4\u6210\u529f"),a.UIManager.getInstance().closeUI(n))}.bind(this),JSON.stringify(t))},t.prototype.ModifyNet=function(e){var t={courseware_id:s.NetWork.courseware_id,courseware_content:e,is_result:1,is_lavel:0};s.NetWork.getInstance().httpRequest(s.NetWork.MODIFY,"POST","application/json;charset=utf-8",function(e,t){e||(c.UIHelp.showTip("\u7b54\u6848\u4fee\u6539\u6210\u529f"),a.UIManager.getInstance().closeUI(n))}.bind(this),JSON.stringify(t))},t.className="SubmissionPanel",t=n=o([d],t)}(i.BaseUI));n.default=g,cc._RF.pop()},{"../../Data/ConstValue":"ConstValue","../../Data/DaAnData":"DaAnData","../../Http/NetWork":"NetWork","../../Manager/UIManager":"UIManager","../../Utils/UIHelp":"UIHelp","../BaseUI":"BaseUI","./ErrorPanel":"ErrorPanel"}],TeacherPanel:[function(e,t,n){"use strict";cc._RF.push(t,"70c27EBmWdPJYtgMQ9dyPZS","TeacherPanel");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../BaseUI"),a=e("../../Manager/UIManager"),s=e("../../Http/NetWork"),c=e("../../Utils/UIHelp"),l=e("../../Data/DaAnData"),p=e("../../collections/Set"),u=e("./GamePanel"),h=e("../../Manager/ListenerManager"),d=e("../../Data/ListenerType"),g=cc._decorator,f=g.ccclass,y=g.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.oriMaterial=null,t.grayMaterial=null,t.autoOptionNode=null,t.manualOptionNode=null,t.cookieNode=null,t.figureNode=null,t.content=null,t.buttonNode=null,t.pullNode=null,t.checkpointButton=null,t.toggleContainer=[],t.tipLabel=null,t.tipNode=null,t.typeArr=[],t.typeDataArr=[],t.typetype=[],t.toggleArr=[],t.imageArr=[],t.answer=[],t}return r(t,e),t.prototype.start=function(){this.getNet()},t.prototype.onToggleContainer=function(e){switch(this.toggleContainer.indexOf(e)){case 0:l.DaAnData.getInstance().types=1,l.DaAnData.getInstance().checkpointsNum=0,this.checkpointButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u9009\u62e9\u5173\u5361\u6570",this.content.getChildByName("label1").active=!0,this.checkpointButton.node.active=!0,this.updateTypes();break;case 1:this.typetype=[1],l.DaAnData.getInstance().typetype=this.typetype,l.DaAnData.getInstance().types=2,l.DaAnData.getInstance().checkpointsNum=1,this.content.getChildByName("label1").active=!1,this.checkpointButton.node.active=!1,this.updateTypes()}},t.prototype.onToggleCallBack=function(e){var t=e,n=this.typeArr.indexOf(t.node.parent.parent),r=l.DaAnData.getInstance().checkpointsNum;if(t.node.parent.children[0].getComponent(cc.Toggle).isChecked){if(2==this.typetype[n]){this.typetype[n]=1,this.typeArr[n].getChildByName("imageNode").getChildByName("Node").destroy(),this.typeArr[n].getChildByName("imageNode").removeAllChildren();var o=cc.instantiate(this.cookieNode);this.typeArr[n].getChildByName("imageNode").addChild(o)}}else if(t.node.parent.children[1].getComponent(cc.Toggle).isChecked&&1==this.typetype[n]){this.typetype[n]=2,this.typeArr[n].getChildByName("imageNode").getChildByName("Node").destroy(),this.typeArr[n].getChildByName("imageNode").removeAllChildren();o=cc.instantiate(this.figureNode);this.typeArr[n].getChildByName("imageNode").addChild(o)}l.DaAnData.getInstance().typetype=this.typetype,this.toggleArr=[],this.imageArr=[];for(var i=0;i<r;i++)for(var a=0;a<27;a++)this.toggleArr[27*i+a]=this.typeArr[i].getChildByName("imageNode").getChildByName("Node").children[a].getChildByName("toggle").getComponent(cc.Toggle),this.imageArr[27*i+a]=this.typeArr[i].getChildByName("imageNode").getChildByName("Node").children[a].getComponent(cc.Sprite);this.addToggleCallBack()},t.prototype.one=function(){l.DaAnData.getInstance().checkpointsNum=1,this.typetype=[1],l.DaAnData.getInstance().typetype=this.typetype,this.checkpointButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="1   \u5173",this.pullUp(),this.updateTypes()},t.prototype.two=function(){l.DaAnData.getInstance().checkpointsNum=2,this.typetype=[1,1],l.DaAnData.getInstance().typetype=this.typetype,this.checkpointButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="2   \u5173",this.pullUp(),this.updateTypes()},t.prototype.three=function(){l.DaAnData.getInstance().checkpointsNum=3,this.typetype=[1,1,1],l.DaAnData.getInstance().typetype=this.typetype,this.checkpointButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="3   \u5173",this.pullUp(),this.updateTypes()},t.prototype.four=function(){l.DaAnData.getInstance().checkpointsNum=4,this.typetype=[1,1,1,1],l.DaAnData.getInstance().typetype=this.typetype,this.checkpointButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="4   \u5173",this.pullUp(),this.updateTypes()},t.prototype.five=function(){l.DaAnData.getInstance().checkpointsNum=5,this.typetype=[1,1,1,1,1],l.DaAnData.getInstance().typetype=this.typetype,this.checkpointButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="5   \u5173",this.pullUp(),this.updateTypes()},t.prototype.pullUp=function(){this.pullNode.runAction(cc.moveTo(.1,cc.v2(0,150))),this.checkpointButton.interactable=!0,this.checkpointButton.node.getChildByName("layout").off(cc.Node.EventType.TOUCH_START)},t.prototype.pullDown=function(){var e=this;this.pullNode.runAction(cc.moveBy(.1,cc.v2(0,-150))),this.checkpointButton.interactable=!1,this.checkpointButton.node.getChildByName("layout").on(cc.Node.EventType.TOUCH_START,function(t){t.stopPropagation(),e.pullNode.getPosition()!=cc.v2(0,150)&&(e.pullNode.runAction(cc.moveTo(.1,cc.v2(0,150))),e.checkpointButton.interactable=!0,e.checkpointButton.node.getChildByName("layout").off(cc.Node.EventType.TOUCH_START))})},t.prototype.updateTypes=function(){for(var e=0;e<this.typeArr.length;e++)this.typeArr[e].destroy();this.typeArr=[];var t=l.DaAnData.getInstance().checkpointsNum;if(1==l.DaAnData.getInstance().types){for(e=0;e<t;e++){(r=cc.instantiate(this.autoOptionNode)).getChildByName("title").getComponent(cc.Label).string=this.titleChange(e+1),this.content.addChild(r),this.typeArr.push(r)}this.toggleArr=[];for(e=0;e<t;e++)for(var n=0;n<5;n++)this.toggleArr[20*e+n]=this.typeArr[e].getChildByName("label1").children[n].getChildByName("New Toggle").getComponent(cc.Toggle),this.toggleArr[20*e+5+n]=this.typeArr[e].getChildByName("label2").children[n].getChildByName("New Toggle").getComponent(cc.Toggle),this.toggleArr[20*e+10+n]=this.typeArr[e].getChildByName("label3").children[n].getChildByName("New Toggle").getComponent(cc.Toggle),this.toggleArr[20*e+15+n]=this.typeArr[e].getChildByName("label4").children[n].getChildByName("New Toggle").getComponent(cc.Toggle),this.imageArr[20*e+n]=this.typeArr[e].getChildByName("label1").children[n].getComponent(cc.Sprite),this.imageArr[20*e+5+n]=this.typeArr[e].getChildByName("label2").children[n].getComponent(cc.Sprite),this.imageArr[20*e+10+n]=this.typeArr[e].getChildByName("label3").children[n].getComponent(cc.Sprite),this.imageArr[20*e+15+n]=this.typeArr[e].getChildByName("label4").children[n].getComponent(cc.Sprite);this.addToggleCallBack()}else if(2==l.DaAnData.getInstance().types){for(e=0;e<t;e++){var r=cc.instantiate(this.manualOptionNode),o=cc.instantiate(this.cookieNode);r.getChildByName("imageNode").addChild(o),r.getChildByName("Types").getChildByName("toggle1").on("toggle",this.onToggleCallBack,this),r.getChildByName("Types").getChildByName("toggle2").on("toggle",this.onToggleCallBack,this),this.content.addChild(r),this.typeArr.push(r)}this.toggleArr=[];for(e=0;e<t;e++)for(n=0;n<27;n++)this.toggleArr[27*e+n]=this.typeArr[e].getChildByName("imageNode").getChildByName("Node").children[n].getChildByName("toggle").getComponent(cc.Toggle),this.imageArr[27*e+n]=this.typeArr[e].getChildByName("imageNode").getChildByName("Node").children[n].getComponent(cc.Sprite);this.addToggleCallBack()}this.buttonNode.zIndex=100},t.prototype.addToggleCallBack=function(){for(var e=this,t=0;t<this.toggleArr.length;t++)this.toggleArr[t].node.off("toggle");var n=function(t){r.toggleArr[t].node.on("toggle",function(n){var r=0;1==l.DaAnData.getInstance().types?r=Math.floor(t/20):2==l.DaAnData.getInstance().types&&(r=Math.floor(t/27));var o=0,i=0;if(e.answer=[],1==l.DaAnData.getInstance().types){for(var a=20*r;a<20*(r+1);a++)e.toggleArr[a].isChecked&&o++;i=20}else if(2==l.DaAnData.getInstance().types){for(a=27*r;a<27*(r+1);a++)e.toggleArr[a].isChecked&&(o++,e.answer.push(a));i=27}if(2==l.DaAnData.getInstance().types){if(e.checkColor(r+1))return void(e.toggleArr[t].isChecked=!1);if(e.checkFigure(r+1))return void(e.toggleArr[t].isChecked=!1);if(e.checkSize(r+1))return void(e.toggleArr[t].isChecked=!1)}if(o>10&&(e.toggleArr[t].isChecked=!1),o>=10)for(var s=i*r;s<i*(r+1);s++)0==e.toggleArr[s].isChecked&&e.imageArr[s].setMaterial(0,e.grayMaterial);else for(var c=i*r;c<i*(r+1);c++)e.imageArr[c].setMaterial(0,e.oriMaterial)})},r=this;for(t=0;t<this.toggleArr.length;t++)n(t)},t.prototype.checkColor=function(e){for(var t=0,n=0,r=0,o=0;o<this.answer.length;o++)this.answer[o]<27*(e-1)+9?t++:this.answer[o]<27*(e-1)+18&&this.answer[o]>=27*(e-1)+9?n++:this.answer[o]<27*(e-1)+27&&this.answer[o]>=27*(e-1)+18&&r++;return t>6?(this.tipLabel.string="\u84dd\u8272\u7684\u7269\u54c1\u9009\u62e9\u8d85\u8fc76\u4e2a\uff0c\u6bcf\u79cd\u989c\u8272\u7684\u7269\u54c1\u9009\u62e9\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc76\u4e2a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",this.tip(),!0):n>6?(this.tipLabel.string="\u7ea2\u8272\u7684\u7269\u54c1\u9009\u62e9\u8d85\u8fc76\u4e2a\uff0c\u6bcf\u79cd\u989c\u8272\u7684\u7269\u54c1\u9009\u62e9\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc76\u4e2a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",this.tip(),!0):r>6&&(this.tipLabel.string="\u9ec4\u8272\u7684\u7269\u54c1\u9009\u62e9\u8d85\u8fc76\u4e2a\uff0c\u6bcf\u79cd\u989c\u8272\u7684\u7269\u54c1\u9009\u62e9\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc76\u4e2a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",this.tip(),!0)},t.prototype.checkFigure=function(e){for(var t=0,n=0,r=0,o=[0,1,2,9,10,11,18,19,20],i=[3,4,5,12,13,14,21,22,23],a=[6,7,8,15,16,17,24,25,26],s=0;s<this.answer.length;s++){var c=this.answer[s]-27*(e-1);-1!=o.indexOf(c)?t++:-1!=i.indexOf(c)?n++:-1!=a.indexOf(c)&&r++}return t>6?(this.tipLabel.string="\u6b63\u65b9\u5f62\u7684\u7269\u54c1\u9009\u62e9\u8d85\u8fc76\u4e2a\uff0c\u6bcf\u79cd\u5f62\u72b6\u7684\u7269\u54c1\u9009\u62e9\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc76\u4e2a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",this.tip(),!0):n>6?(this.tipLabel.string="\u4e09\u89d2\u5f62\u7684\u7269\u54c1\u9009\u62e9\u8d85\u8fc76\u4e2a\uff0c\u6bcf\u79cd\u5f62\u72b6\u7684\u7269\u54c1\u9009\u62e9\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc76\u4e2a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",this.tip(),!0):r>6&&(this.tipLabel.string="\u5706\u5f62\u7684\u7269\u54c1\u9009\u62e9\u8d85\u8fc76\u4e2a\uff0c\u6bcf\u79cd\u5f62\u72b6\u7684\u7269\u54c1\u9009\u62e9\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc76\u4e2a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",this.tip(),!0)},t.prototype.checkSize=function(e){for(var t=0,n=0,r=0,o=0;o<this.answer.length;o++)this.answer[o]%3==0?t++:this.answer[o]%3==1?n++:this.answer[o]%3==2&&r++;return t>6?(this.tipLabel.string="\u5927\u53f7\u7684\u7269\u54c1\u9009\u62e9\u8d85\u8fc76\u4e2a\uff0c\u6bcf\u79cd\u5927\u5c0f\u7684\u7269\u54c1\u9009\u62e9\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc76\u4e2a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",this.tip(),!0):n>6?(this.tipLabel.string="\u4e2d\u53f7\u7684\u7269\u54c1\u9009\u62e9\u8d85\u8fc76\u4e2a\uff0c\u6bcf\u79cd\u5927\u5c0f\u7684\u7269\u54c1\u9009\u62e9\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc76\u4e2a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",this.tip(),!0):r>6&&(this.tipLabel.string="\u5c0f\u53f7\u7684\u7269\u54c1\u9009\u62e9\u8d85\u8fc76\u4e2a\uff0c\u6bcf\u79cd\u5927\u5c0f\u7684\u7269\u54c1\u9009\u62e9\u6570\u91cf\u4e0d\u80fd\u8d85\u8fc76\u4e2a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u3002",this.tip(),!0)},t.prototype.updateTypesData=function(){if(this.typeDataArr=[],1==l.DaAnData.getInstance().types)for(var e=0;e<this.typeArr.length;e++)for(var t=0;t<5;t++)this.typeDataArr[20*e+t]=this.typeArr[e].getChildByName("label1").children[t].getChildByName("New Toggle").getComponent(cc.Toggle).isChecked,this.typeDataArr[20*e+5+t]=this.typeArr[e].getChildByName("label2").children[t].getChildByName("New Toggle").getComponent(cc.Toggle).isChecked,this.typeDataArr[20*e+10+t]=this.typeArr[e].getChildByName("label3").children[t].getChildByName("New Toggle").getComponent(cc.Toggle).isChecked,this.typeDataArr[20*e+15+t]=this.typeArr[e].getChildByName("label4").children[t].getChildByName("New Toggle").getComponent(cc.Toggle).isChecked;else if(2==l.DaAnData.getInstance().types)for(e=0;e<this.typeArr.length;e++)for(t=0;t<27;t++)this.typeDataArr[27*e+t]=this.typeArr[e].getChildByName("imageNode").getChildByName("Node").children[t].getChildByName("toggle").getComponent(cc.Toggle).isChecked;l.DaAnData.getInstance().typeDataArr=this.typeDataArr.slice()},t.prototype.titleChange=function(e){var t;return 1==e?t="\u7b2c\u4e00\u5173\uff1a":2==e?t="\u7b2c\u4e8c\u5173\uff1a":3==e?t="\u7b2c\u4e09\u5173\uff1a":4==e?t="\u7b2c\u56db\u5173\uff1a":5==e&&(t="\u7b2c\u4e94\u5173\uff1a"),t},t.prototype.setPanel=function(){if(this.updateTypes(),1==l.DaAnData.getInstance().types){this.toggleContainer[0].isChecked=!0,this.typeDataArr=l.DaAnData.getInstance().typeDataArr.slice();for(var e=0;e<this.typeArr.length;e++)for(var t=0;t<5;t++)for(var n=0;n<5;n++)this.typeArr[e].getChildByName("label1").children[n].getChildByName("New Toggle").getComponent(cc.Toggle).isChecked=this.typeDataArr[20*e+n],this.typeArr[e].getChildByName("label2").children[n].getChildByName("New Toggle").getComponent(cc.Toggle).isChecked=this.typeDataArr[20*e+5+n],this.typeArr[e].getChildByName("label3").children[n].getChildByName("New Toggle").getComponent(cc.Toggle).isChecked=this.typeDataArr[20*e+10+n],this.typeArr[e].getChildByName("label4").children[n].getChildByName("New Toggle").getComponent(cc.Toggle).isChecked=this.typeDataArr[20*e+15+n]}else if(2==l.DaAnData.getInstance().types){this.toggleContainer[1].isChecked=!0,this.typetype=l.DaAnData.getInstance().typetype;for(e=0;e<this.typeArr.length;e++)1==this.typetype[e]?this.typeArr[e].getChildByName("Types").getChildByName("toggle1").getComponent(cc.Toggle).isChecked=!0:2==this.typetype[e]&&(this.typeArr[e].getChildByName("Types").getChildByName("toggle2").getComponent(cc.Toggle).isChecked=!0);this.typeDataArr=l.DaAnData.getInstance().typeDataArr.slice();for(e=0;e<this.typeArr.length;e++)for(t=0;t<27;t++)this.typeArr[e].getChildByName("imageNode").getChildByName("Node").children[t].getChildByName("toggle").getComponent(cc.Toggle).isChecked=this.typeDataArr[27*e+t]}this.addToggleCallBack(),0!=l.DaAnData.getInstance().checkpointsNum&&(this.checkpointButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=l.DaAnData.getInstance().checkpointsNum.toString()+"   \u5173")},t.prototype.onBtnSaveClicked=function(){this.updateTypesData(),this.errorChecking()&&a.UIManager.getInstance().showUI(u.default,function(){h.ListenerManager.getInstance().trigger(d.ListenerType.OnEditStateSwitching,{state:1})})},t.prototype.tipButtonCallBack=function(){this.tipNode.active=!1},t.prototype.tip=function(){this.tipNode.active=!0,this.tipNode.getChildByName("layout").on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()})},t.prototype.errorChecking=function(){if(0==l.DaAnData.getInstance().checkpointsNum)return this.tipLabel.string="\u8bf7\u586b\u5199\u5173\u5361\u6570\u91cf\uff0c\u4e0d\u80fd\u4e3a\u7a7a\u3002",this.tip(),!1;if(0==l.DaAnData.getInstance().typeDataArr.length)return this.tipLabel.string="\u7269\u54c1\u79cd\u7c7b\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u9009\u62e9\u7269\u54c1\u79cd\u7c7b\u3002",this.tip(),!1;var e=0;if(1==l.DaAnData.getInstance().types)for(var t=new p.default,n=0;n<l.DaAnData.getInstance().checkpointsNum;n++){for(var r=20*n;r<20*(n+1);r++)this.toggleArr[r].isChecked&&(e++,t.add(Math.floor(r/5)));if(e<4)return this.tipLabel.string=this.titleChange(n+1)+"\u9009\u62e9\u7269\u54c1\u4e0d\u8db3\u56db\u4e2a\uff0c\u6bcf\u5173\u9009\u62e9\u7269\u54c1\u6570\u81f3\u5c11\u56db\u4e2a\uff0c\u8bf7\u7ee7\u7eed\u9009\u62e9\u7269\u54c1\u3002",this.tip(),!1;if(t.size()<2)return this.tipLabel.string=this.titleChange(n+1)+"\u9009\u62e9\u7269\u54c1\u79cd\u7c7b\u4e0d\u8db3\u4e24\u4e2a\uff0c\u6bcf\u5173\u9009\u62e9\u7269\u54c1\u79cd\u7c7b\u81f3\u5c11\u4e24\u4e2a\uff0c\u8bf7\u7ee7\u7eed\u9009\u62e9\u7269\u54c1\u3002",this.tip(),!1;e=0,t.clear()}else if(2==l.DaAnData.getInstance().types)for(n=0;n<l.DaAnData.getInstance().checkpointsNum;n++){for(r=27*n;r<27*(n+1);r++)this.toggleArr[r].isChecked&&e++;if(e<4)return this.tipLabel.string=this.titleChange(n+1)+"\u9009\u62e9\u7269\u54c1\u4e0d\u8db3\u56db\u4e2a\uff0c\u6bcf\u5173\u9009\u62e9\u7269\u54c1\u6570\u81f3\u5c11\u56db\u4e2a\uff0c\u8bf7\u7ee7\u7eed\u9009\u62e9\u7269\u54c1\u3002",this.tip(),!1;if(e>10){var o=e-10;return this.tipLabel.string=this.titleChange(n+1)+"\u9009\u62e9"+e+"\u4e2a\u7269\u54c1\u8d85\u8fc7\u5341\u4e2a\uff0c\u6bcf\u5173\u9009\u62e9\u7269\u54c1\u6570\u6700\u591a\u5341\u4e2a\uff0c\u8bf7\u5220\u9664"+o+"\u4e2a\u7269\u54c1\u3002",this.tip(),!1}e=0}return!0},t.prototype.getNet=function(){s.NetWork.getInstance().httpRequest(s.NetWork.GET_TITLE+"?title_id="+s.NetWork.title_id,"GET","application/json;charset=utf-8",function(e,t){if(console.log("\u6d88\u606f\u8fd4\u56de"+t),!e){var n=t;if(Array.isArray(n.data))return void this.setPanel();var r=JSON.parse(n.data.courseware_content);s.NetWork.courseware_id=n.data.courseware_id,s.NetWork.empty?this.ClearNet():null!=r?(r.types?l.DaAnData.getInstance().types=r.types:console.log("getNet\u4e2d\u8fd4\u56de\u7684types\u7684\u503c\u4e3a\u7a7a"),r.typetype?(l.DaAnData.getInstance().typetype=r.typetype,cc.log(l.DaAnData.getInstance().typetype)):console.log("getNet\u4e2d\u8fd4\u56de\u7684typetype\u7684\u503c\u4e3a\u7a7a"),r.checkpointsNum?(l.DaAnData.getInstance().checkpointsNum=r.checkpointsNum,cc.log(r.checkpointsNum)):console.log("getNet\u4e2d\u8fd4\u56de\u7684checkpointsNum\u7684\u503c\u4e3a\u7a7a"),r.typeDataArr?l.DaAnData.getInstance().typeDataArr=r.typeDataArr:console.log("getNet\u4e2d\u8fd4\u56de\u7684typeDataArr\u7684\u503c\u4e3a\u7a7a"),this.setPanel()):console.log("getNet\u4e2d\u8fd4\u56de\u7684content\u662fnull")}}.bind(this),null)},t.prototype.ClearNet=function(){var e={courseware_id:s.NetWork.courseware_id};s.NetWork.getInstance().httpRequest(s.NetWork.CLEAR,"POST","application/json;charset=utf-8",function(e,t){e||c.UIHelp.showTip("\u7b54\u6848\u5220\u9664\u6210\u529f")}.bind(this),JSON.stringify(e))},t.className="TeacherPanel",o([y(cc.Material)],t.prototype,"oriMaterial",void 0),o([y(cc.Material)],t.prototype,"grayMaterial",void 0),o([y(cc.Prefab)],t.prototype,"autoOptionNode",void 0),o([y(cc.Prefab)],t.prototype,"manualOptionNode",void 0),o([y(cc.Prefab)],t.prototype,"cookieNode",void 0),o([y(cc.Prefab)],t.prototype,"figureNode",void 0),o([y(cc.Node)],t.prototype,"content",void 0),o([y(cc.Node)],t.prototype,"buttonNode",void 0),o([y(cc.Node)],t.prototype,"pullNode",void 0),o([y(cc.Button)],t.prototype,"checkpointButton",void 0),o([y([cc.Toggle])],t.prototype,"toggleContainer",void 0),o([y(cc.Label)],t.prototype,"tipLabel",void 0),o([y(cc.Node)],t.prototype,"tipNode",void 0),t=o([f],t)}(i.BaseUI);n.default=v,cc._RF.pop()},{"../../Data/DaAnData":"DaAnData","../../Data/ListenerType":"ListenerType","../../Http/NetWork":"NetWork","../../Manager/ListenerManager":"ListenerManager","../../Manager/UIManager":"UIManager","../../Utils/UIHelp":"UIHelp","../../collections/Set":"Set","../BaseUI":"BaseUI","./GamePanel":"GamePanel"}],TimeManager:[function(e,t,n){"use strict";cc._RF.push(t,"6a93cVTR3pJrpapom9vowVf","TimeManager"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.getCurrentTime=function(){return(new Date).getTime()},e.prototype.getNowFormatDate=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();n>=1&&n<=9&&(n="0"+n),r>=0&&r<=9&&(r="0"+r);var o=e.getHours(),i=e.getMinutes(),a=e.getSeconds(),s=e.getMilliseconds();return o>=0&&o<=9&&(o="0"+o),i>=0&&i<=9&&(i="0"+i),a>=0&&a<=9&&(a="0"+a),s>=0&&s<=9&&(s="00"+s),s>=10&&s<=90&&(s="0"+s),t+":"+n+":"+r+":"+o+":"+i+":"+a+":"+s},e.instance=null,e}();n.TimeManager=r,cc._RF.pop()},{}],TipUI:[function(e,t,n){"use strict";cc._RF.push(t,"04f62OpblhMYb6+AOI+oOHr","TipUI");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../BaseUI"),a=e("../Item/Tip"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipPrefab=null,t.tipPool=[],t}return r(t,e),t.prototype.showTip=function(e){for(var t=0;t<this.tipPool.length;t++)if(!this.tipPool[t].isReady())return this.tipPool[t].reset(),void this.tipPool[t].playTip(e);for(var n=0;n<this.tipPool.length;++n)if(null!=this.tipPool[n]&&this.tipPool[n].isReady())return this.tipPool[n].node.setSiblingIndex(200),void this.tipPool[n].playTip(e);cc.log("create tip");var r=cc.instantiate(this.tipPrefab);r.parent=this.node;var o=r.getComponent(a.Tip);this.tipPool.push(o),o.playTip(e)},t.className="TipUI",o([l(cc.Prefab)],t.prototype,"tipPrefab",void 0),t=o([c],t)}(i.BaseUI);n.TipUI=p,cc._RF.pop()},{"../BaseUI":"BaseUI","../Item/Tip":"Tip"}],Tip:[function(e,t,n){"use strict";cc._RF.push(t,"c7373SoEY5LDIC2BLTSmOq3","Tip");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.neiRongNode=null,t.tipLabel=null,t.ready=!0,t}return r(t,e),t.prototype.playTip=function(e){this.neiRongNode.active=!0,this.node.stopAllActions(),this.ready=!1,this.tipLabel.string=e,this.reset();var t=cc.moveTo(.5,0,128),n=(cc.fadeIn(.5),cc.fadeOut(.5)),r=cc.spawn(t,n),o=cc.delayTime(1),i=cc.callFunc(function(){this.ready=!0},this),a=cc.sequence(o,r,i);this.node.runAction(a)},t.prototype.isReady=function(){return this.ready},t.prototype.reset=function(){this.node.setPosition(0,0),this.node.opacity=255},o([s(cc.Node)],t.prototype,"neiRongNode",void 0),o([s(cc.Label)],t.prototype,"tipLabel",void 0),t=o([a],t)}(cc.Component);n.Tip=c,cc._RF.pop()},{}],TitleNode:[function(e,t,n){"use strict";cc._RF.push(t,"b276fOW8MRNTqj/bpy0hngz","TitleNode");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../Manager/ListenerManager"),a=e("../../Data/ListenerType"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bianJiLabel=null,t.jianYanLabel=null,t.tiaoNode=null,t.heiSe=cc.color(0,0,0),t.huiSe=cc.color(127,127,127),t}return r(t,e),t.prototype.start=function(){this.bianJiLabel.node.color=this.heiSe,this.jianYanLabel.node.color=this.huiSe,this.tiaoNode.color=this.huiSe,i.ListenerManager.getInstance().add(a.ListenerType.OnEditStateSwitching,this,this.onStateSwitching)},t.prototype.onStateSwitching=function(e){0==e.state?(this.jianYanLabel.node.color=this.huiSe,this.tiaoNode.color=this.huiSe):(this.jianYanLabel.node.color=this.heiSe,this.tiaoNode.color=this.heiSe)},o([l(cc.Label)],t.prototype,"bianJiLabel",void 0),o([l(cc.Label)],t.prototype,"jianYanLabel",void 0),o([l(cc.Node)],t.prototype,"tiaoNode",void 0),t=o([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Data/ListenerType":"ListenerType","../../Manager/ListenerManager":"ListenerManager"}],Tools:[function(e,t,n){"use strict";cc._RF.push(t,"8c9926FhnVH2Z4Gs2ZXOlDV","Tools");var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(e,t){this.time=0,this.pos=cc.Vec2.ZERO,this.time=e,this.pos=t}}();n.ArtMoveParam=o;var i=cc._decorator,a=i.ccclass,s=(i.property,function(){function e(){}return e.playSpine=function(e,t,n,r){void 0===r&&(r=null),e.setAnimation(0,t,n)&&e.setCompleteListener(function(e,n){(e.animation?e.animation.name:"")===t&&r&&null!=r&&r()})},e.getQueryVariable=function(e){if((t=window.location.href.split("?")).length<2)return!1;for(var t=t[1].split("&"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]==e)return r[1]}return!1},e.runArtMoveSequence=function(e,t,n){void 0===n&&(n=null);var r=e.getPosition().sub(t[t.length-1].pos);function o(e){return e.add(r)}if(e.setPosition(o(t[0].pos)),t.length<=1)n&&n();else{for(var i=[],a=1;a<t.length-1;a++){var s=.001*(t[a].time-t[a-1].time);i.push(cc.moveTo(s,o(t[a].pos)))}n&&i.push(cc.callFunc(n)),e.runAction(cc.sequence(i))}},e.getNowTimeMS=function(){return(new Date).getTime()},e.getNowTimeS=function(){return Math.floor(.001*(new Date).getTime())},e.getFormatTime=function(e){var t=Math.floor(e/60);t<10&&(t="0"+t);var n=e%60;return n<10&&(n="0"+n),t+":"+n},e=r([a],e)}());n.Tools=s,cc._RF.pop()},{}],UIHelp:[function(e,t,n){"use strict";cc._RF.push(t,"c44e6cLg85JzaIFNvBdsH7x","UIHelp"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Manager/UIManager"),o=e("../UI/panel/TipUI"),i=e("../UI/Item/affirmTips"),a=e("../UI/Item/OverTips"),s=function(){function e(){}return e.showTip=function(t){var n=r.UIManager.getInstance().getUI(o.TipUI);n?n.showTip(t):r.UIManager.getInstance().openUI(o.TipUI,211,null,function(){e.showTip(t)})},e.showOverTip=function(t,n,o,i,s){void 0===n&&(n=""),void 0===o&&(o=""),void 0===i&&(i=null),void 0===s&&(s=null);var c=r.UIManager.getInstance().getUI(a.OverTips);c?c.init(t,n,o,i,s):r.UIManager.getInstance().openUI(a.OverTips,210,null,function(){e.showOverTip(t,n,o,i,s)})},e.AffirmTip=function(t,n,o,a,s,c,l){var p=r.UIManager.getInstance().getUI(i.AffirmTips);p?p.init(t,n,o,a,s,c,l):r.UIManager.getInstance().openUI(i.AffirmTips,210,null,function(){e.AffirmTip(t,n,o,a,s,c,l)})},e}();n.UIHelp=s,cc._RF.pop()},{"../Manager/UIManager":"UIManager","../UI/Item/OverTips":"OverTips","../UI/Item/affirmTips":"affirmTips","../UI/panel/TipUI":"TipUI"}],UIManager:[function(e,t,n){"use strict";cc._RF.push(t,"fcb706mngZPXIeAjofYaIuT","UIManager"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){this.uiList=[],this.uiRoot=null,this.uiRoot=cc.find("Canvas")}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.openUI=function(e,t,n,r,o){for(var i=this,a=[],s=5;s<arguments.length;s++)a[s-5]=arguments[s];this.getUI(e)||cc.loader.loadRes(e.getUrl(),function(e,t,n){o&&o(e,t,n)},function(o,s){if(o)cc.log(o);else if(!i.getUI(e)){var c=cc.instantiate(s);c.parent=i.uiRoot,n&&(c.zIndex=n);var l=c.getComponent(e);l.data=t,l.tag=e,i.uiList.push(l),r&&r(a)}})},e.prototype.closeUI=function(e){for(var t=0;t<this.uiList.length;++t)if(this.uiList[t].tag===e)return this.uiList[t].node.destroy(),void this.uiList.splice(t,1)},e.prototype.showUI=function(e,t,n){var r=this,o=this.getUI(e);o?(o.data=t,o.node.active=!0,o.onShow(),n&&n()):this.openUI(e,t,0,function(){n&&n(),r.getUI(e).onShow()})},e.prototype.hideUI=function(e){var t=this.getUI(e);t&&(t.node.active=!1)},e.prototype.getUI=function(e){for(var t=0;t<this.uiList.length;++t)if(this.uiList[t].tag===e)return this.uiList[t];return null},e}();n.UIManager=r,cc._RF.pop()},{}],UploadAndReturnPanel:[function(e,t,n){"use strict";cc._RF.push(t,"8a2a4ho4VlCloJCvzPCR9a/","UploadAndReturnPanel");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../BaseUI"),a=e("../../Manager/UIManager"),s=e("./GamePanel"),c=e("./SubmissionPanel"),l=e("../../Manager/ListenerManager"),p=e("../../Data/ListenerType"),u=e("../../Data/DaAnData"),h=e("../../Utils/UIHelp"),d=e("../Item/OverTips"),g=e("../../Manager/AudioManager"),f=cc._decorator,y=f.ccclass,v=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return r(t,e),n=t,t.prototype.start=function(){},t.prototype.onFanHui=function(){l.ListenerManager.getInstance().trigger(p.ListenerType.OnEditStateSwitching,{state:0}),a.UIManager.getInstance().closeUI(s.default),a.UIManager.getInstance().closeUI(n),a.UIManager.getInstance().closeUI(d.OverTips),a.UIManager.getInstance().closeUI(c.default),g.AudioManager.getInstance().stopAll(),u.DaAnData.getInstance().submitEnable=!1},t.prototype.onTiJiao=function(){u.DaAnData.getInstance().submitEnable?a.UIManager.getInstance().openUI(c.default):h.UIHelp.showTip("\u8bf7\u901a\u5173\u540e\u8fdb\u884c\u4fdd\u5b58\u3002")},t.className="UploadAndReturnPanel",t=n=o([y],t)}(i.BaseUI));n.default=v,cc._RF.pop()},{"../../Data/DaAnData":"DaAnData","../../Data/ListenerType":"ListenerType","../../Manager/AudioManager":"AudioManager","../../Manager/ListenerManager":"ListenerManager","../../Manager/UIManager":"UIManager","../../Utils/UIHelp":"UIHelp","../BaseUI":"BaseUI","../Item/OverTips":"OverTips","./GamePanel":"GamePanel","./SubmissionPanel":"SubmissionPanel"}],affirmTips:[function(e,t,n){"use strict";cc._RF.push(t,"67e25WAGoRADq1zkpxqqwdF","affirmTips");var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../BaseUI"),a=e("../../Manager/UIManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.NodeDes=null,t.title=null,t.des=null,t.close=null,t.ok=null,t.btnCloseLabel=null,t.btnOkLabel=null,t.win=null,t.fail=null,t.callbackOk=null,t.callbackClose=null,t}var n;return r(t,e),n=t,t.prototype.start=function(){},t.prototype.init=function(e,t,n,r,o,i,a){this.title.node.active=!1,this.des.node.active=!0,this.win.active=1==e,this.fail.active=2==e,this.type=e,this.callbackOk=r,this.des.string=t,this.callbackClose=n,""==o&&(this.close.node.active=!1,this.ok.node.x=0),o&&(this.btnCloseLabel.string=o),i&&(this.btnOkLabel.string=i),1==a&&(this.close.interactable=!1)},t.prototype.setOnlyOneBtnType=function(e){this.close.node.active=!1,this.ok.node.active=!0,this.ok.node.position=cc.v2(0,this.ok.node.position.y),e&&(this.btnOkLabel.string=e,e.length>4&&(this.btnOkLabel.fontSize=40))},t.prototype.OnClickClose=function(){},t.prototype.TipsAnimatorScale=function(e){e.stopAllActions();var t=cc.sequence(cc.delayTime(1),cc.scaleTo(.2,1,1));e.runAction(t)},t.prototype.OnClickOk=function(){console.log("\u786e\u8ba4"),a.UIManager.getInstance().closeUI(n),this.callbackOk()},t.prototype.OnClickCancel=function(){console.log("\u53d6\u6d88"),a.UIManager.getInstance().closeUI(n),this.callbackClose()},t.className="AffirmTips",o([l(cc.Node)],t.prototype,"NodeDes",void 0),o([l(cc.Label)],t.prototype,"title",void 0),o([l(cc.Label)],t.prototype,"des",void 0),o([l(cc.Button)],t.prototype,"close",void 0),o([l(cc.Button)],t.prototype,"ok",void 0),o([l(cc.Label)],t.prototype,"btnCloseLabel",void 0),o([l(cc.Label)],t.prototype,"btnOkLabel",void 0),o([l(cc.Node)],t.prototype,"win",void 0),o([l(cc.Node)],t.prototype,"fail",void 0),t=n=o([c],t)}(i.BaseUI);n.AffirmTips=p,cc._RF.pop()},{"../../Manager/UIManager":"UIManager","../BaseUI":"BaseUI"}],arrays:[function(e,t,n){"use strict";cc._RF.push(t,"b058arw+iJCUoMo5lRZ29ul","arrays"),Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util");function o(e,t,n){for(var o=n||r.defaultEquals,i=e.length,a=0;a<i;a++)if(o(e[a],t))return a;return-1}n.indexOf=o,n.lastIndexOf=function(e,t,n){for(var o=n||r.defaultEquals,i=e.length-1;i>=0;i--)if(o(e[i],t))return i;return-1},n.contains=function(e,t,n){return o(e,t,n)>=0},n.remove=function(e,t,n){var r=o(e,t,n);return!(r<0||(e.splice(r,1),0))},n.frequency=function(e,t,n){for(var o=n||r.defaultEquals,i=e.length,a=0,s=0;s<i;s++)o(e[s],t)&&a++;return a},n.equals=function(e,t,n){var o=n||r.defaultEquals;if(e.length!==t.length)return!1;for(var i=e.length,a=0;a<i;a++)if(!o(e[a],t[a]))return!1;return!0},n.copy=function(e){return e.concat()},n.swap=function(e,t,n){if(t<0||t>=e.length||n<0||n>=e.length)return!1;var r=e[t];return e[t]=e[n],e[n]=r,!0},n.toString=function(e){return"["+e.toString()+"]"},n.forEach=function(e,t){for(var n=0,r=e;n<r.length;n++)if(!1===t(r[n]))return},cc._RF.pop()},{"./util":"util"}],util:[function(e,t,n){"use strict";cc._RF.push(t,"c9cacB846tOCorK/Mt3JpJs","util"),Object.defineProperty(n,"__esModule",{value:!0});var r=Object.prototype.hasOwnProperty;function o(e){return"function"==typeof e}function i(e){return void 0===e}function a(e){return"[object String]"===Object.prototype.toString.call(e)}n.has=function(e,t){return r.call(e,t)},n.defaultCompare=function(e,t){return e<t?-1:e===t?0:1},n.defaultEquals=function(e,t){return e===t},n.defaultToString=function(e){return null===e?"COLLECTION_NULL":i(e)?"COLLECTION_UNDEFINED":a(e)?"$s"+e:"$o"+e.toString()},n.makeString=function(e,t){if(void 0===t&&(t=","),null===e)return"COLLECTION_NULL";if(i(e))return"COLLECTION_UNDEFINED";if(a(e))return e.toString();var r="{",o=!0;for(var s in e)n.has(e,s)&&(o?o=!1:r+=t,r=r+s+":"+e[s]);return r+"}"},n.isFunction=o,n.isUndefined=i,n.isString=a,n.reverseCompareFunction=function(e){return i(e)||!o(e)?function(e,t){return e<t?1:e===t?0:-1}:function(t,n){return-1*e(t,n)}},n.compareToEquals=function(e){return function(t,n){return 0===e(t,n)}},cc._RF.pop()},{}]},{},["BaseConfigContainer","ConstValue","CustomTypes","DaAnData","DataReporting","GameData","ListenerType","NetWork","GameMain","AudioManager","ListenerManager","TimeManager","UIManager","Tools","BaseUI","OverTips","Tip","affirmTips","ErrorPanel","GamePanel","LoadingUI","SubmissionPanel","TeacherPanel","TipUI","TitleNode","UploadAndReturnPanel","AdaptiveScreen","FadeUIPlugin","LogWrap","MathExtension","StringExtension","UIHelp","Dictionary","Set","arrays","util"]);