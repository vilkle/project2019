{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\UI\\Item/assets\\scripts\\UI\\Item\\OverTips.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\UI\\Item","sourcesContent":["import { BaseUI } from \"../BaseUI\";\nimport { Tools } from \"../../UIComm/Tools\";\nimport { UIManager } from \"../../Manager/UIManager\";\nimport { AudioManager } from \"../../Manager/AudioManager\";\n\n\nexport enum Type_Tile {\n    ZuoDaJieShu,\n    ChuangGuanChengGong,\n    TiaoZhanJieShu,\n    TiaoZhanChengGong,\n    ChuangGuanJieShu\n}\n\nexport const DefalutTitle = [\"作答结束\", \"闯关成功\", \"挑战结束\", \"挑战成功\", \"闯关结束\"];\n\nlet FontMap = {\n    \"作\": \"img_zuo\",\n    \"答\": \"img_da\",\n    \"结\": \"img_jie\",\n    \"束\": \"img_shu\",\n    \"成\": \"img_cheng\",\n    \"功\": \"img_gong\",\n    \"挑\": \"img_tiao\",\n    \"战\": \"img_zhan\",\n    \"闯\": \"img_chuang\",\n    \"关\": \"img_guan\",\n};\n\n\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport class OverTips extends BaseUI {\n\n    protected static className = \"OverTips\";\n\n    @property(cc.Label)\n    private label_tip: cc.Label = null;\n\n    @property(sp.Skeleton)\n    private spine_false: sp.Skeleton = null;\n    @property(sp.Skeleton)\n    private spine_true: sp.Skeleton = null;\n    @property(sp.Skeleton)\n    private spine_complete: sp.Skeleton = null;\n\n    @property(cc.Node)\n    private node_close: cc.Node = null;\n\n    private callback = null;\n    private endInAnimationOver: boolean = false;\n    private img_titles: cc.Node[] = [];\n\n    constructor() {\n        super();\n    }\n\n    onLoad() {\n        cc.loader.loadRes(\"images/OverTips/word\", cc.SpriteAtlas, function (err, atlas) { });\n    }\n\n    start() {\n        this.node_close.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);\n    }\n\n    onDisable() {\n        this.node_close.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);\n    }\n\n    /**\n     设置显示内容\n     @param {number} type          0: 错误  1：答对了  2：闯关成功(一直显示不会关闭)\n     @param {string} str           提示内容\n     */\n    init(type: number, str: string = \"\", callback: Function, endTitle?: string): void {\n        this.callback = callback;\n        this.spine_false.node.active = type == 0;\n        this.spine_true.node.active = type == 1;\n        this.spine_complete.node.active = type == 2;\n        this.label_tip.string = str;\n        this.label_tip.node.active = type == 2;\n        switch (type) {\n            case 0:\n                Tools.playSpine(this.spine_false, \"false\", false, this.delayClose.bind(this));\n                AudioManager.getInstance().playSound(\"sfx_genneg\", false, 1);\n                break;\n            case 1:\n                Tools.playSpine(this.spine_true, \"true\", false, this.delayClose.bind(this));\n                AudioManager.getInstance().playSound(\"sfx_genpos\", false, 1);\n                break;\n            case 2:\n                this.spine_complete.node.active = false;\n                if (!endTitle) endTitle = DefalutTitle[0];\n                if (endTitle.length != 4) return;\n                for (let index = 0; index < 4; index++) {\n                    this.createTitleImage(endTitle[index]);\n                }\n                break;\n        }\n        let endPos = this.label_tip.node.position;\n        let framePos_1 = cc.v2(endPos.x, endPos.y - 72.8);\n        let framePos_2 = cc.v2(endPos.x, endPos.y + 12);\n        let framePos_3 = cc.v2(endPos.x, endPos.y - 8);\n        let framePos_4 = cc.v2(endPos.x, endPos.y + 7.3);\n        this.label_tip.node.position = framePos_1;\n        this.label_tip.node.runAction(cc.sequence(cc.moveTo(0.08, framePos_2), cc.moveTo(0.08, framePos_3), cc.moveTo(0.08, framePos_4), cc.moveTo(0.06, endPos)));\n    }\n\n    delayClose(): void {\n        this.scheduleOnce(function () { this.onClickClose() }.bind(this), 0);\n    }\n\n    onClickClose(event?, customEventData?): void {\n        if (event) AudioManager.getInstance().playSound(\"sfx_buttn\", false, 1);\n        if (this.callback) this.callback();\n        UIManager.getInstance().closeUI(OverTips);\n    }\n\n    createTitleImage(titleName: string) {\n        cc.loader.loadRes(\"images/OverTips/word\", cc.SpriteAtlas, function (err, atlas) {\n            if (err) {\n                console.log(err.message || err);\n                return;\n            }\n            let spriteFrame = atlas.getSpriteFrame(FontMap[titleName]);\n            let imageNode = new cc.Node();\n            let image = imageNode.addComponent(cc.Sprite);\n            image.spriteFrame = spriteFrame;\n            imageNode.parent = this.node;\n            this.img_titles.push(imageNode);\n            if (this.img_titles.length == 4) {\n                this.endInAnimationOver = true;\n                this.spine_complete.node.active = true;\n                Tools.playSpine(this.spine_complete, \"in\", false, () => {\n                    Tools.playSpine(this.spine_complete, \"stand\", true);\n                    this.endInAnimationOver = false;\n                });\n                AudioManager.getInstance().playSound(\"sfx_geupgrd\", false, 1);\n            }\n        }.bind(this));\n    }\n\n    update() {\n        if (!this.endInAnimationOver) return;\n\n        let bone = this.spine_complete.findBone(\"paipai\");\n        let bone1 = this.spine_complete.findBone(\"xiaoU\");\n        let bone2 = this.spine_complete.findBone(\"mimiya\");\n        let bone3 = this.spine_complete.findBone(\"doudou\");\n\n        this.img_titles[0].position = cc.v2(bone.worldX - 139, bone.worldY - 135);\n        this.img_titles[1].position = cc.v2(bone1.worldX - 139, bone1.worldY - 135);\n        this.img_titles[2].position = cc.v2(bone2.worldX - 139, bone2.worldY - 135);\n        this.img_titles[3].position = cc.v2(bone3.worldX - 139, bone3.worldY - 135);\n    }\n}\n"]}